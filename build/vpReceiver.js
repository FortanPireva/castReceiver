(()=>{"use strict";const e=e=>{if(!e)return"00:00";let t=Math.floor(e/3600),s=Math.floor((e-3600*t)/60),i=Math.floor(e%60);return t?t.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0"):s.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")};class t{static DEBUG_VAST_SERVICE="DEBUG_VAST_SERVICE";constructor(e){this.receiver=e,this.adContainer=document.querySelector(".adContainer"),this.adsDisplayContainer=null,this.adsLoader=null,this.adsDisplayInitialized=!1,this.currentAds=null,this.initialized=!1,this.autoplayAllowed=!1,this.autoplayRequiresMuted=!1}init(){this.initialized=!0,google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adsDisplayContainer=new google.ima.AdDisplayContainer(this.adContainer,this.receiver.video),this.adsLoader=new google.ima.AdsLoader(this.adsDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1)}loadAds(e,s){this.currentAds={},this.initialized||this.init(),this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"load "+e),e?(this.currentAds.content=e,this.currentAds.type="url"):s&&(this.currentAds.content=s,this.currentAds.type="xml"),this.currentAds.currentAdIndex=0,this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE),"url"===this.currentAds.type?this.load(this.currentAds.content).bind(this):this.load(null,this.currentAds.content).bind(this)}onDoubleClick(e){}load(e,s){if(this.initialized||this.init(),this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"Initialized"+this.vastUrl),this.adContainer.addEventListener("dblclick",this.onDoubleClick.bind(this)),this.adsRequest=new google.ima.AdsRequest,this.receiver.castDebugLogger.debug("okej e qity pra","pse"+e),e)this.adsRequest.adTagUrl=e;else{if(!s)return;this.adsRequest.adsResponse=s}this.receiver.castDebugLogger.debug("okej e qity pra","Asdfxx"),this.adsRequest.linearAdSlotWidth=this.receiver.video.clientWidth,this.adsRequest.linearAdSlotHeight=this.receiver.video.clientHeight,this.adsRequest.nonLinearAdSlotWidth=this.receiver.video.clientWidth,this.adsRequest.nonLinearAdSlotHeight=this.receiver.video.clientHeight/3,this.adsRequest.setAdWillAutoPlay(this.autoplayAllowed),this.adsRequest.setAdWillPlayMuted(this.autoplayRequiresMuted),this.receiver.castDebugLogger.debug("okej e qity pra","Asdf"),this.adsRequest.vastLoadTimeout=8e3,this.adsLoader.requestAds(this.adsRequest)}onAdsManagerLoaded(e){this.adsManager&&this.adsManager.destroy();const t=new google.ima.AdsRenderingSettings;this.adsManager=e.getAdsManager(this.receiver.video,t),this.playAds()}playAds(){this.adsDisplayInitialized||(this.adsDisplayContainer.initialize(),this.adsDisplayInitialized=!0);const e=this.receiver.video.clientWidth,t=this.receiver.video.clientHeight;try{this.adsManager.init(e,t,google.ima.ViewMode.FULLSCREEN),this.adsManager.start(),this.receiver.receiverControls.loader.style.display="none"}catch(e){console.log("AdsManager could not be started",e)}}onAdError(e){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE," ad error"+e)}}const s=t;function i(t,i){let a=new class{constructor(t,i){this.context=null,this.playerManager=null,this.castDebugLogger=null,this.appId=i.appId,this.video=document.querySelector(t),this.playbackConfig=null,this.controls=null,this.hls=null,this.videoObject={},this.videoContainer=this.video.parentElement,this.playbackRate=1,this.autoplay=!1,this.receiverControls=new class{constructor(t){this.seekbar=new class{constructor(e){this.element=document.querySelector(e),this.castdebugger=null,this.show=!1}setCastDebugger(e){this.castdebugger=e}setProgress(e,t){this.element.style.width=e/t*100+"%"}showHide(e){this.castdebugger.debug("showHide",`${e} ${this.show}`),this.show?this.element.parentElement.style.display="block":setTimeout((()=>{this.element.parentElement.style.display="none"}),e)}}(".seekbar-progress"),this.timer=new class{constructor(e){this.element=document.querySelector(e),this.element.textContent="00:00 / 00:00"}update(t,s){this.element.textContent=`${e(t)} /${e(s)}`}}(".timer"),this.castDebugger=null,this.element=document.querySelector(t),this.show=!0,this.loader=document.querySelector(".loader"),this.playIcon=document.querySelector(".vp-icon-play"),this.pauseIcon=document.querySelector(".vp-icon-pause")}setCastDebugger(e){this.castDebugger=e,this.seekbar.setCastDebugger(this.castDebugger)}pause(){this.pauseIcon.style.display="none",this.playIcon.style.display="block",setTimeout((()=>{this.playIcon.style.display="none"}),2e3)}play(){this.playIcon.style.display="none",this.pauseIcon.style.display="block",setTimeout((()=>{this.pauseIcon.style.display="none"}),2e3)}update(e){this.seekbar.setProgress(e.currentTime,e.duration),this.timer.update(e.currentTime,e.duration)}hideControls(e){this.show=!1,this.showHide(e||5e3)}showControls(){this.show=!0,this.showHide(10)}showHide(e){this.show?this.element.style.display="flex":setTimeout((()=>{this.element.style.display="none"}),e)}}(".controls"),this.mediaManager=null,this.castReceiverManager=null,this.videoStarted=!1,this.vastService=new s(this),this.config={},this.debugTags={LOAD_REQUEST:"LOAD_REQUEST",ATTACH_MEDIA:"ATTACH_MEDIA"}}start(){this.receiverControls.loader.style.display="none",this.onPlay()}onPlay(){this.castDebugLogger.debug("on play",this.video.getAttribute("src")),this.video.play().then((()=>{this.videoStarted?this.receiverControls.play():(this.receiverControls.showControls(),this.videoStarted=!0),this.receiverControls.hideControls(6e3)})).catch((()=>{}))}onPause(){this.playerManager.pause(),this.receiverControls.pause(),this.receiverControls.showControls()}addPlayerEvents(){this.video.addEventListener("timeupdate",this.onTimeUpdate),this.video.addEventListener("ended",this.onEnd.bind(this))}onEnd(){if(this.castDebugLogger.debug("on End",this.config.replay),this.config.replay)this.attachMedia();else{var e=document.createElement("p");e.textContent="no more videos",document.querySelector("body").append(e)}}onTimeUpdate(){this.receiverControls.update(this.updatePlayerState())}updatePlayerState(){return{currentTime:this.video.currentTime,duration:this.videoObject.duration}}attachMedia(){if(vpReceiver.HLSsupported=Hls.isSupported(),this.castDebugLogger.debug("inside attach media",vpReceiver.HLSsupported),this.video.playbackRate=1,this.castDebugLogger.debug("video file",JSON.stringify(this.video,["id","className","tagName"])),this.videoObject.file.endsWith("mp4"))this.castDebugLogger.debug("inside mp4",this.videoObject.file),this.video.src=this.videoObject.file,this.start();else if(vpReceiver.HLSsupported){this.castDebugLogger.debug("inside hlssupported",this.videoObject.file);try{this.hls=new Hls,this.castDebugLogger.debug("hls initialized",this.videoObject.file),this.currentTime>0&&(this.video.currentTime=this.currentTime),this.hls.attachMedia(this.video),this.castDebugLogger.debug("attached media",this.videoObject.file),this.hls.on(Hls.Events.MEDIA_ATTACHED,(()=>{this.castDebugLogger.debug("amedia attached",this.videoObject.file),this.hls.startLevel=0,this.castDebugLogger.debug("loading source hlssupported",this.videoObject.file),this.hls.loadSource(this.videoObject.file)})),this.hls.on(Hls.Events.MANIFEST_PARSED,((e,t)=>{this.start()})),this.hls.on(Hls.Events.ERROR,((e,t)=>{this.castDebugLogger.debug("HLS  ERROR",t.details)}))}catch(e){this.castDebugLogger.debug("hls error",e)}}this.castDebugLogger.debug("finished attach media")}fakeinit(){this.castDebugLogger={debug:function(e,t){console.log(e,t)},error:function(e,t){console.log(e,t)}},this.receiverControls.setCastDebugger(this.castDebugLogger),this.videoObject.file="https://vp.gjirafa.net/vps/prod/odgehtyo/encode/vjsmylds/mp4/360p.mp4",this.vastService.loadAds("https://vp-dev.gjirafa.net/vps/content/vast/preroll-2.xml"),this.bindMethods(),this.addPlayerEvents()}init(){this.context=cast.framework.CastReceiverContext.getInstance(),this.context.setLoggerLevel(cast.framework.LoggerLevel.DEBUG),this.playerManager=this.context.getPlayerManager(),this.playerManager.setMediaElement(this.video),this.castDebugLogger=cast.debug.CastDebugLogger.getInstance(),this.castDebugLogger.setEnabled(!0),this.castDebugLogger.debug("hello","okej"),this.receiverControls.setCastDebugger(this.castDebugLogger),this.context.start(),this.bindMethods(),this.bindInterceptors(),this.addPlayerEvents()}onSeek(e){this.video.currentTime=e.currentTime,this.receiverControls.showControls(),this.receiverControls.hideControls(6e3),this.receiverControls.update(this.updatePlayerState())}drawButtons(){this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_SECONDARY_1,cast.framework.ui.ControlsButton.QUEUE_PREV),this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_PRIMARY_1,cast.framework.ui.ControlsButton.CAPTIONS),this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_PRIMARY_2,cast.framework.ui.ControlsButton.SEEK_FORWARD_15),this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_SECONDARY_2,cast.framework.ui.ControlsButton.QUEUE_NEXT)}bindInterceptors(){this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,this.onLoadRequest.bind(this)),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.PLAY,this.onPlay.bind(this)),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.PAUSE,this.onPause.bind(this)),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.SEEK,this.onSeek.bind(this))}bindMethods(){this.bindInterceptors=this.bindInterceptors.bind(this),this.onLoadRequest=this.onLoadRequest.bind(this),this.attachMedia=this.attachMedia.bind(this),this.start=this.start.bind(this),this.addPlayerEvents=this.addPlayerEvents.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.updatePlayerState=this.updatePlayerState.bind(this)}onLoadRequest(e){this.castDebugLogger.debug("VPreceiver",e.media.contentId),this.castDebugLogger.debug("VPreceiver1",Hls.isSupported()),this.videoObject.file=e.media.contentId,this.videoObject.duration=e.media.metadata.duration,this.currentTime=e.currentTime,this.playbackRate=e.playbackRate,this.autoplay=e.autoplay;try{if(this.config.replay=void 0!==e.replay&&e.replay,this.castDebugLogger.info(this.debugTags.LOAD_REQUEST,"Before error "+e.customData.vastUrl),e.customData.vastUrl||e.customData.vastXml)return this.vastService.loadAds(e.customData.vastUrl,e.customData.vastXml),null;this.attachMedia()}catch(e){this.castDebugLogger.error(this.debugTags.LOAD_REQUEST,JSON.stringify(e)),this.castDebugLogger.info(this.debugTags.LOAD_REQUEST,"Config"+JSON.stringify(this.config)),this.attachMedia()}return null}addBreaks(e){return castDebugLogger.debug(LOG_RECEIVER_TAG,"addBreaks: "+JSON.stringify(e)),fetchMediaById("fbb_ad").then((t=>{e.breakClips=[{id:"fbb_ad",title:t.title,contentUrl:t.stream.dash,contentType:"application/dash+xml",whenSkippable:5}],e.breaks=[{id:"pre-roll",breakClipIds:["fbb_ad"],position:0}]}))}fetchMediaById(e){return castDebugLogger.debug(LOG_RECEIVER_TAG,"fetching id: "+e),new Promise(((t,s)=>{fetch(CONTENT_URL).then((e=>e.json())).then((i=>{i?i[e]?t(i[e]):s(`${e} not found in repository`):s("Content repository not found.")}))}))}}(t,i);return a.init(),a}i.HLSsupported=!1,window.vpReceiver=i})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidnBSZWNlaXZlci5qcyIsIm1hcHBpbmdzIjoibUJBMkJBLE1DRkEsRUF6Qm9CQSxJQUNsQixJQUFLQSxFQUFNLE1BQU8sUUFFbEIsSUFBSUMsRUFBUUMsS0FBS0MsTUFBTUgsRUFBTyxNQUMxQkksRUFBVUYsS0FBS0MsT0FBT0gsRUFBZSxLQUFSQyxHQUFnQixJQUM3Q0ksRUFBVUgsS0FBS0MsTUFBTUgsRUFBTyxJQUdoQyxPQUFLQyxFQVNIQSxFQUFNSyxXQUFXQyxTQUFTLEVBQUcsS0FDN0IsSUFDQUgsRUFBUUUsV0FBV0MsU0FBUyxFQUFHLEtBQy9CLElBQ0FGLEVBQVFDLFdBQVdDLFNBQVMsRUFBRyxLQVg3QkgsRUFBUUUsV0FBV0MsU0FBUyxFQUFHLEtBQy9CLElBQ0FGLEVBQVFDLFdBQVdDLFNBQVMsRUFBRyxNQ1pyQyxNQUFNQyxFQUNxQiwwQkFBRyxxQkFDNUJDLFlBQVlDLEdBQ1ZDLEtBQUtELFNBQVdBLEVBQ2hCQyxLQUFLQyxZQUFjQyxTQUFTQyxjQUFjLGdCQUMxQ0gsS0FBS0ksb0JBQXNCLEtBQzNCSixLQUFLSyxVQUFZLEtBQ2pCTCxLQUFLTSx1QkFBd0IsRUFDN0JOLEtBQUtPLFdBQWEsS0FDbEJQLEtBQUtRLGFBQWMsRUFDbkJSLEtBQUtTLGlCQUFrQixFQUN2QlQsS0FBS1UsdUJBQXdCLEVBRy9CQyxPQUNFWCxLQUFLUSxhQUFjLEVBQ25CSSxPQUFPQyxJQUFJQyxTQUFTQyxhQUNsQkgsT0FBT0MsSUFBSUcsZUFBZUMsVUFBVUMsU0FHdENsQixLQUFLSSxvQkFBc0IsSUFBSVEsT0FBT0MsSUFBSU0sbUJBQ3hDbkIsS0FBS0MsWUFDTEQsS0FBS0QsU0FBU3FCLE9BRWhCcEIsS0FBS0ssVUFBWSxJQUFJTyxPQUFPQyxJQUFJUSxVQUFVckIsS0FBS0kscUJBRS9DSixLQUFLSyxVQUFVaUIsaUJBQ2JWLE9BQU9DLElBQUlVLHNCQUFzQkMsS0FBS0MsbUJBQ3RDekIsS0FBSzBCLG1CQUFtQkMsS0FBSzNCLE9BQzdCLEdBR0ZBLEtBQUtLLFVBQVVpQixpQkFDYlYsT0FBT0MsSUFBSWUsYUFBYUosS0FBS0ssU0FDN0I3QixLQUFLOEIsV0FDTCxHQUdKQyxRQUFRQyxFQUFTQyxHQUNmakMsS0FBS08sV0FBYSxHQUNiUCxLQUFLUSxhQUNSUixLQUFLVyxPQUVQWCxLQUFLRCxTQUFTbUMsZ0JBQWdCQyxNQUM1QnRDLEVBQVl1QyxtQkFDWixRQUFVSixHQUdSQSxHQUNGaEMsS0FBS08sV0FBVzhCLFFBQVVMLEVBQzFCaEMsS0FBS08sV0FBVytCLEtBQU8sT0FDZEwsSUFDVGpDLEtBQUtPLFdBQVc4QixRQUFVSixFQUMxQmpDLEtBQUtPLFdBQVcrQixLQUFPLE9BRXpCdEMsS0FBS08sV0FBV2dDLGVBQWlCLEVBQ2pDdkMsS0FBS0QsU0FBU21DLGdCQUFnQkMsTUFBTXRDLEVBQVl1QyxvQkFDbkIsUUFBekJwQyxLQUFLTyxXQUFXK0IsS0FDbEJ0QyxLQUFLd0MsS0FBS3hDLEtBQUtPLFdBQVc4QixTQUFTVixLQUFLM0IsTUFDckNBLEtBQUt3QyxLQUFLLEtBQU14QyxLQUFLTyxXQUFXOEIsU0FBU1YsS0FBSzNCLE1BRXJEeUMsY0FBY0MsSUFDZEYsS0FBS1IsRUFBU0MsR0FlWixHQWRLakMsS0FBS1EsYUFBYVIsS0FBS1csT0FDNUJYLEtBQUtELFNBQVNtQyxnQkFBZ0JDLE1BQzVCdEMsRUFBWXVDLG1CQUNaLGNBQWdCcEMsS0FBS2dDLFNBSXZCaEMsS0FBS0MsWUFBWXFCLGlCQUNmLFdBQ0F0QixLQUFLeUMsY0FBY2QsS0FBSzNCLE9BRTFCQSxLQUFLMkMsV0FBYSxJQUFJL0IsT0FBT0MsSUFBSStCLFdBQ2pDNUMsS0FBS0QsU0FBU21DLGdCQUFnQkMsTUFBTSxrQkFBbUIsTUFBUUgsR0FFM0RBLEVBQ0ZoQyxLQUFLMkMsV0FBV0UsU0FBV2IsTUFDdEIsS0FBSUMsRUFHVCxPQUZBakMsS0FBSzJDLFdBQVdHLFlBQWNiLEVBSWhDakMsS0FBS0QsU0FBU21DLGdCQUFnQkMsTUFBTSxrQkFBbUIsVUFFdkRuQyxLQUFLMkMsV0FBV0ksa0JBQW9CL0MsS0FBS0QsU0FBU3FCLE1BQU00QixZQUN4RGhELEtBQUsyQyxXQUFXTSxtQkFBcUJqRCxLQUFLRCxTQUFTcUIsTUFBTThCLGFBQ3pEbEQsS0FBSzJDLFdBQVdRLHFCQUF1Qm5ELEtBQUtELFNBQVNxQixNQUFNNEIsWUFDM0RoRCxLQUFLMkMsV0FBV1Msc0JBQ2RwRCxLQUFLRCxTQUFTcUIsTUFBTThCLGFBQWUsRUFFckNsRCxLQUFLMkMsV0FBV1Usa0JBQWtCckQsS0FBS1MsaUJBQ3ZDVCxLQUFLMkMsV0FBV1csbUJBQW1CdEQsS0FBS1UsdUJBQ3hDVixLQUFLRCxTQUFTbUMsZ0JBQWdCQyxNQUFNLGtCQUFtQixRQUV2RG5DLEtBQUsyQyxXQUFXWSxnQkFBa0IsSUFDbEN2RCxLQUFLSyxVQUFVbUQsV0FBV3hELEtBQUsyQyxZQUdqQ2pCLG1CQUFtQitCLEdBQ2J6RCxLQUFLMEQsWUFDUDFELEtBQUswRCxXQUFXQyxVQUVsQixNQUFNQyxFQUF1QixJQUFJaEQsT0FBT0MsSUFBSWdELHFCQUM1QzdELEtBQUswRCxXQUFhRCxFQUFzQkssY0FDdEM5RCxLQUFLRCxTQUFTcUIsTUFDZHdDLEdBRUY1RCxLQUFLK0QsVUFFUEEsVUFDTy9ELEtBQUtNLHdCQUNSTixLQUFLSSxvQkFBb0I0RCxhQUN6QmhFLEtBQUtNLHVCQUF3QixHQUUvQixNQUFNMkQsRUFBUWpFLEtBQUtELFNBQVNxQixNQUFNNEIsWUFDNUJrQixFQUFTbEUsS0FBS0QsU0FBU3FCLE1BQU04QixhQUNuQyxJQUNFbEQsS0FBSzBELFdBQVcvQyxLQUFLc0QsRUFBT0MsRUFBUXRELE9BQU9DLElBQUlzRCxTQUFTQyxZQUN4RHBFLEtBQUswRCxXQUFXVyxRQUNoQnJFLEtBQUtELFNBQVN1RSxpQkFBaUJDLE9BQU9DLE1BQU1DLFFBQVUsT0FDdEQsTUFBT0MsR0FDUEMsUUFBUUMsSUFBSSxrQ0FBbUNGLElBR25ENUMsVUFBVStDLEdBQ1I3RSxLQUFLRCxTQUFTbUMsZ0JBQWdCQyxNQUM1QnRDLEVBQVl1QyxtQkFDWixZQUFjeUMsSUFLcEIsVUNqSUEsU0FBU0MsRUFBV0MsRUFBSUMsR0FDdEIsSUFBSWpGLEVBQVcsSUNIakIsTUFDRUQsWUFBWWlGLEVBQUlDLEdBQ2RoRixLQUFLaUYsUUFBVSxLQUNmakYsS0FBS2tGLGNBQWdCLEtBQ3JCbEYsS0FBS2tDLGdCQUFrQixLQUN2QmxDLEtBQUttRixNQUFRSCxFQUFPRyxNQUNwQm5GLEtBQUtvQixNQUFRbEIsU0FBU0MsY0FBYzRFLEdBQ3BDL0UsS0FBS29GLGVBQWlCLEtBQ3RCcEYsS0FBS3FGLFNBQVcsS0FDaEJyRixLQUFLc0YsSUFBTSxLQUNYdEYsS0FBS3VGLFlBQWMsR0FDbkJ2RixLQUFLd0YsZUFBaUJ4RixLQUFLb0IsTUFBTXFFLGNBQ2pDekYsS0FBSzBGLGFBQWUsRUFDcEIxRixLQUFLMkYsVUFBVyxFQUNoQjNGLEtBQUtzRSxpQkFBbUIsSUNmNUIsTUFDRXhFLFlBQVlpRixHQUNWL0UsS0FBSzRGLFFBQVUsSUxKbkIsTUFDRTlGLFlBQVlpRixHQUNWL0UsS0FBSzZGLFFBQVUzRixTQUFTQyxjQUFjNEUsR0FDdEMvRSxLQUFLOEYsYUFBZSxLQUNwQjlGLEtBQUsrRixNQUFPLEVBRWRDLGdCQUFnQkYsR0FDZDlGLEtBQUs4RixhQUFlQSxFQUV0QkcsWUFBWTVHLEVBQU02RyxHQUVoQmxHLEtBQUs2RixRQUFRckIsTUFBTVAsTUFBUzVFLEVBQU82RyxFQUFZLElBQU0sSUFJdkRDLFNBQVNDLEdBQ1BwRyxLQUFLOEYsYUFBYTNELE1BQU0sV0FBYSxHQUFFaUUsS0FBVXBHLEtBQUsrRixRQUNsRC9GLEtBQUsrRixLQUNQL0YsS0FBSzZGLFFBQVFKLGNBQWNqQixNQUFNQyxRQUFVLFFBRTNDNEIsWUFBVyxLQUNUckcsS0FBSzZGLFFBQVFKLGNBQWNqQixNQUFNQyxRQUFVLFNBQzFDMkIsS0tsQnNCLHFCQUMzQnBHLEtBQUtzRyxNQUFRLElDSGpCLE1BQ0V4RyxZQUFZaUYsR0FDVi9FLEtBQUs2RixRQUFVM0YsU0FBU0MsY0FBYzRFLEdBQ3RDL0UsS0FBSzZGLFFBQVFVLFlBQWMsZ0JBRTdCQyxPQUFPQyxFQUFhUCxHQUNsQmxHLEtBQUs2RixRQUFRVSxZQUFlLEdBQUVHLEVBQzVCRCxPQUNJQyxFQUFpQlIsT0RMQSxVQUN2QmxHLEtBQUsyRyxhQUFlLEtBQ3BCM0csS0FBSzZGLFFBQVUzRixTQUFTQyxjQUFjNEUsR0FDdEMvRSxLQUFLK0YsTUFBTyxFQUNaL0YsS0FBS3VFLE9BQVNyRSxTQUFTQyxjQUFjLFdBQ3JDSCxLQUFLNEcsU0FBVzFHLFNBQVNDLGNBQWMsaUJBQ3ZDSCxLQUFLNkcsVUFBWTNHLFNBQVNDLGNBQWMsa0JBRTFDNkYsZ0JBQWdCVyxHQUNkM0csS0FBSzJHLGFBQWVBLEVBQ3BCM0csS0FBSzRGLFFBQVFJLGdCQUFnQmhHLEtBQUsyRyxjQUVwQ0csUUFDRTlHLEtBQUs2RyxVQUFVckMsTUFBTUMsUUFBVSxPQUMvQnpFLEtBQUs0RyxTQUFTcEMsTUFBTUMsUUFBVSxRQUM5QjRCLFlBQVcsS0FDVHJHLEtBQUs0RyxTQUFTcEMsTUFBTUMsUUFBVSxTQUM3QixLQUVMc0MsT0FDRS9HLEtBQUs0RyxTQUFTcEMsTUFBTUMsUUFBVSxPQUM5QnpFLEtBQUs2RyxVQUFVckMsTUFBTUMsUUFBVSxRQUMvQjRCLFlBQVcsS0FDVHJHLEtBQUs2RyxVQUFVckMsTUFBTUMsUUFBVSxTQUM5QixLQUVMK0IsT0FBT1EsR0FDTGhILEtBQUs0RixRQUFRSyxZQUFZZSxFQUFNUCxZQUFhTyxFQUFNZCxVQUNsRGxHLEtBQUtzRyxNQUFNRSxPQUFPUSxFQUFNUCxZQUFhTyxFQUFNZCxVQUU3Q2UsYUFBYTVILEdBQ1hXLEtBQUsrRixNQUFPLEVBQ1ovRixLQUFLbUcsU0FBUzlHLEdBQVEsS0FFeEI2SCxlQUNFbEgsS0FBSytGLE1BQU8sRUFDWi9GLEtBQUttRyxTQUFTLElBRWhCQSxTQUFTQyxHQUVIcEcsS0FBSytGLEtBQ1AvRixLQUFLNkYsUUFBUXJCLE1BQU1DLFFBQVUsT0FFN0I0QixZQUFXLEtBQ1RyRyxLQUFLNkYsUUFBUXJCLE1BQU1DLFFBQVUsU0FDNUIyQixLRGpDd0MsYUFDN0NwRyxLQUFLbUgsYUFBZSxLQUNwQm5ILEtBQUtvSCxvQkFBc0IsS0FDM0JwSCxLQUFLcUgsY0FBZSxFQUNwQnJILEtBQUtzSCxZQUFjLElBQUl6SCxFQUFZRyxNQUNuQ0EsS0FBS2dGLE9BQVMsR0FDZGhGLEtBQUt1SCxVQUFZLENBQ2ZDLGFBQWMsZUFDZEMsYUFBYyxnQkFHbEJwRCxRQUNFckUsS0FBS3NFLGlCQUFpQkMsT0FBT0MsTUFBTUMsUUFBVSxPQUM3Q3pFLEtBQUswSCxTQUdQQSxTQUVFMUgsS0FBS2tDLGdCQUFnQkMsTUFBTSxVQUFXbkMsS0FBS29CLE1BQU11RyxhQUFhLFFBQzlEM0gsS0FBS29CLE1BQ0YyRixPQUNBYSxNQUFLLEtBQ0M1SCxLQUFLcUgsYUFJUnJILEtBQUtzRSxpQkFBaUJ5QyxRQUh0Qi9HLEtBQUtzRSxpQkFBaUI0QyxlQUN0QmxILEtBQUtxSCxjQUFlLEdBSXRCckgsS0FBS3NFLGlCQUFpQjJDLGFBQWEsUUFFcENZLE9BQU0sU0FFWEMsVUFDRTlILEtBQUtrRixjQUFjNEIsUUFDbkI5RyxLQUFLc0UsaUJBQWlCd0MsUUFDdEI5RyxLQUFLc0UsaUJBQWlCNEMsZUFFeEJhLGtCQUNFL0gsS0FBS29CLE1BQU1FLGlCQUFpQixhQUFjdEIsS0FBS2dJLGNBQy9DaEksS0FBS29CLE1BQU1FLGlCQUFpQixRQUFTdEIsS0FBS2lJLE1BQU10RyxLQUFLM0IsT0FFdkRpSSxRQUVFLEdBREFqSSxLQUFLa0MsZ0JBQWdCQyxNQUFNLFNBQVVuQyxLQUFLZ0YsT0FBT2tELFFBQzdDbEksS0FBS2dGLE9BQU9rRCxPQUNkbEksS0FBS21JLGtCQUNBLENBQ0wsSUFBSUMsRUFBT2xJLFNBQVNtSSxjQUFjLEtBQ2xDRCxFQUFLN0IsWUFBYyxpQkFDbkJyRyxTQUFTQyxjQUFjLFFBQVFtSSxPQUFPRixJQUcxQ0osZUFDRWhJLEtBQUtzRSxpQkFBaUJrQyxPQUFPeEcsS0FBS3VJLHFCQUVwQ0Esb0JBQ0UsTUFBTyxDQUNMOUIsWUFBYXpHLEtBQUtvQixNQUFNcUYsWUFDeEJQLFNBQVVsRyxLQUFLdUYsWUFBWVcsVUFHL0JpQyxjQVFFLEdBUEFyRCxXQUFXMEQsYUFBZUMsSUFBSUMsY0FDOUIxSSxLQUFLa0MsZ0JBQWdCQyxNQUFNLHNCQUF1QjJDLFdBQVcwRCxjQUM3RHhJLEtBQUtvQixNQUFNc0UsYUFBZSxFQUMxQjFGLEtBQUtrQyxnQkFBZ0JDLE1BQ25CLGFBQ0F3RyxLQUFLQyxVQUFVNUksS0FBS29CLE1BQU8sQ0FBQyxLQUFNLFlBQWEsYUFFN0NwQixLQUFLdUYsWUFBWXNELEtBQUtDLFNBQVMsT0FDakM5SSxLQUFLa0MsZ0JBQWdCQyxNQUFNLGFBQWNuQyxLQUFLdUYsWUFBWXNELE1BQzFEN0ksS0FBS29CLE1BQU0ySCxJQUFNL0ksS0FBS3VGLFlBQVlzRCxLQUNsQzdJLEtBQUtxRSxhQUNBLEdBQUlTLFdBQVcwRCxhQUFjLENBQ2xDeEksS0FBS2tDLGdCQUFnQkMsTUFBTSxzQkFBdUJuQyxLQUFLdUYsWUFBWXNELE1BQ25FLElBQ0U3SSxLQUFLc0YsSUFBTSxJQUFJbUQsSUFDZnpJLEtBQUtrQyxnQkFBZ0JDLE1BQU0sa0JBQW1CbkMsS0FBS3VGLFlBQVlzRCxNQUMzRDdJLEtBQUt5RyxZQUFjLElBQUd6RyxLQUFLb0IsTUFBTXFGLFlBQWN6RyxLQUFLeUcsYUFDeER6RyxLQUFLc0YsSUFBSTZDLFlBQVluSSxLQUFLb0IsT0FDMUJwQixLQUFLa0MsZ0JBQWdCQyxNQUFNLGlCQUFrQm5DLEtBQUt1RixZQUFZc0QsTUFDOUQ3SSxLQUFLc0YsSUFBSTBELEdBQUdQLElBQUlRLE9BQU9DLGdCQUFnQixLQUNyQ2xKLEtBQUtrQyxnQkFBZ0JDLE1BQU0sa0JBQW1CbkMsS0FBS3VGLFlBQVlzRCxNQUMvRDdJLEtBQUtzRixJQUFJNkQsV0FBYSxFQUN0Qm5KLEtBQUtrQyxnQkFBZ0JDLE1BQ25CLDhCQUNBbkMsS0FBS3VGLFlBQVlzRCxNQUVuQjdJLEtBQUtzRixJQUFJOEQsV0FBV3BKLEtBQUt1RixZQUFZc0QsU0FFdkM3SSxLQUFLc0YsSUFBSTBELEdBQUdQLElBQUlRLE9BQU9JLGlCQUFpQixDQUFDM0csRUFBTzRHLEtBQzlDdEosS0FBS3FFLFdBRVByRSxLQUFLc0YsSUFBSTBELEdBQUdQLElBQUlRLE9BQU9NLE9BQU8sQ0FBQzdHLEVBQU80RyxLQUNwQ3RKLEtBQUtrQyxnQkFBZ0JDLE1BQU0sYUFBY21ILEVBQUtFLFlBRWhELE1BQU9DLEdBQ1B6SixLQUFLa0MsZ0JBQWdCQyxNQUFNLFlBQWFzSCxJQStENUN6SixLQUFLa0MsZ0JBQWdCQyxNQUFNLHlCQWM3QnVILFdBQ0UxSixLQUFLa0MsZ0JBQWtCLENBQ3JCQyxNQUFPLFNBQVVHLEVBQU1xSCxHQUNyQmhGLFFBQVFDLElBQUl0QyxFQUFNcUgsSUFFcEJGLE1BQU8sU0FBVW5ILEVBQU1xSCxHQUNyQmhGLFFBQVFDLElBQUl0QyxFQUFNcUgsS0FHdEIzSixLQUFLc0UsaUJBQWlCMEIsZ0JBQWdCaEcsS0FBS2tDLGlCQUMzQ2xDLEtBQUt1RixZQUFZc0QsS0FDZix3RUFDRjdJLEtBQUtzSCxZQUFZdkYsUUFDZiw2REFHRi9CLEtBQUs0SixjQUVMNUosS0FBSytILGtCQUVQcEgsT0FDRVgsS0FBS2lGLFFBQVU0RSxLQUFLQyxVQUFVQyxvQkFBb0JDLGNBRWxEaEssS0FBS2lGLFFBQVFnRixlQUFlSixLQUFLQyxVQUFVSSxZQUFZQyxPQUN2RG5LLEtBQUtrRixjQUFnQmxGLEtBQUtpRixRQUFRbUYsbUJBQ2xDcEssS0FBS2tGLGNBQWNtRixnQkFBZ0JySyxLQUFLb0IsT0FDeENwQixLQUFLa0MsZ0JBQWtCMkgsS0FBSzFILE1BQU1tSSxnQkFBZ0JOLGNBQ2xEaEssS0FBS2tDLGdCQUFnQnFJLFlBQVcsR0FDaEN2SyxLQUFLa0MsZ0JBQWdCQyxNQUFNLFFBQVMsUUFFcENuQyxLQUFLc0UsaUJBQWlCMEIsZ0JBQWdCaEcsS0FBS2tDLGlCQW1CM0NsQyxLQUFLaUYsUUFBUVosUUFDYnJFLEtBQUs0SixjQUNMNUosS0FBS3dLLG1CQUNMeEssS0FBSytILGtCQUVQMEMsT0FBT0MsR0FDTDFLLEtBQUtvQixNQUFNcUYsWUFBY2lFLEVBQVlqRSxZQUNyQ3pHLEtBQUtzRSxpQkFBaUI0QyxlQUN0QmxILEtBQUtzRSxpQkFBaUIyQyxhQUFhLEtBRW5DakgsS0FBS3NFLGlCQUFpQmtDLE9BQU94RyxLQUFLdUkscUJBRXBDb0MsY0FDRTNLLEtBQUtxRixTQUFTdUYsYUFDWmYsS0FBS0MsVUFBVWUsR0FBR0MsYUFBYUMsaUJBQy9CbEIsS0FBS0MsVUFBVWUsR0FBR0csZUFBZUMsWUFFbkNqTCxLQUFLcUYsU0FBU3VGLGFBQ1pmLEtBQUtDLFVBQVVlLEdBQUdDLGFBQWFJLGVBQy9CckIsS0FBS0MsVUFBVWUsR0FBR0csZUFBZUcsVUFFbkNuTCxLQUFLcUYsU0FBU3VGLGFBQ1pmLEtBQUtDLFVBQVVlLEdBQUdDLGFBQWFNLGVBQy9CdkIsS0FBS0MsVUFBVWUsR0FBR0csZUFBZUssaUJBRW5DckwsS0FBS3FGLFNBQVN1RixhQUNaZixLQUFLQyxVQUFVZSxHQUFHQyxhQUFhUSxpQkFDL0J6QixLQUFLQyxVQUFVZSxHQUFHRyxlQUFlTyxZQUlyQ2YsbUJBQ0V4SyxLQUFLa0YsY0FBY3NHLHNCQUNqQjNCLEtBQUtDLFVBQVUyQixTQUFTQyxZQUFZQyxLQUNwQzNMLEtBQUs0TCxjQUFjakssS0FBSzNCLE9BRTFCQSxLQUFLa0YsY0FBY3NHLHNCQUNqQjNCLEtBQUtDLFVBQVUyQixTQUFTQyxZQUFZRyxLQUNwQzdMLEtBQUswSCxPQUFPL0YsS0FBSzNCLE9BRW5CQSxLQUFLa0YsY0FBY3NHLHNCQUNqQjNCLEtBQUtDLFVBQVUyQixTQUFTQyxZQUFZSSxNQUNwQzlMLEtBQUs4SCxRQUFRbkcsS0FBSzNCLE9BRXBCQSxLQUFLa0YsY0FBY3NHLHNCQUNqQjNCLEtBQUtDLFVBQVUyQixTQUFTQyxZQUFZSyxLQUNwQy9MLEtBQUt5SyxPQUFPOUksS0FBSzNCLE9BR3JCNEosY0FDRTVKLEtBQUt3SyxpQkFBbUJ4SyxLQUFLd0ssaUJBQWlCN0ksS0FBSzNCLE1BQ25EQSxLQUFLNEwsY0FBZ0I1TCxLQUFLNEwsY0FBY2pLLEtBQUszQixNQUM3Q0EsS0FBS21JLFlBQWNuSSxLQUFLbUksWUFBWXhHLEtBQUszQixNQUN6Q0EsS0FBS3FFLE1BQVFyRSxLQUFLcUUsTUFBTTFDLEtBQUszQixNQUM3QkEsS0FBSytILGdCQUFrQi9ILEtBQUsrSCxnQkFBZ0JwRyxLQUFLM0IsTUFDakRBLEtBQUtnSSxhQUFlaEksS0FBS2dJLGFBQWFyRyxLQUFLM0IsTUFDM0NBLEtBQUswSCxPQUFTMUgsS0FBSzBILE9BQU8vRixLQUFLM0IsTUFDL0JBLEtBQUs4SCxRQUFVOUgsS0FBSzhILFFBQVFuRyxLQUFLM0IsTUFDakNBLEtBQUt1SSxrQkFBb0J2SSxLQUFLdUksa0JBQWtCNUcsS0FBSzNCLE1BRXZENEwsY0FBY0ksR0FlWmhNLEtBQUtrQyxnQkFBZ0JDLE1BQU0sYUFBYzZKLEVBQWdCQyxNQUFNQyxXQUMvRGxNLEtBQUtrQyxnQkFBZ0JDLE1BQU0sY0FBZXNHLElBQUlDLGVBQzlDMUksS0FBS3VGLFlBQVlzRCxLQUFPbUQsRUFBZ0JDLE1BQU1DLFVBQzlDbE0sS0FBS3VGLFlBQVlXLFNBQVc4RixFQUFnQkMsTUFBTUUsU0FBU2pHLFNBQzNEbEcsS0FBS3lHLFlBQWN1RixFQUFnQnZGLFlBQ25DekcsS0FBSzBGLGFBQWVzRyxFQUFnQnRHLGFBQ3BDMUYsS0FBSzJGLFNBQVdxRyxFQUFnQnJHLFNBRWhDLElBU0UsR0FSQTNGLEtBQUtnRixPQUFPa0QsWUFDd0IsSUFBM0I4RCxFQUFnQjlELFFBQ25COEQsRUFBZ0I5RCxPQUV0QmxJLEtBQUtrQyxnQkFBZ0JrSyxLQUNuQnBNLEtBQUt1SCxVQUFVQyxhQUNmLGdCQUFrQndFLEVBQWdCSyxXQUFXckssU0FHN0NnSyxFQUFnQkssV0FBV3JLLFNBQzNCZ0ssRUFBZ0JLLFdBQVdwSyxRQU0zQixPQUpBakMsS0FBS3NILFlBQVl2RixRQUNmaUssRUFBZ0JLLFdBQVdySyxRQUMzQmdLLEVBQWdCSyxXQUFXcEssU0FFdEIsS0FDRmpDLEtBQUttSSxjQUNaLE1BQU9zQixHQUNQekosS0FBS2tDLGdCQUFnQnVILE1BQ25CekosS0FBS3VILFVBQVVDLGFBQ2ZtQixLQUFLQyxVQUFVYSxJQUVqQnpKLEtBQUtrQyxnQkFBZ0JrSyxLQUNuQnBNLEtBQUt1SCxVQUFVQyxhQUNmLFNBQVdtQixLQUFLQyxVQUFVNUksS0FBS2dGLFNBRWpDaEYsS0FBS21JLGNBR1AsT0FBTyxLQWdEVG1FLFVBQVVDLEdBS1IsT0FKQXJLLGdCQUFnQkMsTUFDZHFLLGlCQUNBLGNBQWdCN0QsS0FBS0MsVUFBVTJELElBRTFCRSxlQUFlLFVBQVU3RSxNQUFNOEUsSUFDcENILEVBQWlCSSxXQUFhLENBQzVCLENBQ0U1SCxHQUFJLFNBQ0o2SCxNQUFPRixFQUFNRSxNQUNiQyxXQUFZSCxFQUFNSSxPQUFPQyxLQUN6QkMsWUFBYSx1QkFDYkMsY0FBZSxJQUluQlYsRUFBaUJXLE9BQVMsQ0FDeEIsQ0FDRW5JLEdBQUksV0FDSm9JLGFBQWMsQ0FBQyxVQUNmQyxTQUFVLE9BS2xCWCxlQUFlMUgsR0FHYixPQUZBN0MsZ0JBQWdCQyxNQUFNcUssaUJBQWtCLGdCQUFrQnpILEdBRW5ELElBQUlzSSxTQUFRLENBQUNDLEVBQVFDLEtBQzFCQyxNQUFNQyxhQUNIN0YsTUFBTThGLEdBQWFBLEVBQVNDLFNBQzVCL0YsTUFBTWdHLElBQ0RBLEVBQ0VBLEVBQUk3SSxHQUNOdUksRUFBT00sRUFBSTdJLElBRVh3SSxFQUFRLEdBQUV4SSw2QkFHWndJLEVBQU8seUNEbGJXeEksRUFBSUMsR0FFaEMsT0FEQWpGLEVBQVNZLE9BQ0ZaLEVBTFQrRSxFQUFXMEQsY0FBZSxFQVExQnFGLE9BQU8vSSxXQUFhQSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdnAtcmVjZWl2ZXIvLi9zcmMvanMvbW9kZWxzL3NlZWtiYXIuanMiLCJ3ZWJwYWNrOi8vdnAtcmVjZWl2ZXIvLi9zcmMvanMvaGVscGVycy9VdGlscy5qcyIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy9tb2RlbHMvdmFzdFNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vdnAtcmVjZWl2ZXIvLi9zcmMvanMvdnBSZWNlaXZlci5qcyIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy9tb2RlbHMvcmVjZWl2ZXIuanMiLCJ3ZWJwYWNrOi8vdnAtcmVjZWl2ZXIvLi9zcmMvanMvbW9kZWxzL3JlY2VpdmVyLWNvbnRyb2xzLmpzIiwid2VicGFjazovL3ZwLXJlY2VpdmVyLy4vc3JjL2pzL21vZGVscy90aW1lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTZWVrQmFyIHtcclxuICBjb25zdHJ1Y3RvcihpZCkge1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpZCk7XHJcbiAgICB0aGlzLmNhc3RkZWJ1Z2dlciA9IG51bGw7XHJcbiAgICB0aGlzLnNob3cgPSBmYWxzZTtcclxuICB9XHJcbiAgc2V0Q2FzdERlYnVnZ2VyKGNhc3RkZWJ1Z2dlcikge1xyXG4gICAgdGhpcy5jYXN0ZGVidWdnZXIgPSBjYXN0ZGVidWdnZXI7XHJcbiAgfVxyXG4gIHNldFByb2dyZXNzKHRpbWUsIGR1cmF0aW9uKSB7XHJcbiAgICAvLyB0aGlzLmNhc3RkZWJ1Z2dlci5kZWJ1ZyhcImVsZVwiLCBKU09OLnN0cmluZ2lmeSh0aGlzLmVsZW1lbnQpKTtcclxuICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9ICh0aW1lIC8gZHVyYXRpb24pICogMTAwICsgXCIlXCI7XHJcbiAgICAvLyB0aGlzLmNhc3RkZWJ1Z2dlci5kZWJ1ZyhcIndpZHRoXCIsIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCk7XHJcbiAgfVxyXG5cclxuICBzaG93SGlkZSh0aW1pbmcpIHtcclxuICAgIHRoaXMuY2FzdGRlYnVnZ2VyLmRlYnVnKFwic2hvd0hpZGVcIiwgYCR7dGltaW5nfSAke3RoaXMuc2hvd31gKTtcclxuICAgIGlmICh0aGlzLnNob3cpIHtcclxuICAgICAgdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgfSwgdGltaW5nKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlZWtCYXI7XHJcbiIsImNvbnN0IGZvcm1hdFRpbWUgPSAodGltZSkgPT4ge1xyXG4gIGlmICghdGltZSkgcmV0dXJuIFwiMDA6MDBcIjtcclxuXHJcbiAgbGV0IGhvdXJzID0gTWF0aC5mbG9vcih0aW1lIC8gMzYwMCk7XHJcbiAgbGV0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKCh0aW1lIC0gaG91cnMgKiAzNjAwKSAvIDYwKTtcclxuICBsZXQgc2Vjb25kcyA9IE1hdGguZmxvb3IodGltZSAlIDYwKTtcclxuXHJcbiAgLy8gZm9ybWF0IHRoZSBtaW51dGVzIGFuZCBzZWNvbmRzIHN0cmluZyB0byBsb29rIGNvbnNpc3RlbnQgYWNyb3NzIGFsbCB2YWx1ZXNcclxuICBpZiAoIWhvdXJzKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBtaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpICtcclxuICAgICAgXCI6XCIgK1xyXG4gICAgICBzZWNvbmRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIGhvdXJzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpICtcclxuICAgIFwiOlwiICtcclxuICAgIG1pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIikgK1xyXG4gICAgXCI6XCIgK1xyXG4gICAgc2Vjb25kcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKVxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgZm9ybWF0VGltZSxcclxufTtcclxuIiwiY2xhc3MgVmFzdFNlcnZpY2Uge1xyXG4gIHN0YXRpYyBERUJVR19WQVNUX1NFUlZJQ0UgPSBcIkRFQlVHX1ZBU1RfU0VSVklDRVwiO1xyXG4gIGNvbnN0cnVjdG9yKHJlY2VpdmVyKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyID0gcmVjZWl2ZXI7XHJcbiAgICB0aGlzLmFkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZENvbnRhaW5lclwiKTtcclxuICAgIHRoaXMuYWRzRGlzcGxheUNvbnRhaW5lciA9IG51bGw7XHJcbiAgICB0aGlzLmFkc0xvYWRlciA9IG51bGw7XHJcbiAgICB0aGlzLmFkc0Rpc3BsYXlJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5jdXJyZW50QWRzID0gbnVsbDtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuYXV0b3BsYXlBbGxvd2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLmF1dG9wbGF5UmVxdWlyZXNNdXRlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgZ29vZ2xlLmltYS5zZXR0aW5ncy5zZXRWcGFpZE1vZGUoXHJcbiAgICAgIGdvb2dsZS5pbWEuSW1hU2RrU2V0dGluZ3MuVnBhaWRNb2RlLkVOQUJMRURcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZHNEaXNwbGF5Q29udGFpbmVyID0gbmV3IGdvb2dsZS5pbWEuQWREaXNwbGF5Q29udGFpbmVyKFxyXG4gICAgICB0aGlzLmFkQ29udGFpbmVyLFxyXG4gICAgICB0aGlzLnJlY2VpdmVyLnZpZGVvXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNMb2FkZXIgPSBuZXcgZ29vZ2xlLmltYS5BZHNMb2FkZXIodGhpcy5hZHNEaXNwbGF5Q29udGFpbmVyKTtcclxuXHJcbiAgICB0aGlzLmFkc0xvYWRlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkc01hbmFnZXJMb2FkZWRFdmVudC5UeXBlLkFEU19NQU5BR0VSX0xPQURFRCxcclxuICAgICAgdGhpcy5vbkFkc01hbmFnZXJMb2FkZWQuYmluZCh0aGlzKSxcclxuICAgICAgZmFsc2VcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZHNMb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgZ29vZ2xlLmltYS5BZEVycm9yRXZlbnQuVHlwZS5BRF9FUlJPUixcclxuICAgICAgdGhpcy5vbkFkRXJyb3IsXHJcbiAgICAgIGZhbHNlXHJcbiAgICApO1xyXG4gIH1cclxuICBsb2FkQWRzKHZhc3RVcmwsIHZhc3RYbWwpIHtcclxuICAgIHRoaXMuY3VycmVudEFkcyA9IHt9O1xyXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XHJcbiAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCJsb2FkIFwiICsgdmFzdFVybFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodmFzdFVybCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRBZHMuY29udGVudCA9IHZhc3RVcmw7XHJcbiAgICAgIHRoaXMuY3VycmVudEFkcy50eXBlID0gXCJ1cmxcIjtcclxuICAgIH0gZWxzZSBpZiAodmFzdFhtbCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRBZHMuY29udGVudCA9IHZhc3RYbWw7XHJcbiAgICAgIHRoaXMuY3VycmVudEFkcy50eXBlID0gXCJ4bWxcIjtcclxuICAgIH1cclxuICAgIHRoaXMuY3VycmVudEFkcy5jdXJyZW50QWRJbmRleCA9IDA7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UpO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEFkcy50eXBlID09PSBcInVybFwiKVxyXG4gICAgICB0aGlzLmxvYWQodGhpcy5jdXJyZW50QWRzLmNvbnRlbnQpLmJpbmQodGhpcyk7XHJcbiAgICBlbHNlIHRoaXMubG9hZChudWxsLCB0aGlzLmN1cnJlbnRBZHMuY29udGVudCkuYmluZCh0aGlzKTtcclxuICB9XHJcbiAgb25Eb3VibGVDbGljayhldmVudCkge31cclxuICBsb2FkKHZhc3RVcmwsIHZhc3RYbWwpIHtcclxuICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkgdGhpcy5pbml0KCk7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIkluaXRpYWxpemVkXCIgKyB0aGlzLnZhc3RVcmxcclxuICAgICk7XHJcblxyXG4gICAgLy8gdGhpcy5za2lwT2Zmc2V0ID0gdGhpcy5wbGF5ZXIudmlkZW9PYmplY3QuYWQuc2tpcFRpbWU7XHJcbiAgICB0aGlzLmFkQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIFwiZGJsY2xpY2tcIixcclxuICAgICAgdGhpcy5vbkRvdWJsZUNsaWNrLmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLmFkc1JlcXVlc3QgPSBuZXcgZ29vZ2xlLmltYS5BZHNSZXF1ZXN0KCk7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIm9rZWogZSBxaXR5IHByYVwiLCBcInBzZVwiICsgdmFzdFVybCk7XHJcblxyXG4gICAgaWYgKHZhc3RVcmwpIHtcclxuICAgICAgdGhpcy5hZHNSZXF1ZXN0LmFkVGFnVXJsID0gdmFzdFVybDtcclxuICAgIH0gZWxzZSBpZiAodmFzdFhtbCkge1xyXG4gICAgICB0aGlzLmFkc1JlcXVlc3QuYWRzUmVzcG9uc2UgPSB2YXN0WG1sO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJva2VqIGUgcWl0eSBwcmFcIiwgXCJBc2RmeHhcIik7XHJcblxyXG4gICAgdGhpcy5hZHNSZXF1ZXN0LmxpbmVhckFkU2xvdFdpZHRoID0gdGhpcy5yZWNlaXZlci52aWRlby5jbGllbnRXaWR0aDtcclxuICAgIHRoaXMuYWRzUmVxdWVzdC5saW5lYXJBZFNsb3RIZWlnaHQgPSB0aGlzLnJlY2VpdmVyLnZpZGVvLmNsaWVudEhlaWdodDtcclxuICAgIHRoaXMuYWRzUmVxdWVzdC5ub25MaW5lYXJBZFNsb3RXaWR0aCA9IHRoaXMucmVjZWl2ZXIudmlkZW8uY2xpZW50V2lkdGg7XHJcbiAgICB0aGlzLmFkc1JlcXVlc3Qubm9uTGluZWFyQWRTbG90SGVpZ2h0ID1cclxuICAgICAgdGhpcy5yZWNlaXZlci52aWRlby5jbGllbnRIZWlnaHQgLyAzO1xyXG5cclxuICAgIHRoaXMuYWRzUmVxdWVzdC5zZXRBZFdpbGxBdXRvUGxheSh0aGlzLmF1dG9wbGF5QWxsb3dlZCk7XHJcbiAgICB0aGlzLmFkc1JlcXVlc3Quc2V0QWRXaWxsUGxheU11dGVkKHRoaXMuYXV0b3BsYXlSZXF1aXJlc011dGVkKTtcclxuICAgIHRoaXMucmVjZWl2ZXIuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwib2tlaiBlIHFpdHkgcHJhXCIsIFwiQXNkZlwiKTtcclxuXHJcbiAgICB0aGlzLmFkc1JlcXVlc3QudmFzdExvYWRUaW1lb3V0ID0gODAwMDtcclxuICAgIHRoaXMuYWRzTG9hZGVyLnJlcXVlc3RBZHModGhpcy5hZHNSZXF1ZXN0KTtcclxuICB9XHJcblxyXG4gIG9uQWRzTWFuYWdlckxvYWRlZChhZHNNYW5hZ2VyTG9hZGVkRXZlbnQpIHtcclxuICAgIGlmICh0aGlzLmFkc01hbmFnZXIpIHtcclxuICAgICAgdGhpcy5hZHNNYW5hZ2VyLmRlc3Ryb3koKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFkc1JlbmRlcmluZ1NldHRpbmdzID0gbmV3IGdvb2dsZS5pbWEuQWRzUmVuZGVyaW5nU2V0dGluZ3MoKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlciA9IGFkc01hbmFnZXJMb2FkZWRFdmVudC5nZXRBZHNNYW5hZ2VyKFxyXG4gICAgICB0aGlzLnJlY2VpdmVyLnZpZGVvLFxyXG4gICAgICBhZHNSZW5kZXJpbmdTZXR0aW5nc1xyXG4gICAgKTtcclxuICAgIHRoaXMucGxheUFkcygpO1xyXG4gIH1cclxuICBwbGF5QWRzKCkge1xyXG4gICAgaWYgKCF0aGlzLmFkc0Rpc3BsYXlJbml0aWFsaXplZCkge1xyXG4gICAgICB0aGlzLmFkc0Rpc3BsYXlDb250YWluZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICB0aGlzLmFkc0Rpc3BsYXlJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBjb25zdCB3aWR0aCA9IHRoaXMucmVjZWl2ZXIudmlkZW8uY2xpZW50V2lkdGg7XHJcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLnJlY2VpdmVyLnZpZGVvLmNsaWVudEhlaWdodDtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuYWRzTWFuYWdlci5pbml0KHdpZHRoLCBoZWlnaHQsIGdvb2dsZS5pbWEuVmlld01vZGUuRlVMTFNDUkVFTik7XHJcbiAgICAgIHRoaXMuYWRzTWFuYWdlci5zdGFydCgpO1xyXG4gICAgICB0aGlzLnJlY2VpdmVyLnJlY2VpdmVyQ29udHJvbHMubG9hZGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH0gY2F0Y2ggKGFkRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJBZHNNYW5hZ2VyIGNvdWxkIG5vdCBiZSBzdGFydGVkXCIsIGFkRXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvbkFkRXJyb3IoZSkge1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCIgYWQgZXJyb3JcIiArIGVcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWYXN0U2VydmljZTtcclxuIiwiaW1wb3J0IFJlY2VpdmVyIGZyb20gXCIuL21vZGVscy9yZWNlaXZlclwiO1xyXG5cclxuLy9hIGJvb2xlYW4gdGVsbGluZyB3aGV0aGVyIEhMUyBpcyBzdXBwb3J0ZWQgaW4gdGhlIGJyb3dzZXJcclxudnBSZWNlaXZlci5ITFNzdXBwb3J0ZWQgPSBmYWxzZTtcclxuXHJcbmZ1bmN0aW9uIHZwUmVjZWl2ZXIoaWQsIGNvbmZpZykge1xyXG4gIGxldCByZWNlaXZlciA9IG5ldyBSZWNlaXZlcihpZCwgY29uZmlnKTtcclxuICByZWNlaXZlci5pbml0KCk7XHJcbiAgcmV0dXJuIHJlY2VpdmVyO1xyXG59XHJcblxyXG53aW5kb3cudnBSZWNlaXZlciA9IHZwUmVjZWl2ZXI7XHJcbiIsImltcG9ydCBobHNjb25maWcgZnJvbSBcIi4uL2NvbmZpZy9obHNDb25maWdcIjtcclxuaW1wb3J0IFJlY2VpdmVyQ29udHJvbHMgZnJvbSBcIi4vcmVjZWl2ZXItY29udHJvbHNcIjtcclxuaW1wb3J0IFZhc3RTZXJ2aWNlIGZyb20gXCIuL3Zhc3RTZXJ2aWNlXCI7XHJcbmNsYXNzIFJlY2VpdmVyIHtcclxuICBjb25zdHJ1Y3RvcihpZCwgY29uZmlnKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyID0gbnVsbDtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyID0gbnVsbDtcclxuICAgIHRoaXMuYXBwSWQgPSBjb25maWcuYXBwSWQ7XHJcbiAgICB0aGlzLnZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpZCk7XHJcbiAgICB0aGlzLnBsYXliYWNrQ29uZmlnID0gbnVsbDtcclxuICAgIHRoaXMuY29udHJvbHMgPSBudWxsO1xyXG4gICAgdGhpcy5obHMgPSBudWxsO1xyXG4gICAgdGhpcy52aWRlb09iamVjdCA9IHt9O1xyXG4gICAgdGhpcy52aWRlb0NvbnRhaW5lciA9IHRoaXMudmlkZW8ucGFyZW50RWxlbWVudDtcclxuICAgIHRoaXMucGxheWJhY2tSYXRlID0gMTtcclxuICAgIHRoaXMuYXV0b3BsYXkgPSBmYWxzZTtcclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scyA9IG5ldyBSZWNlaXZlckNvbnRyb2xzKFwiLmNvbnRyb2xzXCIpO1xyXG4gICAgdGhpcy5tZWRpYU1hbmFnZXIgPSBudWxsO1xyXG4gICAgdGhpcy5jYXN0UmVjZWl2ZXJNYW5hZ2VyID0gbnVsbDtcclxuICAgIHRoaXMudmlkZW9TdGFydGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLnZhc3RTZXJ2aWNlID0gbmV3IFZhc3RTZXJ2aWNlKHRoaXMpO1xyXG4gICAgdGhpcy5jb25maWcgPSB7fTtcclxuICAgIHRoaXMuZGVidWdUYWdzID0ge1xyXG4gICAgICBMT0FEX1JFUVVFU1Q6IFwiTE9BRF9SRVFVRVNUXCIsXHJcbiAgICAgIEFUVEFDSF9NRURJQTogXCJBVFRBQ0hfTUVESUFcIixcclxuICAgIH07XHJcbiAgfVxyXG4gIHN0YXJ0KCkge1xyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLmxvYWRlci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB0aGlzLm9uUGxheSgpO1xyXG4gIH1cclxuXHJcbiAgb25QbGF5KCkge1xyXG4gICAgLy8gcmV0dXJuIHRoaXMucGxheWVyTWFuYWdlci5wbGF5KCk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIm9uIHBsYXlcIiwgdGhpcy52aWRlby5nZXRBdHRyaWJ1dGUoXCJzcmNcIikpO1xyXG4gICAgdGhpcy52aWRlb1xyXG4gICAgICAucGxheSgpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBpZiAoIXRoaXMudmlkZW9TdGFydGVkKSB7XHJcbiAgICAgICAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMuc2hvd0NvbnRyb2xzKCk7XHJcbiAgICAgICAgICB0aGlzLnZpZGVvU3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy5wbGF5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy5oaWRlQ29udHJvbHMoNjAwMCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoKSA9PiB7fSk7XHJcbiAgfVxyXG4gIG9uUGF1c2UoKSB7XHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIucGF1c2UoKTtcclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy5wYXVzZSgpO1xyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnNob3dDb250cm9scygpO1xyXG4gIH1cclxuICBhZGRQbGF5ZXJFdmVudHMoKSB7XHJcbiAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJ0aW1ldXBkYXRlXCIsIHRoaXMub25UaW1lVXBkYXRlKTtcclxuICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcImVuZGVkXCIsIHRoaXMub25FbmQuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG4gIG9uRW5kKCkge1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJvbiBFbmRcIiwgdGhpcy5jb25maWcucmVwbGF5KTtcclxuICAgIGlmICh0aGlzLmNvbmZpZy5yZXBsYXkpIHtcclxuICAgICAgdGhpcy5hdHRhY2hNZWRpYSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcclxuICAgICAgdGV4dC50ZXh0Q29udGVudCA9IFwibm8gbW9yZSB2aWRlb3NcIjtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuYXBwZW5kKHRleHQpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvblRpbWVVcGRhdGUoKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMudXBkYXRlKHRoaXMudXBkYXRlUGxheWVyU3RhdGUoKSk7XHJcbiAgfVxyXG4gIHVwZGF0ZVBsYXllclN0YXRlKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY3VycmVudFRpbWU6IHRoaXMudmlkZW8uY3VycmVudFRpbWUsXHJcbiAgICAgIGR1cmF0aW9uOiB0aGlzLnZpZGVvT2JqZWN0LmR1cmF0aW9uLFxyXG4gICAgfTtcclxuICB9XHJcbiAgYXR0YWNoTWVkaWEoKSB7XHJcbiAgICB2cFJlY2VpdmVyLkhMU3N1cHBvcnRlZCA9IEhscy5pc1N1cHBvcnRlZCgpO1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJpbnNpZGUgYXR0YWNoIG1lZGlhXCIsIHZwUmVjZWl2ZXIuSExTc3VwcG9ydGVkKTtcclxuICAgIHRoaXMudmlkZW8ucGxheWJhY2tSYXRlID0gMTtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBcInZpZGVvIGZpbGVcIixcclxuICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy52aWRlbywgW1wiaWRcIiwgXCJjbGFzc05hbWVcIiwgXCJ0YWdOYW1lXCJdKVxyXG4gICAgKTtcclxuICAgIGlmICh0aGlzLnZpZGVvT2JqZWN0LmZpbGUuZW5kc1dpdGgoXCJtcDRcIikpIHtcclxuICAgICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJpbnNpZGUgbXA0XCIsIHRoaXMudmlkZW9PYmplY3QuZmlsZSk7XHJcbiAgICAgIHRoaXMudmlkZW8uc3JjID0gdGhpcy52aWRlb09iamVjdC5maWxlO1xyXG4gICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICB9IGVsc2UgaWYgKHZwUmVjZWl2ZXIuSExTc3VwcG9ydGVkKSB7XHJcbiAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiaW5zaWRlIGhsc3N1cHBvcnRlZFwiLCB0aGlzLnZpZGVvT2JqZWN0LmZpbGUpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHRoaXMuaGxzID0gbmV3IEhscygpO1xyXG4gICAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiaGxzIGluaXRpYWxpemVkXCIsIHRoaXMudmlkZW9PYmplY3QuZmlsZSk7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRpbWUgPiAwKSB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID0gdGhpcy5jdXJyZW50VGltZTtcclxuICAgICAgICB0aGlzLmhscy5hdHRhY2hNZWRpYSh0aGlzLnZpZGVvKTtcclxuICAgICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcImF0dGFjaGVkIG1lZGlhXCIsIHRoaXMudmlkZW9PYmplY3QuZmlsZSk7XHJcbiAgICAgICAgdGhpcy5obHMub24oSGxzLkV2ZW50cy5NRURJQV9BVFRBQ0hFRCwgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJhbWVkaWEgYXR0YWNoZWRcIiwgdGhpcy52aWRlb09iamVjdC5maWxlKTtcclxuICAgICAgICAgIHRoaXMuaGxzLnN0YXJ0TGV2ZWwgPSAwO1xyXG4gICAgICAgICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgICAgICAgIFwibG9hZGluZyBzb3VyY2UgaGxzc3VwcG9ydGVkXCIsXHJcbiAgICAgICAgICAgIHRoaXMudmlkZW9PYmplY3QuZmlsZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIHRoaXMuaGxzLmxvYWRTb3VyY2UodGhpcy52aWRlb09iamVjdC5maWxlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmhscy5vbihIbHMuRXZlbnRzLk1BTklGRVNUX1BBUlNFRCwgKGV2ZW50LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5obHMub24oSGxzLkV2ZW50cy5FUlJPUiwgKGV2ZW50LCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIkhMUyAgRVJST1JcIiwgZGF0YS5kZXRhaWxzKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcImhscyBlcnJvclwiLCBlcnJvcik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHRoaXMuaGxzLm9uKEhscy5FdmVudHMuRVJST1IsIChldmVudCwgZGF0YSkgPT4ge1xyXG4gICAgICAvLyAgIGlmIChkYXRhLmRldGFpbHMgPT09IFwibWFuaWZlc3RMb2FkRXJyb3JcIikge1xyXG4gICAgICAvLyAgICAgdGhpcy52aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzZXMuZWZmZWN0cy5oaWRlQ29udGVudCk7XHJcbiAgICAgIC8vICAgICB0aGlzLnZpZGVvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3Nlcy5lZmZlY3RzLnNob3dFcnJvcik7XHJcbiAgICAgIC8vICAgfVxyXG5cclxuICAgICAgLy8gICBpZiAoZGF0YS5kZXRhaWxzID09PSBcIm1hbmlmZXN0TG9hZFRpbWVPdXRcIikge1xyXG4gICAgICAvLyAgICAgdGhpcy52aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzZXMuZWZmZWN0cy5oaWRlQ29udGVudCk7XHJcbiAgICAgIC8vICAgICB0aGlzLnZpZGVvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3Nlcy5lZmZlY3RzLnNob3dFcnJvcik7XHJcbiAgICAgIC8vICAgfVxyXG5cclxuICAgICAgLy8gICBpZiAoZGF0YS5kZXRhaWxzID09PSBcIm1hbmlmZXN0UGFyc2luZ0Vycm9yXCIpIHtcclxuICAgICAgLy8gICAgIHRoaXMudmlkZW9Db250YWluZXIuY2xhc3NMaXN0LmFkZChjc3NDbGFzc2VzLmVmZmVjdHMuaGlkZUNvbnRlbnQpO1xyXG4gICAgICAvLyAgICAgdGhpcy52aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzZXMuZWZmZWN0cy5zaG93RXJyb3IpO1xyXG4gICAgICAvLyAgIH1cclxuXHJcbiAgICAgIC8vICAgaWYgKGRhdGEuZGV0YWlscyA9PT0gXCJsZXZlbExvYWRFcnJvclwiKSB7XHJcbiAgICAgIC8vICAgICB0aGlzLnJlbW92ZUxldmVsKGRhdGEuY29udGV4dC5sZXZlbCk7XHJcbiAgICAgIC8vICAgfVxyXG5cclxuICAgICAgLy8gICBpZiAoZGF0YS5kZXRhaWxzID09PSBcImZyYWdMb2FkRXJyb3JcIikge1xyXG4gICAgICAvLyAgICAgdGhpcy5mcmFnRXJyb3JDb3VudCsrO1xyXG4gICAgICAvLyAgICAgLy8gc24gcmVmZXJlcyB0byBzZXF1ZW5jZSBudW1iZXJcclxuICAgICAgLy8gICAgIGlmIChkYXRhLmZyYWcuc24gPT0gMCkgdGhpcy5mYWlsZWRUb0xvYWRGaXJzdEZyYWdtZW50ID0gdHJ1ZTtcclxuICAgICAgLy8gICB9XHJcblxyXG4gICAgICAvLyAgIGlmICh0aGlzLmxldmVsSGFzTWlzc2luZ0ZyYWdtZW50cygpKSB7XHJcbiAgICAgIC8vICAgICB0aGlzLmZyYWdFcnJvckNvdW50ID0gMDtcclxuICAgICAgLy8gICAgIHRoaXMucmVtb3ZlTGV2ZWwoZGF0YS5mcmFnLmxldmVsKTtcclxuICAgICAgLy8gICAgIHRoaXMuaGxzLmxvYWRMZXZlbCA9IC0xO1xyXG4gICAgICAvLyAgICAgY29uc29sZS5sb2coXCJOZXR3b3JrIGVycm9yIGVuY291bnRlcmVkXCIpO1xyXG4gICAgICAvLyAgIH1cclxuXHJcbiAgICAgIC8vICAgaWYgKHRoaXMuZmFpbGVkVG9Mb2FkRmlyc3RGcmFnbWVudCkge1xyXG4gICAgICAvLyAgICAgdGhpcy5mYWlsZWRUb0xvYWRGaXJzdEZyYWdtZW50ID0gZmFsc2U7XHJcbiAgICAgIC8vICAgICB0aGlzLnJlbW92ZUxldmVsKGRhdGEuZnJhZy5sZXZlbCk7XHJcbiAgICAgIC8vICAgICB0aGlzLmhscy5sb2FkTGV2ZWwgPSAtMTtcclxuICAgICAgLy8gICAgIHRoaXMub25QbGF5KCk7XHJcbiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIk5ldHdvcmsgZXJyb3IgZW5jb3VudGVyZWRcIik7XHJcbiAgICAgIC8vICAgfVxyXG5cclxuICAgICAgLy8gICBpZiAoIWRhdGEuZmF0YWwpIHtcclxuICAgICAgLy8gICAgIHJldHVybjtcclxuICAgICAgLy8gICB9XHJcblxyXG4gICAgICAvLyAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XHJcbiAgICAgIC8vICAgICBjYXNlIEhscy5FcnJvclR5cGVzLk5FVFdPUktfRVJST1I6XHJcbiAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKFwiZmF0YWwgbmV0d29yayBlcnJvciBlbmNvdW50ZXJlZFwiKTtcclxuICAgICAgLy8gICAgICAgdGhpcy5obHMuc3RhcnRMb2FkKCk7XHJcbiAgICAgIC8vICAgICAgIGJyZWFrO1xyXG4gICAgICAvLyAgICAgY2FzZSBIbHMuRXJyb3JUeXBlcy5NRURJQV9FUlJPUjpcclxuICAgICAgLy8gICAgICAgY29uc29sZS5sb2coXCJmYXRhbCBtZWRpYSBlcnJvciBlbmNvdW50ZXJlZFwiKTtcclxuICAgICAgLy8gICAgICAgdGhpcy5obHMucmVjb3Zlck1lZGlhRXJyb3IoKTtcclxuICAgICAgLy8gICAgICAgYnJlYWs7XHJcbiAgICAgIC8vICAgICBkZWZhdWx0OlxyXG4gICAgICAvLyAgICAgICB0aGlzLmhscy5kZXN0cm95KCk7XHJcbiAgICAgIC8vICAgICAgIGJyZWFrO1xyXG4gICAgICAvLyAgIH1cclxuICAgICAgLy8gfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcImZpbmlzaGVkIGF0dGFjaCBtZWRpYVwiKTtcclxuICAgIC8vICBlbHNlIGlmICh0aGlzLnZpZGVvLmNhblBsYXlUeXBlKFwiYXBwbGljYXRpb24vdm5kLmFwcGxlLm1wZWd1cmxcIikpIHtcclxuICAgIC8vICAgdGhpcy52aWRlby5zcmMgPSB0aGlzLnZpZGVvT2JqZWN0LmZpbGU7XHJcbiAgICAvLyAgIGlmIChVdGlscy5pc0lPUygpKSB7XHJcbiAgICAvLyAgICAgZnBzX2RybS5pbml0KFxyXG4gICAgLy8gICAgICAgdGhpcy52aWRlbyxcclxuICAgIC8vICAgICAgIGNvbmZpZy5mcHNDZXJ0aWZpY2F0ZVVybCxcclxuICAgIC8vICAgICAgIHRoaXMudmlkZW9PYmplY3QuYXNzZXRJZFxyXG4gICAgLy8gICAgICk7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgdGhpcy52aWRlby5wbGF5c0lubGluZSA9IHRydWU7XHJcbiAgICAvLyAgIHRoaXMuc3RhcnQoKTtcclxuICAgIC8vIH1cclxuICB9XHJcbiAgZmFrZWluaXQoKSB7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlciA9IHtcclxuICAgICAgZGVidWc6IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2codHlwZSwgbWVzc2FnZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGVycm9yOiBmdW5jdGlvbiAodHlwZSwgbWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHR5cGUsIG1lc3NhZ2UpO1xyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy5zZXRDYXN0RGVidWdnZXIodGhpcy5jYXN0RGVidWdMb2dnZXIpO1xyXG4gICAgdGhpcy52aWRlb09iamVjdC5maWxlID1cclxuICAgICAgXCJodHRwczovL3ZwLmdqaXJhZmEubmV0L3Zwcy9wcm9kL29kZ2VodHlvL2VuY29kZS92anNteWxkcy9tcDQvMzYwcC5tcDRcIjtcclxuICAgIHRoaXMudmFzdFNlcnZpY2UubG9hZEFkcyhcclxuICAgICAgXCJodHRwczovL3ZwLWRldi5namlyYWZhLm5ldC92cHMvY29udGVudC92YXN0L3ByZXJvbGwtMi54bWxcIlxyXG4gICAgKTtcclxuICAgIC8vIHRoaXMuYXR0YWNoTWVkaWEoKTtcclxuICAgIHRoaXMuYmluZE1ldGhvZHMoKTtcclxuICAgIC8vIHRoaXMuYmluZEludGVyY2VwdG9ycygpO1xyXG4gICAgdGhpcy5hZGRQbGF5ZXJFdmVudHMoKTtcclxuICB9XHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuY29udGV4dCA9IGNhc3QuZnJhbWV3b3JrLkNhc3RSZWNlaXZlckNvbnRleHQuZ2V0SW5zdGFuY2UoKTtcclxuXHJcbiAgICB0aGlzLmNvbnRleHQuc2V0TG9nZ2VyTGV2ZWwoY2FzdC5mcmFtZXdvcmsuTG9nZ2VyTGV2ZWwuREVCVUcpO1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyID0gdGhpcy5jb250ZXh0LmdldFBsYXllck1hbmFnZXIoKTtcclxuICAgIHRoaXMucGxheWVyTWFuYWdlci5zZXRNZWRpYUVsZW1lbnQodGhpcy52aWRlbyk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlciA9IGNhc3QuZGVidWcuQ2FzdERlYnVnTG9nZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5zZXRFbmFibGVkKHRydWUpO1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJoZWxsb1wiLCBcIm9rZWpcIik7XHJcblxyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnNldENhc3REZWJ1Z2dlcih0aGlzLmNhc3REZWJ1Z0xvZ2dlcik7XHJcbiAgICAvLyB0aGlzLnBsYXliYWNrQ29uZmlnLmF1dG9SZXN1bWVEdXJhdGlvbiA9IDU7XHJcbiAgICAvLyB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5pbmZvKExPR19SRUNFSVZFUl9UQUcsIGBhdXRvaW5pdDogYCk7XHJcbiAgICAvLyB0aGlzLmNvbnRyb2xzLmNsZWFyRGVmYXVsdFNsb3RBc3NpZ25tZW50cygpO1xyXG4gICAgLy8gdGhpcy5kcmF3QnV0dG9ucygpO1xyXG5cclxuICAgIC8vIGNvbnRleHQuc3RhcnQoe1xyXG4gICAgLy8gICBxdWV1ZTogbmV3IENhc3RRdWV1ZSgpLFxyXG4gICAgLy8gICBwbGF5YmFja0NvbmZpZzogdGhpcy5wbGF5YmFja0NvbmZpZyxcclxuICAgIC8vICAgc3VwcG9ydGVkQ29tbWFuZHM6XHJcbiAgICAvLyAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuQ29tbWFuZC5BTExfQkFTSUNfTUVESUEgfFxyXG4gICAgLy8gICAgIGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLkNvbW1hbmQuUVVFVUVfUFJFViB8XHJcbiAgICAvLyAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuQ29tbWFuZC5RVUVVRV9ORVhUIHxcclxuICAgIC8vICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5Db21tYW5kLlNUUkVBTV9UUkFOU0ZFUixcclxuICAgIC8vIH0pO1xyXG4gICAgLy8gdGhpcy5iaW5kSW50ZXJjZXB0b3JzKCk7XHJcbiAgICAvLyB0aGlzLnZpZGVvT2JqZWN0LmZpbGUgPVxyXG4gICAgLy8gICBcImh0dHBzOi8vdnAuZ2ppcmFmYS5uZXQvdnBzL3Byb2Qvb2RnZWh0eW8vZW5jb2RlL3Zqc215bGRzL21wNC8zNjBwLm1wNFwiO1xyXG4gICAgLy8gdGhpcy5hdHRhY2hNZWRpYSgpO1xyXG4gICAgdGhpcy5jb250ZXh0LnN0YXJ0KCk7XHJcbiAgICB0aGlzLmJpbmRNZXRob2RzKCk7XHJcbiAgICB0aGlzLmJpbmRJbnRlcmNlcHRvcnMoKTtcclxuICAgIHRoaXMuYWRkUGxheWVyRXZlbnRzKCk7XHJcbiAgfVxyXG4gIG9uU2VlayhyZXF1ZXN0RGF0YSkge1xyXG4gICAgdGhpcy52aWRlby5jdXJyZW50VGltZSA9IHJlcXVlc3REYXRhLmN1cnJlbnRUaW1lO1xyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnNob3dDb250cm9scygpO1xyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLmhpZGVDb250cm9scyg2MDAwKTtcclxuXHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMudXBkYXRlKHRoaXMudXBkYXRlUGxheWVyU3RhdGUoKSk7XHJcbiAgfVxyXG4gIGRyYXdCdXR0b25zKCkge1xyXG4gICAgdGhpcy5jb250cm9scy5hc3NpZ25CdXR0b24oXHJcbiAgICAgIGNhc3QuZnJhbWV3b3JrLnVpLkNvbnRyb2xzU2xvdC5TTE9UX1NFQ09OREFSWV8xLFxyXG4gICAgICBjYXN0LmZyYW1ld29yay51aS5Db250cm9sc0J1dHRvbi5RVUVVRV9QUkVWXHJcbiAgICApO1xyXG4gICAgdGhpcy5jb250cm9scy5hc3NpZ25CdXR0b24oXHJcbiAgICAgIGNhc3QuZnJhbWV3b3JrLnVpLkNvbnRyb2xzU2xvdC5TTE9UX1BSSU1BUllfMSxcclxuICAgICAgY2FzdC5mcmFtZXdvcmsudWkuQ29udHJvbHNCdXR0b24uQ0FQVElPTlNcclxuICAgICk7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmFzc2lnbkJ1dHRvbihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsudWkuQ29udHJvbHNTbG90LlNMT1RfUFJJTUFSWV8yLFxyXG4gICAgICBjYXN0LmZyYW1ld29yay51aS5Db250cm9sc0J1dHRvbi5TRUVLX0ZPUldBUkRfMTVcclxuICAgICk7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmFzc2lnbkJ1dHRvbihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsudWkuQ29udHJvbHNTbG90LlNMT1RfU0VDT05EQVJZXzIsXHJcbiAgICAgIGNhc3QuZnJhbWV3b3JrLnVpLkNvbnRyb2xzQnV0dG9uLlFVRVVFX05FWFRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBiaW5kSW50ZXJjZXB0b3JzKCkge1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyLnNldE1lc3NhZ2VJbnRlcmNlcHRvcihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuTWVzc2FnZVR5cGUuTE9BRCxcclxuICAgICAgdGhpcy5vbkxvYWRSZXF1ZXN0LmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIuc2V0TWVzc2FnZUludGVyY2VwdG9yKFxyXG4gICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5NZXNzYWdlVHlwZS5QTEFZLFxyXG4gICAgICB0aGlzLm9uUGxheS5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyLnNldE1lc3NhZ2VJbnRlcmNlcHRvcihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuTWVzc2FnZVR5cGUuUEFVU0UsXHJcbiAgICAgIHRoaXMub25QYXVzZS5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyLnNldE1lc3NhZ2VJbnRlcmNlcHRvcihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuTWVzc2FnZVR5cGUuU0VFSyxcclxuICAgICAgdGhpcy5vblNlZWsuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICB9XHJcbiAgYmluZE1ldGhvZHMoKSB7XHJcbiAgICB0aGlzLmJpbmRJbnRlcmNlcHRvcnMgPSB0aGlzLmJpbmRJbnRlcmNlcHRvcnMuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25Mb2FkUmVxdWVzdCA9IHRoaXMub25Mb2FkUmVxdWVzdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5hdHRhY2hNZWRpYSA9IHRoaXMuYXR0YWNoTWVkaWEuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc3RhcnQgPSB0aGlzLnN0YXJ0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmFkZFBsYXllckV2ZW50cyA9IHRoaXMuYWRkUGxheWVyRXZlbnRzLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uVGltZVVwZGF0ZSA9IHRoaXMub25UaW1lVXBkYXRlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uUGxheSA9IHRoaXMub25QbGF5LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uUGF1c2UgPSB0aGlzLm9uUGF1c2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMudXBkYXRlUGxheWVyU3RhdGUgPSB0aGlzLnVwZGF0ZVBsYXllclN0YXRlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG4gIG9uTG9hZFJlcXVlc3QobG9hZFJlcXVlc3REYXRhKSB7XHJcbiAgICAvLyBJZiB0aGUgbG9hZFJlcXVlc3REYXRhIGlzIGluY29tcGxldGUgcmV0dXJuIGFuIGVycm9yIG1lc3NhZ2VcclxuICAgIC8vIGlmICghbG9hZFJlcXVlc3REYXRhIHx8ICFsb2FkUmVxdWVzdERhdGEubWVkaWEpIHtcclxuICAgIC8vICAgY29uc3QgZXJyb3IgPSBuZXcgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuRXJyb3JEYXRhKFxyXG4gICAgLy8gICAgIGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLkVycm9yVHlwZS5MT0FEX0ZBSUxFRFxyXG4gICAgLy8gICApO1xyXG4gICAgLy8gICBlcnJvci5yZWFzb24gPSBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5FcnJvclJlYXNvbi5JTlZBTElEX1JFUVVFU1Q7XHJcbiAgICAvLyAgIHJldHVybiBlcnJvcjtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyAvLyBjaGVjayBhbGwgY29udGVudCBzb3VyY2UgZmllbGRzIGZvciBhc3NldCBVUkwgb3IgSURcclxuICAgIC8vIGxldCBzb3VyY2UgPVxyXG4gICAgLy8gICBsb2FkUmVxdWVzdERhdGEubWVkaWEuY29udGVudFVybCB8fFxyXG4gICAgLy8gICBsb2FkUmVxdWVzdERhdGEubWVkaWEuZW50aXR5IHx8XHJcbiAgICAvLyAgIGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5jb250ZW50SWQ7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIlZQcmVjZWl2ZXJcIiwgbG9hZFJlcXVlc3REYXRhLm1lZGlhLmNvbnRlbnRJZCk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIlZQcmVjZWl2ZXIxXCIsIEhscy5pc1N1cHBvcnRlZCgpKTtcclxuICAgIHRoaXMudmlkZW9PYmplY3QuZmlsZSA9IGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5jb250ZW50SWQ7XHJcbiAgICB0aGlzLnZpZGVvT2JqZWN0LmR1cmF0aW9uID0gbG9hZFJlcXVlc3REYXRhLm1lZGlhLm1ldGFkYXRhLmR1cmF0aW9uO1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IGxvYWRSZXF1ZXN0RGF0YS5jdXJyZW50VGltZTtcclxuICAgIHRoaXMucGxheWJhY2tSYXRlID0gbG9hZFJlcXVlc3REYXRhLnBsYXliYWNrUmF0ZTtcclxuICAgIHRoaXMuYXV0b3BsYXkgPSBsb2FkUmVxdWVzdERhdGEuYXV0b3BsYXk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5jb25maWcucmVwbGF5ID1cclxuICAgICAgICB0eXBlb2YgbG9hZFJlcXVlc3REYXRhLnJlcGxheSAhPT0gXCJ1bmRlZmluZWRcIlxyXG4gICAgICAgICAgPyBsb2FkUmVxdWVzdERhdGEucmVwbGF5XHJcbiAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5pbmZvKFxyXG4gICAgICAgIHRoaXMuZGVidWdUYWdzLkxPQURfUkVRVUVTVCxcclxuICAgICAgICBcIkJlZm9yZSBlcnJvciBcIiArIGxvYWRSZXF1ZXN0RGF0YS5jdXN0b21EYXRhLnZhc3RVcmxcclxuICAgICAgKTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGxvYWRSZXF1ZXN0RGF0YS5jdXN0b21EYXRhLnZhc3RVcmwgfHxcclxuICAgICAgICBsb2FkUmVxdWVzdERhdGEuY3VzdG9tRGF0YS52YXN0WG1sXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMudmFzdFNlcnZpY2UubG9hZEFkcyhcclxuICAgICAgICAgIGxvYWRSZXF1ZXN0RGF0YS5jdXN0b21EYXRhLnZhc3RVcmwsXHJcbiAgICAgICAgICBsb2FkUmVxdWVzdERhdGEuY3VzdG9tRGF0YS52YXN0WG1sXHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfSBlbHNlIHRoaXMuYXR0YWNoTWVkaWEoKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmVycm9yKFxyXG4gICAgICAgIHRoaXMuZGVidWdUYWdzLkxPQURfUkVRVUVTVCxcclxuICAgICAgICBKU09OLnN0cmluZ2lmeShlcnJvcilcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuaW5mbyhcclxuICAgICAgICB0aGlzLmRlYnVnVGFncy5MT0FEX1JFUVVFU1QsXHJcbiAgICAgICAgXCJDb25maWdcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMuY29uZmlnKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmF0dGFjaE1lZGlhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgICAvLyBJZiB0aGVyZSBpcyBubyBzb3VyY2Ugb3IgYSBtYWxmb3JtZWQgSUQgdGhlbiByZXR1cm4gYW4gZXJyb3IuXHJcbiAgICBpZiAoIXNvdXJjZSB8fCBzb3VyY2UgPT0gXCJcIiB8fCAhc291cmNlLm1hdGNoKElEX1JFR0VYKSkge1xyXG4gICAgICBsZXQgZXJyb3IgPSBuZXcgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuRXJyb3JEYXRhKFxyXG4gICAgICAgIGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLkVycm9yVHlwZS5MT0FEX0ZBSUxFRFxyXG4gICAgICApO1xyXG4gICAgICBlcnJvci5yZWFzb24gPSBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5FcnJvclJlYXNvbi5JTlZBTElEX1JFUVVFU1Q7XHJcbiAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc291cmNlSWQgPSBzb3VyY2UubWF0Y2goSURfUkVHRVgpWzFdO1xyXG5cclxuICAgIC8vIEFkZCBicmVha3MgdG8gdGhlIG1lZGlhIGluZm9ybWF0aW9uIGFuZCBzZXQgdGhlIGNvbnRlbnRVcmxcclxuICAgIHJldHVybiBhZGRCcmVha3MobG9hZFJlcXVlc3REYXRhLm1lZGlhKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgLy8gSWYgdGhlIHNvdXJjZSBpcyBhIHVybCB0aGF0IHBvaW50cyB0byBhbiBhc3NldCBkb24ndCBmZXRjaCBmcm9tIGJhY2tlbmRcclxuICAgICAgICBpZiAoc291cmNlSWQuaW5jbHVkZXMoXCIuXCIpKSB7XHJcbiAgICAgICAgICBjYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgICAgICAgIExPR19SRUNFSVZFUl9UQUcsXHJcbiAgICAgICAgICAgIFwiSW50ZXJjZXB0b3IgcmVjZWl2ZWQgZnVsbCBVUkxcIlxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5jb250ZW50VXJsID0gc291cmNlO1xyXG4gICAgICAgICAgcmV0dXJuIGxvYWRSZXF1ZXN0RGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZldGNoIHRoZSBjb250ZW50VXJsIGlmIHByb3ZpZGVkIGFuIElEIG9yIGVudGl0eSBVUkxcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhMT0dfUkVDRUlWRVJfVEFHLCBcIkludGVyY2VwdG9yIHJlY2VpdmVkIElEXCIpO1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hNZWRpYUJ5SWQoc291cmNlSWQpLnRoZW4oKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gbmV3IGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLkdlbmVyaWNNZWRpYU1ldGFkYXRhKCk7XHJcbiAgICAgICAgICAgIG1ldGFkYXRhLnRpdGxlID0gaXRlbS50aXRsZTtcclxuICAgICAgICAgICAgbWV0YWRhdGEuc3VidGl0bGUgPSBpdGVtLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBsb2FkUmVxdWVzdERhdGEubWVkaWEuY29udGVudElkID0gaXRlbS5zdHJlYW0uZGFzaDtcclxuICAgICAgICAgICAgbG9hZFJlcXVlc3REYXRhLm1lZGlhLmNvbnRlbnRUeXBlID0gXCJhcHBsaWNhdGlvbi9kYXNoK3htbFwiO1xyXG4gICAgICAgICAgICBsb2FkUmVxdWVzdERhdGEubWVkaWEubWV0YWRhdGEgPSBtZXRhZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIGxvYWRSZXF1ZXN0RGF0YTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgICAgICBsZXQgZXJyb3IgPSBuZXcgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuRXJyb3JEYXRhKFxyXG4gICAgICAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuRXJyb3JUeXBlLkxPQURfRkFJTEVEXHJcbiAgICAgICAgKTtcclxuICAgICAgICBlcnJvci5yZWFzb24gPSBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5FcnJvclJlYXNvbi5JTlZBTElEX1JFUVVFU1Q7XHJcbiAgICAgICAgY2FzdERlYnVnTG9nZ2VyLmVycm9yKExPR19SRUNFSVZFUl9UQUcsIGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgYWRkQnJlYWtzKG1lZGlhSW5mb3JtYXRpb24pIHtcclxuICAgIGNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgTE9HX1JFQ0VJVkVSX1RBRyxcclxuICAgICAgXCJhZGRCcmVha3M6IFwiICsgSlNPTi5zdHJpbmdpZnkobWVkaWFJbmZvcm1hdGlvbilcclxuICAgICk7XHJcbiAgICByZXR1cm4gZmV0Y2hNZWRpYUJ5SWQoXCJmYmJfYWRcIikudGhlbigoY2xpcDEpID0+IHtcclxuICAgICAgbWVkaWFJbmZvcm1hdGlvbi5icmVha0NsaXBzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiBcImZiYl9hZFwiLFxyXG4gICAgICAgICAgdGl0bGU6IGNsaXAxLnRpdGxlLFxyXG4gICAgICAgICAgY29udGVudFVybDogY2xpcDEuc3RyZWFtLmRhc2gsXHJcbiAgICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi9kYXNoK3htbFwiLFxyXG4gICAgICAgICAgd2hlblNraXBwYWJsZTogNSxcclxuICAgICAgICB9LFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgbWVkaWFJbmZvcm1hdGlvbi5icmVha3MgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6IFwicHJlLXJvbGxcIixcclxuICAgICAgICAgIGJyZWFrQ2xpcElkczogW1wiZmJiX2FkXCJdLFxyXG4gICAgICAgICAgcG9zaXRpb246IDAsXHJcbiAgICAgICAgfSxcclxuICAgICAgXTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBmZXRjaE1lZGlhQnlJZChpZCkge1xyXG4gICAgY2FzdERlYnVnTG9nZ2VyLmRlYnVnKExPR19SRUNFSVZFUl9UQUcsIFwiZmV0Y2hpbmcgaWQ6IFwiICsgaWQpO1xyXG5cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoYWNjZXB0LCByZWplY3QpID0+IHtcclxuICAgICAgZmV0Y2goQ09OVEVOVF9VUkwpXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgLnRoZW4oKG9iaikgPT4ge1xyXG4gICAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICBpZiAob2JqW2lkXSkge1xyXG4gICAgICAgICAgICAgIGFjY2VwdChvYmpbaWRdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZWplY3QoYCR7aWR9IG5vdCBmb3VuZCBpbiByZXBvc2l0b3J5YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlamVjdChcIkNvbnRlbnQgcmVwb3NpdG9yeSBub3QgZm91bmQuXCIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSZWNlaXZlcjtcclxuIiwiaW1wb3J0IFNlZWtCYXIgZnJvbSBcIi4vc2Vla2JhclwiO1xyXG5pbXBvcnQgVGltZXIgZnJvbSBcIi4vdGltZXJcIjtcclxuY2xhc3MgUmVjZWl2ZXJDb250cm9scyB7XHJcbiAgY29uc3RydWN0b3IoaWQpIHtcclxuICAgIHRoaXMuc2Vla2JhciA9IG5ldyBTZWVrQmFyKFwiLnNlZWtiYXItcHJvZ3Jlc3NcIik7XHJcbiAgICB0aGlzLnRpbWVyID0gbmV3IFRpbWVyKFwiLnRpbWVyXCIpO1xyXG4gICAgdGhpcy5jYXN0RGVidWdnZXIgPSBudWxsO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpZCk7XHJcbiAgICB0aGlzLnNob3cgPSB0cnVlO1xyXG4gICAgdGhpcy5sb2FkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvYWRlclwiKTtcclxuICAgIHRoaXMucGxheUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZwLWljb24tcGxheVwiKTtcclxuICAgIHRoaXMucGF1c2VJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52cC1pY29uLXBhdXNlXCIpO1xyXG4gIH1cclxuICBzZXRDYXN0RGVidWdnZXIoY2FzdERlYnVnZ2VyKSB7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z2dlciA9IGNhc3REZWJ1Z2dlcjtcclxuICAgIHRoaXMuc2Vla2Jhci5zZXRDYXN0RGVidWdnZXIodGhpcy5jYXN0RGVidWdnZXIpO1xyXG4gIH1cclxuICBwYXVzZSgpIHtcclxuICAgIHRoaXMucGF1c2VJY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHRoaXMucGxheUljb24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnBsYXlJY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH0sIDIwMDApO1xyXG4gIH1cclxuICBwbGF5KCkge1xyXG4gICAgdGhpcy5wbGF5SWNvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB0aGlzLnBhdXNlSWNvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMucGF1c2VJY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH0sIDIwMDApO1xyXG4gIH1cclxuICB1cGRhdGUoc3RhdGUpIHtcclxuICAgIHRoaXMuc2Vla2Jhci5zZXRQcm9ncmVzcyhzdGF0ZS5jdXJyZW50VGltZSwgc3RhdGUuZHVyYXRpb24pO1xyXG4gICAgdGhpcy50aW1lci51cGRhdGUoc3RhdGUuY3VycmVudFRpbWUsIHN0YXRlLmR1cmF0aW9uKTtcclxuICB9XHJcbiAgaGlkZUNvbnRyb2xzKHRpbWUpIHtcclxuICAgIHRoaXMuc2hvdyA9IGZhbHNlO1xyXG4gICAgdGhpcy5zaG93SGlkZSh0aW1lIHx8IDUwMDApO1xyXG4gIH1cclxuICBzaG93Q29udHJvbHMoKSB7XHJcbiAgICB0aGlzLnNob3cgPSB0cnVlO1xyXG4gICAgdGhpcy5zaG93SGlkZSgxMCk7XHJcbiAgfVxyXG4gIHNob3dIaWRlKHRpbWluZykge1xyXG4gICAgLy8gdGhpcy5jYXN0ZGVidWdnZXIuZGVidWcoXCJzaG93SGlkZVwiLCBgJHt0aW1pbmd9ICR7dGhpcy5zaG93fWApO1xyXG4gICAgaWYgKHRoaXMuc2hvdykge1xyXG4gICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgfSwgdGltaW5nKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlY2VpdmVyQ29udHJvbHM7XHJcbiIsImltcG9ydCBVdGlscyBmcm9tIFwiLi4vaGVscGVycy9VdGlsc1wiO1xyXG5cclxuY2xhc3MgVGltZXIge1xyXG4gIGNvbnN0cnVjdG9yKGlkKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlkKTtcclxuICAgIHRoaXMuZWxlbWVudC50ZXh0Q29udGVudCA9IFwiMDA6MDAgLyAwMDowMFwiO1xyXG4gIH1cclxuICB1cGRhdGUoY3VycmVudFRpbWUsIGR1cmF0aW9uKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHtVdGlscy5mb3JtYXRUaW1lKFxyXG4gICAgICBjdXJyZW50VGltZVxyXG4gICAgKX0gLyR7VXRpbHMuZm9ybWF0VGltZShkdXJhdGlvbil9YDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRpbWVyO1xyXG4iXSwibmFtZXMiOlsidGltZSIsImhvdXJzIiwiTWF0aCIsImZsb29yIiwibWludXRlcyIsInNlY29uZHMiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiVmFzdFNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsInJlY2VpdmVyIiwidGhpcyIsImFkQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRzRGlzcGxheUNvbnRhaW5lciIsImFkc0xvYWRlciIsImFkc0Rpc3BsYXlJbml0aWFsaXplZCIsImN1cnJlbnRBZHMiLCJpbml0aWFsaXplZCIsImF1dG9wbGF5QWxsb3dlZCIsImF1dG9wbGF5UmVxdWlyZXNNdXRlZCIsImluaXQiLCJnb29nbGUiLCJpbWEiLCJzZXR0aW5ncyIsInNldFZwYWlkTW9kZSIsIkltYVNka1NldHRpbmdzIiwiVnBhaWRNb2RlIiwiRU5BQkxFRCIsIkFkRGlzcGxheUNvbnRhaW5lciIsInZpZGVvIiwiQWRzTG9hZGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkFkc01hbmFnZXJMb2FkZWRFdmVudCIsIlR5cGUiLCJBRFNfTUFOQUdFUl9MT0FERUQiLCJvbkFkc01hbmFnZXJMb2FkZWQiLCJiaW5kIiwiQWRFcnJvckV2ZW50IiwiQURfRVJST1IiLCJvbkFkRXJyb3IiLCJsb2FkQWRzIiwidmFzdFVybCIsInZhc3RYbWwiLCJjYXN0RGVidWdMb2dnZXIiLCJkZWJ1ZyIsIkRFQlVHX1ZBU1RfU0VSVklDRSIsImNvbnRlbnQiLCJ0eXBlIiwiY3VycmVudEFkSW5kZXgiLCJsb2FkIiwib25Eb3VibGVDbGljayIsImV2ZW50IiwiYWRzUmVxdWVzdCIsIkFkc1JlcXVlc3QiLCJhZFRhZ1VybCIsImFkc1Jlc3BvbnNlIiwibGluZWFyQWRTbG90V2lkdGgiLCJjbGllbnRXaWR0aCIsImxpbmVhckFkU2xvdEhlaWdodCIsImNsaWVudEhlaWdodCIsIm5vbkxpbmVhckFkU2xvdFdpZHRoIiwibm9uTGluZWFyQWRTbG90SGVpZ2h0Iiwic2V0QWRXaWxsQXV0b1BsYXkiLCJzZXRBZFdpbGxQbGF5TXV0ZWQiLCJ2YXN0TG9hZFRpbWVvdXQiLCJyZXF1ZXN0QWRzIiwiYWRzTWFuYWdlckxvYWRlZEV2ZW50IiwiYWRzTWFuYWdlciIsImRlc3Ryb3kiLCJhZHNSZW5kZXJpbmdTZXR0aW5ncyIsIkFkc1JlbmRlcmluZ1NldHRpbmdzIiwiZ2V0QWRzTWFuYWdlciIsInBsYXlBZHMiLCJpbml0aWFsaXplIiwid2lkdGgiLCJoZWlnaHQiLCJWaWV3TW9kZSIsIkZVTExTQ1JFRU4iLCJzdGFydCIsInJlY2VpdmVyQ29udHJvbHMiLCJsb2FkZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJhZEVycm9yIiwiY29uc29sZSIsImxvZyIsImUiLCJ2cFJlY2VpdmVyIiwiaWQiLCJjb25maWciLCJjb250ZXh0IiwicGxheWVyTWFuYWdlciIsImFwcElkIiwicGxheWJhY2tDb25maWciLCJjb250cm9scyIsImhscyIsInZpZGVvT2JqZWN0IiwidmlkZW9Db250YWluZXIiLCJwYXJlbnRFbGVtZW50IiwicGxheWJhY2tSYXRlIiwiYXV0b3BsYXkiLCJzZWVrYmFyIiwiZWxlbWVudCIsImNhc3RkZWJ1Z2dlciIsInNob3ciLCJzZXRDYXN0RGVidWdnZXIiLCJzZXRQcm9ncmVzcyIsImR1cmF0aW9uIiwic2hvd0hpZGUiLCJ0aW1pbmciLCJzZXRUaW1lb3V0IiwidGltZXIiLCJ0ZXh0Q29udGVudCIsInVwZGF0ZSIsImN1cnJlbnRUaW1lIiwiVXRpbHMiLCJjYXN0RGVidWdnZXIiLCJwbGF5SWNvbiIsInBhdXNlSWNvbiIsInBhdXNlIiwicGxheSIsInN0YXRlIiwiaGlkZUNvbnRyb2xzIiwic2hvd0NvbnRyb2xzIiwibWVkaWFNYW5hZ2VyIiwiY2FzdFJlY2VpdmVyTWFuYWdlciIsInZpZGVvU3RhcnRlZCIsInZhc3RTZXJ2aWNlIiwiZGVidWdUYWdzIiwiTE9BRF9SRVFVRVNUIiwiQVRUQUNIX01FRElBIiwib25QbGF5IiwiZ2V0QXR0cmlidXRlIiwidGhlbiIsImNhdGNoIiwib25QYXVzZSIsImFkZFBsYXllckV2ZW50cyIsIm9uVGltZVVwZGF0ZSIsIm9uRW5kIiwicmVwbGF5IiwiYXR0YWNoTWVkaWEiLCJ0ZXh0IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZCIsInVwZGF0ZVBsYXllclN0YXRlIiwiSExTc3VwcG9ydGVkIiwiSGxzIiwiaXNTdXBwb3J0ZWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlsZSIsImVuZHNXaXRoIiwic3JjIiwib24iLCJFdmVudHMiLCJNRURJQV9BVFRBQ0hFRCIsInN0YXJ0TGV2ZWwiLCJsb2FkU291cmNlIiwiTUFOSUZFU1RfUEFSU0VEIiwiZGF0YSIsIkVSUk9SIiwiZGV0YWlscyIsImVycm9yIiwiZmFrZWluaXQiLCJtZXNzYWdlIiwiYmluZE1ldGhvZHMiLCJjYXN0IiwiZnJhbWV3b3JrIiwiQ2FzdFJlY2VpdmVyQ29udGV4dCIsImdldEluc3RhbmNlIiwic2V0TG9nZ2VyTGV2ZWwiLCJMb2dnZXJMZXZlbCIsIkRFQlVHIiwiZ2V0UGxheWVyTWFuYWdlciIsInNldE1lZGlhRWxlbWVudCIsIkNhc3REZWJ1Z0xvZ2dlciIsInNldEVuYWJsZWQiLCJiaW5kSW50ZXJjZXB0b3JzIiwib25TZWVrIiwicmVxdWVzdERhdGEiLCJkcmF3QnV0dG9ucyIsImFzc2lnbkJ1dHRvbiIsInVpIiwiQ29udHJvbHNTbG90IiwiU0xPVF9TRUNPTkRBUllfMSIsIkNvbnRyb2xzQnV0dG9uIiwiUVVFVUVfUFJFViIsIlNMT1RfUFJJTUFSWV8xIiwiQ0FQVElPTlMiLCJTTE9UX1BSSU1BUllfMiIsIlNFRUtfRk9SV0FSRF8xNSIsIlNMT1RfU0VDT05EQVJZXzIiLCJRVUVVRV9ORVhUIiwic2V0TWVzc2FnZUludGVyY2VwdG9yIiwibWVzc2FnZXMiLCJNZXNzYWdlVHlwZSIsIkxPQUQiLCJvbkxvYWRSZXF1ZXN0IiwiUExBWSIsIlBBVVNFIiwiU0VFSyIsImxvYWRSZXF1ZXN0RGF0YSIsIm1lZGlhIiwiY29udGVudElkIiwibWV0YWRhdGEiLCJpbmZvIiwiY3VzdG9tRGF0YSIsImFkZEJyZWFrcyIsIm1lZGlhSW5mb3JtYXRpb24iLCJMT0dfUkVDRUlWRVJfVEFHIiwiZmV0Y2hNZWRpYUJ5SWQiLCJjbGlwMSIsImJyZWFrQ2xpcHMiLCJ0aXRsZSIsImNvbnRlbnRVcmwiLCJzdHJlYW0iLCJkYXNoIiwiY29udGVudFR5cGUiLCJ3aGVuU2tpcHBhYmxlIiwiYnJlYWtzIiwiYnJlYWtDbGlwSWRzIiwicG9zaXRpb24iLCJQcm9taXNlIiwiYWNjZXB0IiwicmVqZWN0IiwiZmV0Y2giLCJDT05URU5UX1VSTCIsInJlc3BvbnNlIiwianNvbiIsIm9iaiIsIndpbmRvdyJdLCJzb3VyY2VSb290IjoiIn0=