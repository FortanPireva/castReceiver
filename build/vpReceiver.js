(()=>{"use strict";const e=e=>{if(!e)return"00:00";let t=Math.floor(e/3600),s=Math.floor((e-3600*t)/60),i=Math.floor(e%60);return t?t.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0"):s.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")};class t{static DEBUG_VAST_SERVICE="DEBUG_VAST_SERVICE";constructor(e){this.receiver=e,this.adContainer=document.querySelector(".adContainer"),this.adsDisplayContainer=null,this.adsLoader=null,this.adsDisplayInitialized=!1,this.currentAds=null,this.initialized=!1,this.autoplayAllowed=!1,this.autoplayRequiresMuted=!1,this.hasErrors=!1}init(){this.initialized=!0,google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adsDisplayContainer=new google.ima.AdDisplayContainer(this.adContainer,this.receiver.video),this.adsLoader=new google.ima.AdsLoader(this.adsDisplayContainer),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1)}onAllAdsCompleted(e){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"ad completed")}onAdCompleted(e){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"ad completed"),this.adsManager.destroy(),this.hasErrors||this.receiver.onEnd()}onContentPauseRequested(e){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"Content Pause Request")}onContentResumeRequested(){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"Content Resume Request")}onAdLoaded(e){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"Ad loaded")}loadAds(e,s){this.currentAds={},this.initialized||this.init(),this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"load "+e),e?(this.currentAds.content=e,this.currentAds.type="url"):s&&(this.currentAds.content=s,this.currentAds.type="xml"),this.currentAds.currentAdIndex=0,this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE),"url"===this.currentAds.type?this.load(this.currentAds.content).bind(this):this.load(null,this.currentAds.content).bind(this)}load(e,s){if(this.initialized||this.init(),this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"Initialized"+this.vastUrl),this.adsRequest=new google.ima.AdsRequest,this.receiver.castDebugLogger.debug("okej e qity pra","pse"+e),e)this.adsRequest.adTagUrl=e;else{if(!s)return;this.adsRequest.adsResponse=s}this.receiver.castDebugLogger.debug("okej e qity pra","Asdfxx"),this.adsRequest.linearAdSlotWidth=this.receiver.video.clientWidth,this.adsRequest.linearAdSlotHeight=this.receiver.video.clientHeight,this.adsRequest.nonLinearAdSlotWidth=this.receiver.video.clientWidth,this.adsRequest.nonLinearAdSlotHeight=this.receiver.video.clientHeight/3,this.adsRequest.setAdWillAutoPlay(this.autoplayAllowed),this.adsRequest.setAdWillPlayMuted(this.autoplayRequiresMuted),this.receiver.castDebugLogger.debug("okej e qity pra","Asdf"),this.adsRequest.vastLoadTimeout=8e3,this.adsLoader.requestAds(this.adsRequest)}onTimeUpdate(){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE," ON TIME UPDATE")}onAdSkip(e){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"ON AD Ski")}onAdStarted(e){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"ON AD STARTED")}onAdsManagerLoaded(e){this.adsManager&&this.adsManager.destroy();const t=new google.ima.AdsRenderingSettings;this.adsManager=e.getAdsManager(this.receiver.video,t),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdSkip.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,this.onTimeUpdate.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BUFFERING,(()=>{this.loading=!0})),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,(e=>{this.paused=!1,this.player.videoControls.playPauseButton.update({paused:this.paused}),showOverlayHover(this.player,cssClasses.icons.playPauseButton.play),this.adsManager.getCurrentAd().playbackStarted?Utils.fire(this.adContainer,Events.adEvents.AD_PLAY,{currentTime:this.player.video.currentTime,resume:!0,afterPause:!0,adPlayId:this.adsManager.getCurrentAd()?.getAdId()}):Utils.fire(this.adContainer,Events.adEvents.AD_PLAY,{currentTime:this.player.video.currentTime,begin:!0,adPlayId:this.adsManager.getCurrentAd()?.getAdId()})})),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(()=>{Utils.fire(this.adContainer,Events.adEvents.AD_SKIPPABLE,{currentTime:this.player.video.currentTime,adPlayId:this.adsManager.getCurrentAd()?.getAdId()})})),this.playAds()}playAds(){this.adsDisplayInitialized||(this.adsDisplayContainer.initialize(),this.adsDisplayInitialized=!0);const e=this.receiver.video.clientWidth,t=this.receiver.video.clientHeight;try{this.receiver.isAdPlaying=!0,this.adsManager.init(e,t,google.ima.ViewMode.FULLSCREEN),this.adsManager.start(),this.receiver.receiverControls.loader.style.display="none"}catch(e){console.log("AdsManager could not be started",e)}}onAdError(e){this.receiver.castDebugLogger.debug(t.DEBUG_VAST_SERVICE," ad error"+e),this.hasErrors=!0,this.receiver.onEnd()}resume(){this.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"RESUMING AD Event"),this.adsManager&&this.adsManager.resume()}pause(){this.castDebugLogger.debug(t.DEBUG_VAST_SERVICE,"PAUSE AD Event"),this.adsManager&&this.adsManager.pause()}}const s=t;function i(t,i){let a=new class{constructor(t,i){this.context=null,this.playerManager=null,this.castDebugLogger=null,this.appId=i.appId,this.video=document.querySelector(t),this.playbackConfig=null,this.controls=null,this.hls=null,this.videoObject={},this.videoContainer=this.video.parentElement,this.playbackRate=1,this.autoplay=!1,this.receiverControls=new class{constructor(t){this.seekbar=new class{constructor(e){this.element=document.querySelector(e),this.castdebugger=null,this.show=!1}setCastDebugger(e){this.castdebugger=e}setProgress(e,t){this.element.style.width=e/t*100+"%"}showHide(e){this.castdebugger.debug("showHide",`${e} ${this.show}`),this.show?this.element.parentElement.style.display="block":setTimeout((()=>{this.element.parentElement.style.display="none"}),e)}}(".seekbar-progress"),this.timer=new class{constructor(e){this.element=document.querySelector(e),this.element.textContent="00:00 / 00:00"}update(t,s){this.element.textContent=`${e(t)} /${e(s)}`}}(".timer"),this.castDebugger=null,this.element=document.querySelector(t),this.show=!0,this.loader=document.querySelector(".loader"),this.playIcon=document.querySelector(".vp-icon-play"),this.pauseIcon=document.querySelector(".vp-icon-pause")}setCastDebugger(e){this.castDebugger=e,this.seekbar.setCastDebugger(this.castDebugger)}pause(){this.pauseIcon.style.display="none",this.playIcon.style.display="block",setTimeout((()=>{this.playIcon.style.display="none"}),2e3)}play(){this.playIcon.style.display="none",this.pauseIcon.style.display="block",setTimeout((()=>{this.pauseIcon.style.display="none"}),2e3)}update(e){this.seekbar.setProgress(e.currentTime,e.duration),this.timer.update(e.currentTime,e.duration)}hideControls(e){this.show=!1,this.showHide(e||5e3)}showControls(){this.show=!0,this.showHide(10)}showHide(e){this.show?this.element.style.display="flex":setTimeout((()=>{this.element.style.display="none"}),e)}}(".controls"),this.mediaManager=null,this.castReceiverManager=null,this.videoStarted=!1,this.vastService=new s(this),this.config={},this.debugTags={LOAD_REQUEST:"LOAD_REQUEST",ATTACH_MEDIA:"ATTACH_MEDIA",ONPLAY:"ON_PLAY",START:"START"},this.isAdPlaying=!1}start(){this.receiverControls.loader.style.display="none",this.castDebugLogger.debug(this.debugTags.START,"Starting video..."),this.onPlay()}onPlay(){this.castDebugLogger.debug("on play",this.video.getAttribute("src")),this.castDebugLogger.debug("isadplaying",this.isAdPlaying),this.isAdPlaying?this.vastService.resume():this.video.play().then((()=>{this.videoStarted?this.receiverControls.play():(this.receiverControls.showControls(),this.videoStarted=!0),this.receiverControls.hideControls(6e3)})).catch((e=>{this.castDebugLogger.debug(this.debugTags.ONPLAY," Couldn't play video.Tring one more time "+e)}))}onPause(){this.isAdPlaying?this.vastService.pause():this.video.pause(),this.receiverControls.pause(),this.receiverControls.showControls()}addPlayerEvents(){this.video.addEventListener("timeupdate",this.onTimeUpdate),this.video.addEventListener("ended",this.onEnd.bind(this))}onEnd(){this.castDebugLogger.debug("on End",this.config.replay),this.isAdPlaying&&(this.isAdPlaying=!1),this.attachMedia()}onTimeUpdate(){this.receiverControls.update(this.updatePlayerState())}updatePlayerState(){return{currentTime:this.video.currentTime,duration:this.videoObject.duration}}attachMedia(){if(vpReceiver.HLSsupported=Hls.isSupported(),this.castDebugLogger.debug("inside attach media",vpReceiver.HLSsupported),this.video.playbackRate=1,this.castDebugLogger.debug("video file",JSON.stringify(this.video,["id","className","tagName"])),this.videoObject.file.endsWith("mp4"))this.castDebugLogger.debug("inside mp4",this.videoObject.file),this.video.src=this.videoObject.file,this.start();else if(vpReceiver.HLSsupported){this.castDebugLogger.debug("inside hlssupported",this.videoObject.file);try{this.hls=new Hls,this.castDebugLogger.debug("hls initialized",this.videoObject.file),this.currentTime>0&&(this.video.currentTime=this.currentTime),this.hls.attachMedia(this.video),this.castDebugLogger.debug("attached media",this.videoObject.file),this.hls.on(Hls.Events.MEDIA_ATTACHED,(()=>{this.castDebugLogger.debug("amedia attached",this.videoObject.file),this.hls.startLevel=0,this.castDebugLogger.debug("loading source hlssupported",this.videoObject.file),this.hls.loadSource(this.videoObject.file)})),this.hls.on(Hls.Events.MANIFEST_PARSED,((e,t)=>{this.start()})),this.hls.on(Hls.Events.ERROR,((e,t)=>{this.castDebugLogger.debug("HLS  ERROR",t.details)}))}catch(e){}}this.castDebugLogger.debug("finished attach media")}fakeinit(){this.castDebugLogger={debug:function(e,t){console.log(e,t)},error:function(e,t){console.log(e,t)}},this.receiverControls.setCastDebugger(this.castDebugLogger),this.videoObject.file="https://vp.gjirafa.net/vps/prod/odgehtyo/encode/vjsmylds/mp4/360p.mp4",this.vastService.loadAds("https://vp-dev.gjirafa.net/vps/content/vast/preroll-2.xml"),this.bindMethods(),this.addPlayerEvents()}init(){this.context=cast.framework.CastReceiverContext.getInstance(),this.context.setLoggerLevel(cast.framework.LoggerLevel.DEBUG),this.playerManager=this.context.getPlayerManager(),this.playerManager.setMediaElement(this.video),this.castDebugLogger=cast.debug.CastDebugLogger.getInstance(),this.castDebugLogger.setEnabled(!0),this.castDebugLogger.debug("hello","okej"),this.receiverControls.setCastDebugger(this.castDebugLogger),this.context.start(),this.bindMethods(),this.bindInterceptors(),this.addPlayerEvents()}onSeek(e){this.video.currentTime=e.currentTime,this.receiverControls.showControls(),this.receiverControls.hideControls(6e3),this.receiverControls.update(this.updatePlayerState())}drawButtons(){this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_SECONDARY_1,cast.framework.ui.ControlsButton.QUEUE_PREV),this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_PRIMARY_1,cast.framework.ui.ControlsButton.CAPTIONS),this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_PRIMARY_2,cast.framework.ui.ControlsButton.SEEK_FORWARD_15),this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_SECONDARY_2,cast.framework.ui.ControlsButton.QUEUE_NEXT)}bindInterceptors(){this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,this.onLoadRequest.bind(this)),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.PLAY,this.onPlay.bind(this)),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.PAUSE,this.onPause.bind(this)),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.SEEK,this.onSeek.bind(this))}bindMethods(){this.bindInterceptors=this.bindInterceptors.bind(this),this.onLoadRequest=this.onLoadRequest.bind(this),this.attachMedia=this.attachMedia.bind(this),this.start=this.start.bind(this),this.addPlayerEvents=this.addPlayerEvents.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.updatePlayerState=this.updatePlayerState.bind(this),this.onEnd=this.onEnd.bind(this)}onLoadRequest(e){return this.castDebugLogger.debug("VPreceiver",e.media.contentId),this.castDebugLogger.debug("VPreceiver1",Hls.isSupported()),this.videoObject.file=e.media.contentId,this.videoObject.duration=e.media.metadata.duration,this.currentTime=e.currentTime,this.playbackRate=e.playbackRate,this.autoplay=e.autoplay,this.config.replay=void 0===e.replay||e.replay,e.customData.vastUrl||e.customData.vastXml?(this.vastService.loadAds(e.customData.vastUrl,e.customData.vastXml),this.castDebugLogger.debug(this.debugTags.LOAD_REQUEST,"Loading ad finished"),null):(this.attachMedia(),null)}addBreaks(e){return castDebugLogger.debug(LOG_RECEIVER_TAG,"addBreaks: "+JSON.stringify(e)),fetchMediaById("fbb_ad").then((t=>{e.breakClips=[{id:"fbb_ad",title:t.title,contentUrl:t.stream.dash,contentType:"application/dash+xml",whenSkippable:5}],e.breaks=[{id:"pre-roll",breakClipIds:["fbb_ad"],position:0}]}))}fetchMediaById(e){return castDebugLogger.debug(LOG_RECEIVER_TAG,"fetching id: "+e),new Promise(((t,s)=>{fetch(CONTENT_URL).then((e=>e.json())).then((i=>{i?i[e]?t(i[e]):s(`${e} not found in repository`):s("Content repository not found.")}))}))}}(t,i);return a.init(),a}i.HLSsupported=!1,window.vpReceiver=i})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1DLGFBQ0h0RixNQUFNdUYsR0FBYUEsRUFBU0MsU0FDNUJ4RixNQUFNeUYsSUFDREEsRUFDRUEsRUFBSW5JLEdBQ042SCxFQUFPTSxFQUFJbkksSUFFWDhILEVBQVEsR0FBRTlILDZCQUdaOEgsRUFBTyx5Q0R6Ylc5SCxFQUFJQyxHQUVoQyxPQURBaEksRUFBU2EsT0FDRmIsRUFMVDhILEVBQVdrRCxjQUFlLEVBUTFCbUYsT0FBT3JJLFdBQWFBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy9tb2RlbHMvc2Vla2Jhci5qcyIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy9oZWxwZXJzL1V0aWxzLmpzIiwid2VicGFjazovL3ZwLXJlY2VpdmVyLy4vc3JjL2pzL21vZGVscy92YXN0U2VydmljZS5qcyIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy92cFJlY2VpdmVyLmpzIiwid2VicGFjazovL3ZwLXJlY2VpdmVyLy4vc3JjL2pzL21vZGVscy9yZWNlaXZlci5qcyIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy9tb2RlbHMvcmVjZWl2ZXItY29udHJvbHMuanMiLCJ3ZWJwYWNrOi8vdnAtcmVjZWl2ZXIvLi9zcmMvanMvbW9kZWxzL3RpbWVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFNlZWtCYXIge1xyXG4gIGNvbnN0cnVjdG9yKGlkKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlkKTtcclxuICAgIHRoaXMuY2FzdGRlYnVnZ2VyID0gbnVsbDtcclxuICAgIHRoaXMuc2hvdyA9IGZhbHNlO1xyXG4gIH1cclxuICBzZXRDYXN0RGVidWdnZXIoY2FzdGRlYnVnZ2VyKSB7XHJcbiAgICB0aGlzLmNhc3RkZWJ1Z2dlciA9IGNhc3RkZWJ1Z2dlcjtcclxuICB9XHJcbiAgc2V0UHJvZ3Jlc3ModGltZSwgZHVyYXRpb24pIHtcclxuICAgIC8vIHRoaXMuY2FzdGRlYnVnZ2VyLmRlYnVnKFwiZWxlXCIsIEpTT04uc3RyaW5naWZ5KHRoaXMuZWxlbWVudCkpO1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gKHRpbWUgLyBkdXJhdGlvbikgKiAxMDAgKyBcIiVcIjtcclxuICAgIC8vIHRoaXMuY2FzdGRlYnVnZ2VyLmRlYnVnKFwid2lkdGhcIiwgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoKTtcclxuICB9XHJcblxyXG4gIHNob3dIaWRlKHRpbWluZykge1xyXG4gICAgdGhpcy5jYXN0ZGVidWdnZXIuZGVidWcoXCJzaG93SGlkZVwiLCBgJHt0aW1pbmd9ICR7dGhpcy5zaG93fWApO1xyXG4gICAgaWYgKHRoaXMuc2hvdykge1xyXG4gICAgICB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICB9LCB0aW1pbmcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2Vla0JhcjtcclxuIiwiY29uc3QgZm9ybWF0VGltZSA9ICh0aW1lKSA9PiB7XHJcbiAgaWYgKCF0aW1lKSByZXR1cm4gXCIwMDowMFwiO1xyXG5cclxuICBsZXQgaG91cnMgPSBNYXRoLmZsb29yKHRpbWUgLyAzNjAwKTtcclxuICBsZXQgbWludXRlcyA9IE1hdGguZmxvb3IoKHRpbWUgLSBob3VycyAqIDM2MDApIC8gNjApO1xyXG4gIGxldCBzZWNvbmRzID0gTWF0aC5mbG9vcih0aW1lICUgNjApO1xyXG5cclxuICAvLyBmb3JtYXQgdGhlIG1pbnV0ZXMgYW5kIHNlY29uZHMgc3RyaW5nIHRvIGxvb2sgY29uc2lzdGVudCBhY3Jvc3MgYWxsIHZhbHVlc1xyXG4gIGlmICghaG91cnMpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIG1pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIikgK1xyXG4gICAgICBcIjpcIiArXHJcbiAgICAgIHNlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgaG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIikgK1xyXG4gICAgXCI6XCIgK1xyXG4gICAgbWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSArXHJcbiAgICBcIjpcIiArXHJcbiAgICBzZWNvbmRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpXHJcbiAgKTtcclxufTtcclxuLy8gRmlyZSBjdXN0b20gZXZlbnRcclxuY29uc3QgZmlyZSA9IChcclxuICBlbCxcclxuICBldmVudE5hbWUsXHJcbiAgZGV0YWlsID0gbnVsbCxcclxuICBidWJibGVzID0gdHJ1ZSxcclxuICBjYW5jZWxhYmxlID0gdHJ1ZVxyXG4pID0+IHtcclxuICBsZXQgZXZ0ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwge1xyXG4gICAgZGV0YWlsLFxyXG4gICAgYnViYmxlcyxcclxuICAgIGNhbmNlbGFibGUsXHJcbiAgfSk7XHJcblxyXG4gIGVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBmb3JtYXRUaW1lLFxyXG4gIGZpcmUsXHJcbn07XHJcbiIsImNsYXNzIFZhc3RTZXJ2aWNlIHtcclxuICBzdGF0aWMgREVCVUdfVkFTVF9TRVJWSUNFID0gXCJERUJVR19WQVNUX1NFUlZJQ0VcIjtcclxuICBjb25zdHJ1Y3RvcihyZWNlaXZlcikge1xyXG4gICAgdGhpcy5yZWNlaXZlciA9IHJlY2VpdmVyO1xyXG4gICAgdGhpcy5hZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRDb250YWluZXJcIik7XHJcbiAgICB0aGlzLmFkc0Rpc3BsYXlDb250YWluZXIgPSBudWxsO1xyXG4gICAgdGhpcy5hZHNMb2FkZXIgPSBudWxsO1xyXG4gICAgdGhpcy5hZHNEaXNwbGF5SW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuY3VycmVudEFkcyA9IG51bGw7XHJcbiAgICB0aGlzLmluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmF1dG9wbGF5QWxsb3dlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5hdXRvcGxheVJlcXVpcmVzTXV0ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuaGFzRXJyb3JzID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICBnb29nbGUuaW1hLnNldHRpbmdzLnNldFZwYWlkTW9kZShcclxuICAgICAgZ29vZ2xlLmltYS5JbWFTZGtTZXR0aW5ncy5WcGFpZE1vZGUuRU5BQkxFRFxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFkc0Rpc3BsYXlDb250YWluZXIgPSBuZXcgZ29vZ2xlLmltYS5BZERpc3BsYXlDb250YWluZXIoXHJcbiAgICAgIHRoaXMuYWRDb250YWluZXIsXHJcbiAgICAgIHRoaXMucmVjZWl2ZXIudmlkZW9cclxuICAgICk7XHJcbiAgICB0aGlzLmFkc0xvYWRlciA9IG5ldyBnb29nbGUuaW1hLkFkc0xvYWRlcih0aGlzLmFkc0Rpc3BsYXlDb250YWluZXIpO1xyXG5cclxuICAgIHRoaXMuYWRzTG9hZGVyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRzTWFuYWdlckxvYWRlZEV2ZW50LlR5cGUuQURTX01BTkFHRVJfTE9BREVELFxyXG4gICAgICB0aGlzLm9uQWRzTWFuYWdlckxvYWRlZC5iaW5kKHRoaXMpLFxyXG4gICAgICBmYWxzZVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFkc0xvYWRlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkRXJyb3JFdmVudC5UeXBlLkFEX0VSUk9SLFxyXG4gICAgICB0aGlzLm9uQWRFcnJvcixcclxuICAgICAgZmFsc2VcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvbkFsbEFkc0NvbXBsZXRlZChlKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcImFkIGNvbXBsZXRlZFwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvbkFkQ29tcGxldGVkKGUpIHtcclxuICAgIHRoaXMucmVjZWl2ZXIuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UsXHJcbiAgICAgIFwiYWQgY29tcGxldGVkXCJcclxuICAgICk7XHJcbiAgICB0aGlzLmFkc01hbmFnZXIuZGVzdHJveSgpO1xyXG4gICAgaWYgKCF0aGlzLmhhc0Vycm9ycykgdGhpcy5yZWNlaXZlci5vbkVuZCgpO1xyXG4gICAgLy8gdGhpcy5hZHNNYW5hZ2VyLmRlc3Ryb3koKTtcclxuICAgIC8vIHRoaXMucmVjZWl2ZXIucGxheWVyTWFuYWdlci5zYGV0TWVkaWFFbGVtZW50KHRoaXMudmlkZW8pO1xyXG4gIH1cclxuICBvbkNvbnRlbnRQYXVzZVJlcXVlc3RlZChlKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIkNvbnRlbnQgUGF1c2UgUmVxdWVzdFwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvbkNvbnRlbnRSZXN1bWVSZXF1ZXN0ZWQoKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIkNvbnRlbnQgUmVzdW1lIFJlcXVlc3RcIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb25BZExvYWRlZChlKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIkFkIGxvYWRlZFwiXHJcbiAgICApO1xyXG4gIH1cclxuICBsb2FkQWRzKHZhc3RVcmwsIHZhc3RYbWwpIHtcclxuICAgIHRoaXMuY3VycmVudEFkcyA9IHt9O1xyXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XHJcbiAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCJsb2FkIFwiICsgdmFzdFVybFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodmFzdFVybCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRBZHMuY29udGVudCA9IHZhc3RVcmw7XHJcbiAgICAgIHRoaXMuY3VycmVudEFkcy50eXBlID0gXCJ1cmxcIjtcclxuICAgIH0gZWxzZSBpZiAodmFzdFhtbCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRBZHMuY29udGVudCA9IHZhc3RYbWw7XHJcbiAgICAgIHRoaXMuY3VycmVudEFkcy50eXBlID0gXCJ4bWxcIjtcclxuICAgIH1cclxuICAgIHRoaXMuY3VycmVudEFkcy5jdXJyZW50QWRJbmRleCA9IDA7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UpO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEFkcy50eXBlID09PSBcInVybFwiKVxyXG4gICAgICB0aGlzLmxvYWQodGhpcy5jdXJyZW50QWRzLmNvbnRlbnQpLmJpbmQodGhpcyk7XHJcbiAgICBlbHNlIHRoaXMubG9hZChudWxsLCB0aGlzLmN1cnJlbnRBZHMuY29udGVudCkuYmluZCh0aGlzKTtcclxuICB9XHJcbiAgbG9hZCh2YXN0VXJsLCB2YXN0WG1sKSB7XHJcbiAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHRoaXMuaW5pdCgpO1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCJJbml0aWFsaXplZFwiICsgdGhpcy52YXN0VXJsXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuYWRzUmVxdWVzdCA9IG5ldyBnb29nbGUuaW1hLkFkc1JlcXVlc3QoKTtcclxuICAgIHRoaXMucmVjZWl2ZXIuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwib2tlaiBlIHFpdHkgcHJhXCIsIFwicHNlXCIgKyB2YXN0VXJsKTtcclxuXHJcbiAgICBpZiAodmFzdFVybCkge1xyXG4gICAgICB0aGlzLmFkc1JlcXVlc3QuYWRUYWdVcmwgPSB2YXN0VXJsO1xyXG4gICAgfSBlbHNlIGlmICh2YXN0WG1sKSB7XHJcbiAgICAgIHRoaXMuYWRzUmVxdWVzdC5hZHNSZXNwb25zZSA9IHZhc3RYbWw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIm9rZWogZSBxaXR5IHByYVwiLCBcIkFzZGZ4eFwiKTtcclxuXHJcbiAgICB0aGlzLmFkc1JlcXVlc3QubGluZWFyQWRTbG90V2lkdGggPSB0aGlzLnJlY2VpdmVyLnZpZGVvLmNsaWVudFdpZHRoO1xyXG4gICAgdGhpcy5hZHNSZXF1ZXN0LmxpbmVhckFkU2xvdEhlaWdodCA9IHRoaXMucmVjZWl2ZXIudmlkZW8uY2xpZW50SGVpZ2h0O1xyXG4gICAgdGhpcy5hZHNSZXF1ZXN0Lm5vbkxpbmVhckFkU2xvdFdpZHRoID0gdGhpcy5yZWNlaXZlci52aWRlby5jbGllbnRXaWR0aDtcclxuICAgIHRoaXMuYWRzUmVxdWVzdC5ub25MaW5lYXJBZFNsb3RIZWlnaHQgPVxyXG4gICAgICB0aGlzLnJlY2VpdmVyLnZpZGVvLmNsaWVudEhlaWdodCAvIDM7XHJcblxyXG4gICAgdGhpcy5hZHNSZXF1ZXN0LnNldEFkV2lsbEF1dG9QbGF5KHRoaXMuYXV0b3BsYXlBbGxvd2VkKTtcclxuICAgIHRoaXMuYWRzUmVxdWVzdC5zZXRBZFdpbGxQbGF5TXV0ZWQodGhpcy5hdXRvcGxheVJlcXVpcmVzTXV0ZWQpO1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJva2VqIGUgcWl0eSBwcmFcIiwgXCJBc2RmXCIpO1xyXG5cclxuICAgIHRoaXMuYWRzUmVxdWVzdC52YXN0TG9hZFRpbWVvdXQgPSA4MDAwO1xyXG4gICAgdGhpcy5hZHNMb2FkZXIucmVxdWVzdEFkcyh0aGlzLmFkc1JlcXVlc3QpO1xyXG4gIH1cclxuICBvblRpbWVVcGRhdGUoKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIiBPTiBUSU1FIFVQREFURVwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvbkFkU2tpcChlKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIk9OIEFEIFNraVwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvbkFkU3RhcnRlZChlKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIk9OIEFEIFNUQVJURURcIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb25BZHNNYW5hZ2VyTG9hZGVkKGFkc01hbmFnZXJMb2FkZWRFdmVudCkge1xyXG4gICAgaWYgKHRoaXMuYWRzTWFuYWdlcikge1xyXG4gICAgICB0aGlzLmFkc01hbmFnZXIuZGVzdHJveSgpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWRzUmVuZGVyaW5nU2V0dGluZ3MgPSBuZXcgZ29vZ2xlLmltYS5BZHNSZW5kZXJpbmdTZXR0aW5ncygpO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyID0gYWRzTWFuYWdlckxvYWRlZEV2ZW50LmdldEFkc01hbmFnZXIoXHJcbiAgICAgIHRoaXMucmVjZWl2ZXIudmlkZW8sXHJcbiAgICAgIGFkc1JlbmRlcmluZ1NldHRpbmdzXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRFcnJvckV2ZW50LlR5cGUuQURfRVJST1IsXHJcbiAgICAgIHRoaXMub25BZEVycm9yLmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLmFkc01hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQ09OVEVOVF9QQVVTRV9SRVFVRVNURUQsXHJcbiAgICAgIHRoaXMub25Db250ZW50UGF1c2VSZXF1ZXN0ZWQuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5DT05URU5UX1JFU1VNRV9SRVFVRVNURUQsXHJcbiAgICAgIHRoaXMub25Db250ZW50UmVzdW1lUmVxdWVzdGVkLmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLmFkc01hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQUxMX0FEU19DT01QTEVURUQsXHJcbiAgICAgIHRoaXMub25BbGxBZHNDb21wbGV0ZWQuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5MT0FERUQsXHJcbiAgICAgIHRoaXMub25BZExvYWRlZC5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLlNUQVJURUQsXHJcbiAgICAgIHRoaXMub25BZFN0YXJ0ZWQuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5DT01QTEVURSxcclxuICAgICAgdGhpcy5vbkFkQ29tcGxldGVkLmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLmFkc01hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuU0tJUFBFRCxcclxuICAgICAgdGhpcy5vbkFkU2tpcC5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkFEX1BST0dSRVNTLFxyXG4gICAgICB0aGlzLm9uVGltZVVwZGF0ZS5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkFEX0JVRkZFUklORyxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICAvLyB0aGlzLmFkc01hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgIC8vICAgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuUEFVU0VELFxyXG4gICAgLy8gICAoZXZlbnQpID0+IHtcclxuICAgIC8vICAgICB0aGlzLnBhdXNlZCA9IHRydWU7XHJcbiAgICAvLyAgICAgdGhpcy5wbGF5ZXIudmlkZW9Db250cm9scy5wbGF5UGF1c2VCdXR0b24udXBkYXRlKHtcclxuICAgIC8vICAgICAgIHBhdXNlZDogdGhpcy5wYXVzZWQsXHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyAgICAgc2hvd092ZXJsYXlIb3Zlcih0aGlzLnBsYXllciwgY3NzQ2xhc3Nlcy5pY29ucy5wbGF5UGF1c2VCdXR0b24ucGF1c2UpO1xyXG4gICAgLy8gICAgIFV0aWxzLmZpcmUodGhpcy5hZENvbnRhaW5lciwgRXZlbnRzLmFkRXZlbnRzLkFEX1BBVVNFLCB7XHJcbiAgICAvLyAgICAgICBjdXJyZW50VGltZTogdGhpcy5wbGF5ZXIudmlkZW8uY3VycmVudFRpbWUsXHJcbiAgICAvLyAgICAgICBhZFBsYXlJZDogdGhpcy5hZHNNYW5hZ2VyLmdldEN1cnJlbnRBZCgpPy5nZXRBZElkKCksXHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICk7XHJcblxyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLlJFU1VNRUQsXHJcbiAgICAgIChldmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXIudmlkZW9Db250cm9scy5wbGF5UGF1c2VCdXR0b24udXBkYXRlKHtcclxuICAgICAgICAgIHBhdXNlZDogdGhpcy5wYXVzZWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2hvd092ZXJsYXlIb3Zlcih0aGlzLnBsYXllciwgY3NzQ2xhc3Nlcy5pY29ucy5wbGF5UGF1c2VCdXR0b24ucGxheSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFkc01hbmFnZXIuZ2V0Q3VycmVudEFkKCkucGxheWJhY2tTdGFydGVkKVxyXG4gICAgICAgICAgVXRpbHMuZmlyZSh0aGlzLmFkQ29udGFpbmVyLCBFdmVudHMuYWRFdmVudHMuQURfUExBWSwge1xyXG4gICAgICAgICAgICBjdXJyZW50VGltZTogdGhpcy5wbGF5ZXIudmlkZW8uY3VycmVudFRpbWUsXHJcbiAgICAgICAgICAgIGJlZ2luOiB0cnVlLFxyXG4gICAgICAgICAgICBhZFBsYXlJZDogdGhpcy5hZHNNYW5hZ2VyLmdldEN1cnJlbnRBZCgpPy5nZXRBZElkKCksXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBVdGlscy5maXJlKHRoaXMuYWRDb250YWluZXIsIEV2ZW50cy5hZEV2ZW50cy5BRF9QTEFZLCB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRUaW1lOiB0aGlzLnBsYXllci52aWRlby5jdXJyZW50VGltZSxcclxuICAgICAgICAgICAgcmVzdW1lOiB0cnVlLFxyXG4gICAgICAgICAgICBhZnRlclBhdXNlOiB0cnVlLFxyXG4gICAgICAgICAgICBhZFBsYXlJZDogdGhpcy5hZHNNYW5hZ2VyLmdldEN1cnJlbnRBZCgpPy5nZXRBZElkKCksXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5TS0lQUEFCTEVfU1RBVEVfQ0hBTkdFRCxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIFV0aWxzLmZpcmUodGhpcy5hZENvbnRhaW5lciwgRXZlbnRzLmFkRXZlbnRzLkFEX1NLSVBQQUJMRSwge1xyXG4gICAgICAgICAgY3VycmVudFRpbWU6IHRoaXMucGxheWVyLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICAgICAgYWRQbGF5SWQ6IHRoaXMuYWRzTWFuYWdlci5nZXRDdXJyZW50QWQoKT8uZ2V0QWRJZCgpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5wbGF5QWRzKCk7XHJcbiAgfVxyXG4gIHBsYXlBZHMoKSB7XHJcbiAgICBpZiAoIXRoaXMuYWRzRGlzcGxheUluaXRpYWxpemVkKSB7XHJcbiAgICAgIHRoaXMuYWRzRGlzcGxheUNvbnRhaW5lci5pbml0aWFsaXplKCk7XHJcbiAgICAgIHRoaXMuYWRzRGlzcGxheUluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5yZWNlaXZlci52aWRlby5jbGllbnRXaWR0aDtcclxuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMucmVjZWl2ZXIudmlkZW8uY2xpZW50SGVpZ2h0O1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5yZWNlaXZlci5pc0FkUGxheWluZyA9IHRydWU7XHJcbiAgICAgIHRoaXMuYWRzTWFuYWdlci5pbml0KHdpZHRoLCBoZWlnaHQsIGdvb2dsZS5pbWEuVmlld01vZGUuRlVMTFNDUkVFTik7XHJcbiAgICAgIHRoaXMuYWRzTWFuYWdlci5zdGFydCgpO1xyXG4gICAgICB0aGlzLnJlY2VpdmVyLnJlY2VpdmVyQ29udHJvbHMubG9hZGVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH0gY2F0Y2ggKGFkRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJBZHNNYW5hZ2VyIGNvdWxkIG5vdCBiZSBzdGFydGVkXCIsIGFkRXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuICBvbkFkRXJyb3IoZSkge1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCIgYWQgZXJyb3JcIiArIGVcclxuICAgICk7XHJcbiAgICB0aGlzLmhhc0Vycm9ycyA9IHRydWU7XHJcbiAgICB0aGlzLnJlY2VpdmVyLm9uRW5kKCk7XHJcbiAgfVxyXG4gIHJlc3VtZSgpIHtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UsXHJcbiAgICAgIFwiUkVTVU1JTkcgQUQgRXZlbnRcIlxyXG4gICAgKTtcclxuICAgIGlmICghdGhpcy5hZHNNYW5hZ2VyKSByZXR1cm47XHJcbiAgICB0aGlzLmFkc01hbmFnZXIucmVzdW1lKCk7XHJcbiAgfVxyXG4gIHBhdXNlKCkge1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCJQQVVTRSBBRCBFdmVudFwiXHJcbiAgICApO1xyXG4gICAgaWYgKCF0aGlzLmFkc01hbmFnZXIpIHJldHVybjtcclxuICAgIHRoaXMuYWRzTWFuYWdlci5wYXVzZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVmFzdFNlcnZpY2U7XHJcbiIsImltcG9ydCBSZWNlaXZlciBmcm9tIFwiLi9tb2RlbHMvcmVjZWl2ZXJcIjtcclxuXHJcbi8vYSBib29sZWFuIHRlbGxpbmcgd2hldGhlciBITFMgaXMgc3VwcG9ydGVkIGluIHRoZSBicm93c2VyXHJcbnZwUmVjZWl2ZXIuSExTc3VwcG9ydGVkID0gZmFsc2U7XHJcblxyXG5mdW5jdGlvbiB2cFJlY2VpdmVyKGlkLCBjb25maWcpIHtcclxuICBsZXQgcmVjZWl2ZXIgPSBuZXcgUmVjZWl2ZXIoaWQsIGNvbmZpZyk7XHJcbiAgcmVjZWl2ZXIuaW5pdCgpO1xyXG4gIHJldHVybiByZWNlaXZlcjtcclxufVxyXG5cclxud2luZG93LnZwUmVjZWl2ZXIgPSB2cFJlY2VpdmVyO1xyXG4iLCJpbXBvcnQgaGxzY29uZmlnIGZyb20gXCIuLi9jb25maWcvaGxzQ29uZmlnXCI7XHJcbmltcG9ydCBSZWNlaXZlckNvbnRyb2xzIGZyb20gXCIuL3JlY2VpdmVyLWNvbnRyb2xzXCI7XHJcbmltcG9ydCBWYXN0U2VydmljZSBmcm9tIFwiLi92YXN0U2VydmljZVwiO1xyXG5jbGFzcyBSZWNlaXZlciB7XHJcbiAgY29uc3RydWN0b3IoaWQsIGNvbmZpZykge1xyXG4gICAgdGhpcy5jb250ZXh0ID0gbnVsbDtcclxuICAgIHRoaXMucGxheWVyTWFuYWdlciA9IG51bGw7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlciA9IG51bGw7XHJcbiAgICB0aGlzLmFwcElkID0gY29uZmlnLmFwcElkO1xyXG4gICAgdGhpcy52aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaWQpO1xyXG4gICAgdGhpcy5wbGF5YmFja0NvbmZpZyA9IG51bGw7XHJcbiAgICB0aGlzLmNvbnRyb2xzID0gbnVsbDtcclxuICAgIHRoaXMuaGxzID0gbnVsbDtcclxuICAgIHRoaXMudmlkZW9PYmplY3QgPSB7fTtcclxuICAgIHRoaXMudmlkZW9Db250YWluZXIgPSB0aGlzLnZpZGVvLnBhcmVudEVsZW1lbnQ7XHJcbiAgICB0aGlzLnBsYXliYWNrUmF0ZSA9IDE7XHJcbiAgICB0aGlzLmF1dG9wbGF5ID0gZmFsc2U7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMgPSBuZXcgUmVjZWl2ZXJDb250cm9scyhcIi5jb250cm9sc1wiKTtcclxuICAgIHRoaXMubWVkaWFNYW5hZ2VyID0gbnVsbDtcclxuICAgIHRoaXMuY2FzdFJlY2VpdmVyTWFuYWdlciA9IG51bGw7XHJcbiAgICB0aGlzLnZpZGVvU3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy52YXN0U2VydmljZSA9IG5ldyBWYXN0U2VydmljZSh0aGlzKTtcclxuICAgIHRoaXMuY29uZmlnID0ge307XHJcbiAgICB0aGlzLmRlYnVnVGFncyA9IHtcclxuICAgICAgTE9BRF9SRVFVRVNUOiBcIkxPQURfUkVRVUVTVFwiLFxyXG4gICAgICBBVFRBQ0hfTUVESUE6IFwiQVRUQUNIX01FRElBXCIsXHJcbiAgICAgIE9OUExBWTogXCJPTl9QTEFZXCIsXHJcbiAgICAgIFNUQVJUOiBcIlNUQVJUXCIsXHJcbiAgICB9O1xyXG4gICAgdGhpcy5pc0FkUGxheWluZyA9IGZhbHNlO1xyXG4gIH1cclxuICBzdGFydCgpIHtcclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy5sb2FkZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcodGhpcy5kZWJ1Z1RhZ3MuU1RBUlQsIFwiU3RhcnRpbmcgdmlkZW8uLi5cIik7XHJcbiAgICB0aGlzLm9uUGxheSgpO1xyXG4gIH1cclxuXHJcbiAgb25QbGF5KCkge1xyXG4gICAgLy8gcmV0dXJuIHRoaXMucGxheWVyTWFuYWdlci5wbGF5KCk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIm9uIHBsYXlcIiwgdGhpcy52aWRlby5nZXRBdHRyaWJ1dGUoXCJzcmNcIikpO1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJpc2FkcGxheWluZ1wiLCB0aGlzLmlzQWRQbGF5aW5nKTtcclxuICAgIGlmICghdGhpcy5pc0FkUGxheWluZykge1xyXG4gICAgICB0aGlzLnZpZGVvXHJcbiAgICAgICAgLnBsYXkoKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIGlmICghdGhpcy52aWRlb1N0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnNob3dDb250cm9scygpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvU3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMucGxheSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLmhpZGVDb250cm9scyg2MDAwKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdUYWdzLk9OUExBWSxcclxuICAgICAgICAgICAgXCIgQ291bGRuJ3QgcGxheSB2aWRlby5UcmluZyBvbmUgbW9yZSB0aW1lIFwiICsgZVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB0aGlzLnZhc3RTZXJ2aWNlLnJlc3VtZSgpO1xyXG4gIH1cclxuICBvblBhdXNlKCkge1xyXG4gICAgaWYgKCF0aGlzLmlzQWRQbGF5aW5nKSB0aGlzLnZpZGVvLnBhdXNlKCk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy52YXN0U2VydmljZS5wYXVzZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnBhdXNlKCk7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMuc2hvd0NvbnRyb2xzKCk7XHJcbiAgfVxyXG4gIGFkZFBsYXllckV2ZW50cygpIHtcclxuICAgIHRoaXMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInRpbWV1cGRhdGVcIiwgdGhpcy5vblRpbWVVcGRhdGUpO1xyXG4gICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwgdGhpcy5vbkVuZC5iaW5kKHRoaXMpKTtcclxuICB9XHJcbiAgb25FbmQoKSB7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIm9uIEVuZFwiLCB0aGlzLmNvbmZpZy5yZXBsYXkpO1xyXG4gICAgaWYgKHRoaXMuaXNBZFBsYXlpbmcpIHRoaXMuaXNBZFBsYXlpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuYXR0YWNoTWVkaWEoKTtcclxuICB9XHJcbiAgb25UaW1lVXBkYXRlKCkge1xyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnVwZGF0ZSh0aGlzLnVwZGF0ZVBsYXllclN0YXRlKCkpO1xyXG4gIH1cclxuICB1cGRhdGVQbGF5ZXJTdGF0ZSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGN1cnJlbnRUaW1lOiB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lLFxyXG4gICAgICBkdXJhdGlvbjogdGhpcy52aWRlb09iamVjdC5kdXJhdGlvbixcclxuICAgIH07XHJcbiAgfVxyXG4gIGF0dGFjaE1lZGlhKCkge1xyXG4gICAgdnBSZWNlaXZlci5ITFNzdXBwb3J0ZWQgPSBIbHMuaXNTdXBwb3J0ZWQoKTtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiaW5zaWRlIGF0dGFjaCBtZWRpYVwiLCB2cFJlY2VpdmVyLkhMU3N1cHBvcnRlZCk7XHJcbiAgICB0aGlzLnZpZGVvLnBsYXliYWNrUmF0ZSA9IDE7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgXCJ2aWRlbyBmaWxlXCIsXHJcbiAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMudmlkZW8sIFtcImlkXCIsIFwiY2xhc3NOYW1lXCIsIFwidGFnTmFtZVwiXSlcclxuICAgICk7XHJcbiAgICBpZiAodGhpcy52aWRlb09iamVjdC5maWxlLmVuZHNXaXRoKFwibXA0XCIpKSB7XHJcbiAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiaW5zaWRlIG1wNFwiLCB0aGlzLnZpZGVvT2JqZWN0LmZpbGUpO1xyXG4gICAgICB0aGlzLnZpZGVvLnNyYyA9IHRoaXMudmlkZW9PYmplY3QuZmlsZTtcclxuICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgfSBlbHNlIGlmICh2cFJlY2VpdmVyLkhMU3N1cHBvcnRlZCkge1xyXG4gICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcImluc2lkZSBobHNzdXBwb3J0ZWRcIiwgdGhpcy52aWRlb09iamVjdC5maWxlKTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB0aGlzLmhscyA9IG5ldyBIbHMoKTtcclxuICAgICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcImhscyBpbml0aWFsaXplZFwiLCB0aGlzLnZpZGVvT2JqZWN0LmZpbGUpO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lID4gMCkgdGhpcy52aWRlby5jdXJyZW50VGltZSA9IHRoaXMuY3VycmVudFRpbWU7XHJcbiAgICAgICAgdGhpcy5obHMuYXR0YWNoTWVkaWEodGhpcy52aWRlbyk7XHJcbiAgICAgICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJhdHRhY2hlZCBtZWRpYVwiLCB0aGlzLnZpZGVvT2JqZWN0LmZpbGUpO1xyXG4gICAgICAgIHRoaXMuaGxzLm9uKEhscy5FdmVudHMuTUVESUFfQVRUQUNIRUQsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiYW1lZGlhIGF0dGFjaGVkXCIsIHRoaXMudmlkZW9PYmplY3QuZmlsZSk7XHJcbiAgICAgICAgICB0aGlzLmhscy5zdGFydExldmVsID0gMDtcclxuICAgICAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICAgICAgICBcImxvYWRpbmcgc291cmNlIGhsc3N1cHBvcnRlZFwiLFxyXG4gICAgICAgICAgICB0aGlzLnZpZGVvT2JqZWN0LmZpbGVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICB0aGlzLmhscy5sb2FkU291cmNlKHRoaXMudmlkZW9PYmplY3QuZmlsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5obHMub24oSGxzLkV2ZW50cy5NQU5JRkVTVF9QQVJTRUQsIChldmVudCwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaGxzLm9uKEhscy5FdmVudHMuRVJST1IsIChldmVudCwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJITFMgIEVSUk9SXCIsIGRhdGEuZGV0YWlscyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7fVxyXG5cclxuICAgICAgLy8gdGhpcy5obHMub24oSGxzLkV2ZW50cy5FUlJPUiwgKGV2ZW50LCBkYXRhKSA9PiB7XHJcbiAgICAgIC8vICAgaWYgKGRhdGEuZGV0YWlscyA9PT0gXCJtYW5pZmVzdExvYWRFcnJvclwiKSB7XHJcbiAgICAgIC8vICAgICB0aGlzLnZpZGVvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3Nlcy5lZmZlY3RzLmhpZGVDb250ZW50KTtcclxuICAgICAgLy8gICAgIHRoaXMudmlkZW9Db250YWluZXIuY2xhc3NMaXN0LmFkZChjc3NDbGFzc2VzLmVmZmVjdHMuc2hvd0Vycm9yKTtcclxuICAgICAgLy8gICB9XHJcblxyXG4gICAgICAvLyAgIGlmIChkYXRhLmRldGFpbHMgPT09IFwibWFuaWZlc3RMb2FkVGltZU91dFwiKSB7XHJcbiAgICAgIC8vICAgICB0aGlzLnZpZGVvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3Nlcy5lZmZlY3RzLmhpZGVDb250ZW50KTtcclxuICAgICAgLy8gICAgIHRoaXMudmlkZW9Db250YWluZXIuY2xhc3NMaXN0LmFkZChjc3NDbGFzc2VzLmVmZmVjdHMuc2hvd0Vycm9yKTtcclxuICAgICAgLy8gICB9XHJcblxyXG4gICAgICAvLyAgIGlmIChkYXRhLmRldGFpbHMgPT09IFwibWFuaWZlc3RQYXJzaW5nRXJyb3JcIikge1xyXG4gICAgICAvLyAgICAgdGhpcy52aWRlb0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzZXMuZWZmZWN0cy5oaWRlQ29udGVudCk7XHJcbiAgICAgIC8vICAgICB0aGlzLnZpZGVvQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3Nlcy5lZmZlY3RzLnNob3dFcnJvcik7XHJcbiAgICAgIC8vICAgfVxyXG5cclxuICAgICAgLy8gICBpZiAoZGF0YS5kZXRhaWxzID09PSBcImxldmVsTG9hZEVycm9yXCIpIHtcclxuICAgICAgLy8gICAgIHRoaXMucmVtb3ZlTGV2ZWwoZGF0YS5jb250ZXh0LmxldmVsKTtcclxuICAgICAgLy8gICB9XHJcblxyXG4gICAgICAvLyAgIGlmIChkYXRhLmRldGFpbHMgPT09IFwiZnJhZ0xvYWRFcnJvclwiKSB7XHJcbiAgICAgIC8vICAgICB0aGlzLmZyYWdFcnJvckNvdW50Kys7XHJcbiAgICAgIC8vICAgICAvLyBzbiByZWZlcmVzIHRvIHNlcXVlbmNlIG51bWJlclxyXG4gICAgICAvLyAgICAgaWYgKGRhdGEuZnJhZy5zbiA9PSAwKSB0aGlzLmZhaWxlZFRvTG9hZEZpcnN0RnJhZ21lbnQgPSB0cnVlO1xyXG4gICAgICAvLyAgIH1cclxuXHJcbiAgICAgIC8vICAgaWYgKHRoaXMubGV2ZWxIYXNNaXNzaW5nRnJhZ21lbnRzKCkpIHtcclxuICAgICAgLy8gICAgIHRoaXMuZnJhZ0Vycm9yQ291bnQgPSAwO1xyXG4gICAgICAvLyAgICAgdGhpcy5yZW1vdmVMZXZlbChkYXRhLmZyYWcubGV2ZWwpO1xyXG4gICAgICAvLyAgICAgdGhpcy5obHMubG9hZExldmVsID0gLTE7XHJcbiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIk5ldHdvcmsgZXJyb3IgZW5jb3VudGVyZWRcIik7XHJcbiAgICAgIC8vICAgfVxyXG5cclxuICAgICAgLy8gICBpZiAodGhpcy5mYWlsZWRUb0xvYWRGaXJzdEZyYWdtZW50KSB7XHJcbiAgICAgIC8vICAgICB0aGlzLmZhaWxlZFRvTG9hZEZpcnN0RnJhZ21lbnQgPSBmYWxzZTtcclxuICAgICAgLy8gICAgIHRoaXMucmVtb3ZlTGV2ZWwoZGF0YS5mcmFnLmxldmVsKTtcclxuICAgICAgLy8gICAgIHRoaXMuaGxzLmxvYWRMZXZlbCA9IC0xO1xyXG4gICAgICAvLyAgICAgdGhpcy5vblBsYXkoKTtcclxuICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiTmV0d29yayBlcnJvciBlbmNvdW50ZXJlZFwiKTtcclxuICAgICAgLy8gICB9XHJcblxyXG4gICAgICAvLyAgIGlmICghZGF0YS5mYXRhbCkge1xyXG4gICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAvLyAgIH1cclxuXHJcbiAgICAgIC8vICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcclxuICAgICAgLy8gICAgIGNhc2UgSGxzLkVycm9yVHlwZXMuTkVUV09SS19FUlJPUjpcclxuICAgICAgLy8gICAgICAgY29uc29sZS5sb2coXCJmYXRhbCBuZXR3b3JrIGVycm9yIGVuY291bnRlcmVkXCIpO1xyXG4gICAgICAvLyAgICAgICB0aGlzLmhscy5zdGFydExvYWQoKTtcclxuICAgICAgLy8gICAgICAgYnJlYWs7XHJcbiAgICAgIC8vICAgICBjYXNlIEhscy5FcnJvclR5cGVzLk1FRElBX0VSUk9SOlxyXG4gICAgICAvLyAgICAgICBjb25zb2xlLmxvZyhcImZhdGFsIG1lZGlhIGVycm9yIGVuY291bnRlcmVkXCIpO1xyXG4gICAgICAvLyAgICAgICB0aGlzLmhscy5yZWNvdmVyTWVkaWFFcnJvcigpO1xyXG4gICAgICAvLyAgICAgICBicmVhaztcclxuICAgICAgLy8gICAgIGRlZmF1bHQ6XHJcbiAgICAgIC8vICAgICAgIHRoaXMuaGxzLmRlc3Ryb3koKTtcclxuICAgICAgLy8gICAgICAgYnJlYWs7XHJcbiAgICAgIC8vICAgfVxyXG4gICAgICAvLyB9KTtcclxuICAgIH1cclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiZmluaXNoZWQgYXR0YWNoIG1lZGlhXCIpO1xyXG4gICAgLy8gIGVsc2UgaWYgKHRoaXMudmlkZW8uY2FuUGxheVR5cGUoXCJhcHBsaWNhdGlvbi92bmQuYXBwbGUubXBlZ3VybFwiKSkge1xyXG4gICAgLy8gICB0aGlzLnZpZGVvLnNyYyA9IHRoaXMudmlkZW9PYmplY3QuZmlsZTtcclxuICAgIC8vICAgaWYgKFV0aWxzLmlzSU9TKCkpIHtcclxuICAgIC8vICAgICBmcHNfZHJtLmluaXQoXHJcbiAgICAvLyAgICAgICB0aGlzLnZpZGVvLFxyXG4gICAgLy8gICAgICAgY29uZmlnLmZwc0NlcnRpZmljYXRlVXJsLFxyXG4gICAgLy8gICAgICAgdGhpcy52aWRlb09iamVjdC5hc3NldElkXHJcbiAgICAvLyAgICAgKTtcclxuICAgIC8vICAgfVxyXG4gICAgLy8gICB0aGlzLnZpZGVvLnBsYXlzSW5saW5lID0gdHJ1ZTtcclxuICAgIC8vICAgdGhpcy5zdGFydCgpO1xyXG4gICAgLy8gfVxyXG4gIH1cclxuICBmYWtlaW5pdCgpIHtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyID0ge1xyXG4gICAgICBkZWJ1ZzogZnVuY3Rpb24gKHR5cGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0eXBlLCBtZXNzYWdlKTtcclxuICAgICAgfSxcclxuICAgICAgZXJyb3I6IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2codHlwZSwgbWVzc2FnZSk7XHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnNldENhc3REZWJ1Z2dlcih0aGlzLmNhc3REZWJ1Z0xvZ2dlcik7XHJcbiAgICB0aGlzLnZpZGVvT2JqZWN0LmZpbGUgPVxyXG4gICAgICBcImh0dHBzOi8vdnAuZ2ppcmFmYS5uZXQvdnBzL3Byb2Qvb2RnZWh0eW8vZW5jb2RlL3Zqc215bGRzL21wNC8zNjBwLm1wNFwiO1xyXG4gICAgdGhpcy52YXN0U2VydmljZS5sb2FkQWRzKFxyXG4gICAgICBcImh0dHBzOi8vdnAtZGV2LmdqaXJhZmEubmV0L3Zwcy9jb250ZW50L3Zhc3QvcHJlcm9sbC0yLnhtbFwiXHJcbiAgICApO1xyXG4gICAgLy8gdGhpcy5hdHRhY2hNZWRpYSgpO1xyXG4gICAgdGhpcy5iaW5kTWV0aG9kcygpO1xyXG4gICAgLy8gdGhpcy5iaW5kSW50ZXJjZXB0b3JzKCk7XHJcbiAgICB0aGlzLmFkZFBsYXllckV2ZW50cygpO1xyXG4gIH1cclxuICBpbml0KCkge1xyXG4gICAgdGhpcy5jb250ZXh0ID0gY2FzdC5mcmFtZXdvcmsuQ2FzdFJlY2VpdmVyQ29udGV4dC5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgIHRoaXMuY29udGV4dC5zZXRMb2dnZXJMZXZlbChjYXN0LmZyYW1ld29yay5Mb2dnZXJMZXZlbC5ERUJVRyk7XHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIgPSB0aGlzLmNvbnRleHQuZ2V0UGxheWVyTWFuYWdlcigpO1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyLnNldE1lZGlhRWxlbWVudCh0aGlzLnZpZGVvKTtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyID0gY2FzdC5kZWJ1Zy5DYXN0RGVidWdMb2dnZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLnNldEVuYWJsZWQodHJ1ZSk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcImhlbGxvXCIsIFwib2tlalwiKTtcclxuXHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMuc2V0Q2FzdERlYnVnZ2VyKHRoaXMuY2FzdERlYnVnTG9nZ2VyKTtcclxuICAgIC8vIHRoaXMucGxheWJhY2tDb25maWcuYXV0b1Jlc3VtZUR1cmF0aW9uID0gNTtcclxuICAgIC8vIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmluZm8oTE9HX1JFQ0VJVkVSX1RBRywgYGF1dG9pbml0OiBgKTtcclxuICAgIC8vIHRoaXMuY29udHJvbHMuY2xlYXJEZWZhdWx0U2xvdEFzc2lnbm1lbnRzKCk7XHJcbiAgICAvLyB0aGlzLmRyYXdCdXR0b25zKCk7XHJcblxyXG4gICAgLy8gY29udGV4dC5zdGFydCh7XHJcbiAgICAvLyAgIHF1ZXVlOiBuZXcgQ2FzdFF1ZXVlKCksXHJcbiAgICAvLyAgIHBsYXliYWNrQ29uZmlnOiB0aGlzLnBsYXliYWNrQ29uZmlnLFxyXG4gICAgLy8gICBzdXBwb3J0ZWRDb21tYW5kczpcclxuICAgIC8vICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5Db21tYW5kLkFMTF9CQVNJQ19NRURJQSB8XHJcbiAgICAvLyAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuQ29tbWFuZC5RVUVVRV9QUkVWIHxcclxuICAgIC8vICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5Db21tYW5kLlFVRVVFX05FWFQgfFxyXG4gICAgLy8gICAgIGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLkNvbW1hbmQuU1RSRUFNX1RSQU5TRkVSLFxyXG4gICAgLy8gfSk7XHJcbiAgICAvLyB0aGlzLmJpbmRJbnRlcmNlcHRvcnMoKTtcclxuICAgIC8vIHRoaXMudmlkZW9PYmplY3QuZmlsZSA9XHJcbiAgICAvLyAgIFwiaHR0cHM6Ly92cC5namlyYWZhLm5ldC92cHMvcHJvZC9vZGdlaHR5by9lbmNvZGUvdmpzbXlsZHMvbXA0LzM2MHAubXA0XCI7XHJcbiAgICAvLyB0aGlzLmF0dGFjaE1lZGlhKCk7XHJcbiAgICB0aGlzLmNvbnRleHQuc3RhcnQoKTtcclxuICAgIHRoaXMuYmluZE1ldGhvZHMoKTtcclxuICAgIHRoaXMuYmluZEludGVyY2VwdG9ycygpO1xyXG4gICAgdGhpcy5hZGRQbGF5ZXJFdmVudHMoKTtcclxuICB9XHJcbiAgb25TZWVrKHJlcXVlc3REYXRhKSB7XHJcbiAgICB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID0gcmVxdWVzdERhdGEuY3VycmVudFRpbWU7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMuc2hvd0NvbnRyb2xzKCk7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMuaGlkZUNvbnRyb2xzKDYwMDApO1xyXG5cclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy51cGRhdGUodGhpcy51cGRhdGVQbGF5ZXJTdGF0ZSgpKTtcclxuICB9XHJcbiAgZHJhd0J1dHRvbnMoKSB7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmFzc2lnbkJ1dHRvbihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsudWkuQ29udHJvbHNTbG90LlNMT1RfU0VDT05EQVJZXzEsXHJcbiAgICAgIGNhc3QuZnJhbWV3b3JrLnVpLkNvbnRyb2xzQnV0dG9uLlFVRVVFX1BSRVZcclxuICAgICk7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmFzc2lnbkJ1dHRvbihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsudWkuQ29udHJvbHNTbG90LlNMT1RfUFJJTUFSWV8xLFxyXG4gICAgICBjYXN0LmZyYW1ld29yay51aS5Db250cm9sc0J1dHRvbi5DQVBUSU9OU1xyXG4gICAgKTtcclxuICAgIHRoaXMuY29udHJvbHMuYXNzaWduQnV0dG9uKFxyXG4gICAgICBjYXN0LmZyYW1ld29yay51aS5Db250cm9sc1Nsb3QuU0xPVF9QUklNQVJZXzIsXHJcbiAgICAgIGNhc3QuZnJhbWV3b3JrLnVpLkNvbnRyb2xzQnV0dG9uLlNFRUtfRk9SV0FSRF8xNVxyXG4gICAgKTtcclxuICAgIHRoaXMuY29udHJvbHMuYXNzaWduQnV0dG9uKFxyXG4gICAgICBjYXN0LmZyYW1ld29yay51aS5Db250cm9sc1Nsb3QuU0xPVF9TRUNPTkRBUllfMixcclxuICAgICAgY2FzdC5mcmFtZXdvcmsudWkuQ29udHJvbHNCdXR0b24uUVVFVUVfTkVYVFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGJpbmRJbnRlcmNlcHRvcnMoKSB7XHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIuc2V0TWVzc2FnZUludGVyY2VwdG9yKFxyXG4gICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5NZXNzYWdlVHlwZS5MT0FELFxyXG4gICAgICB0aGlzLm9uTG9hZFJlcXVlc3QuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICAgIHRoaXMucGxheWVyTWFuYWdlci5zZXRNZXNzYWdlSW50ZXJjZXB0b3IoXHJcbiAgICAgIGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLk1lc3NhZ2VUeXBlLlBMQVksXHJcbiAgICAgIHRoaXMub25QbGF5LmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIuc2V0TWVzc2FnZUludGVyY2VwdG9yKFxyXG4gICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5NZXNzYWdlVHlwZS5QQVVTRSxcclxuICAgICAgdGhpcy5vblBhdXNlLmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIuc2V0TWVzc2FnZUludGVyY2VwdG9yKFxyXG4gICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5NZXNzYWdlVHlwZS5TRUVLLFxyXG4gICAgICB0aGlzLm9uU2Vlay5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gIH1cclxuICBiaW5kTWV0aG9kcygpIHtcclxuICAgIHRoaXMuYmluZEludGVyY2VwdG9ycyA9IHRoaXMuYmluZEludGVyY2VwdG9ycy5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbkxvYWRSZXF1ZXN0ID0gdGhpcy5vbkxvYWRSZXF1ZXN0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmF0dGFjaE1lZGlhID0gdGhpcy5hdHRhY2hNZWRpYS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5zdGFydCA9IHRoaXMuc3RhcnQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuYWRkUGxheWVyRXZlbnRzID0gdGhpcy5hZGRQbGF5ZXJFdmVudHMuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25UaW1lVXBkYXRlID0gdGhpcy5vblRpbWVVcGRhdGUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25QbGF5ID0gdGhpcy5vblBsYXkuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25QYXVzZSA9IHRoaXMub25QYXVzZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy51cGRhdGVQbGF5ZXJTdGF0ZSA9IHRoaXMudXBkYXRlUGxheWVyU3RhdGUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25FbmQgPSB0aGlzLm9uRW5kLmJpbmQodGhpcyk7XHJcbiAgfVxyXG4gIG9uTG9hZFJlcXVlc3QobG9hZFJlcXVlc3REYXRhKSB7XHJcbiAgICAvLyBJZiB0aGUgbG9hZFJlcXVlc3REYXRhIGlzIGluY29tcGxldGUgcmV0dXJuIGFuIGVycm9yIG1lc3NhZ2VcclxuICAgIC8vIGlmICghbG9hZFJlcXVlc3REYXRhIHx8ICFsb2FkUmVxdWVzdERhdGEubWVkaWEpIHtcclxuICAgIC8vICAgY29uc3QgZXJyb3IgPSBuZXcgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuRXJyb3JEYXRhKFxyXG4gICAgLy8gICAgIGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLkVycm9yVHlwZS5MT0FEX0ZBSUxFRFxyXG4gICAgLy8gICApO1xyXG4gICAgLy8gICBlcnJvci5yZWFzb24gPSBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5FcnJvclJlYXNvbi5JTlZBTElEX1JFUVVFU1Q7XHJcbiAgICAvLyAgIHJldHVybiBlcnJvcjtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyAvLyBjaGVjayBhbGwgY29udGVudCBzb3VyY2UgZmllbGRzIGZvciBhc3NldCBVUkwgb3IgSURcclxuICAgIC8vIGxldCBzb3VyY2UgPVxyXG4gICAgLy8gICBsb2FkUmVxdWVzdERhdGEubWVkaWEuY29udGVudFVybCB8fFxyXG4gICAgLy8gICBsb2FkUmVxdWVzdERhdGEubWVkaWEuZW50aXR5IHx8XHJcbiAgICAvLyAgIGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5jb250ZW50SWQ7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIlZQcmVjZWl2ZXJcIiwgbG9hZFJlcXVlc3REYXRhLm1lZGlhLmNvbnRlbnRJZCk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIlZQcmVjZWl2ZXIxXCIsIEhscy5pc1N1cHBvcnRlZCgpKTtcclxuICAgIHRoaXMudmlkZW9PYmplY3QuZmlsZSA9IGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5jb250ZW50SWQ7XHJcbiAgICB0aGlzLnZpZGVvT2JqZWN0LmR1cmF0aW9uID0gbG9hZFJlcXVlc3REYXRhLm1lZGlhLm1ldGFkYXRhLmR1cmF0aW9uO1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IGxvYWRSZXF1ZXN0RGF0YS5jdXJyZW50VGltZTtcclxuICAgIHRoaXMucGxheWJhY2tSYXRlID0gbG9hZFJlcXVlc3REYXRhLnBsYXliYWNrUmF0ZTtcclxuICAgIHRoaXMuYXV0b3BsYXkgPSBsb2FkUmVxdWVzdERhdGEuYXV0b3BsYXk7XHJcblxyXG4gICAgLy8gdHJ5IHtcclxuICAgIHRoaXMuY29uZmlnLnJlcGxheSA9XHJcbiAgICAgIHR5cGVvZiBsb2FkUmVxdWVzdERhdGEucmVwbGF5ICE9PSBcInVuZGVmaW5lZFwiXHJcbiAgICAgICAgPyBsb2FkUmVxdWVzdERhdGEucmVwbGF5XHJcbiAgICAgICAgOiB0cnVlO1xyXG4gICAgaWYgKFxyXG4gICAgICBsb2FkUmVxdWVzdERhdGEuY3VzdG9tRGF0YS52YXN0VXJsIHx8XHJcbiAgICAgIGxvYWRSZXF1ZXN0RGF0YS5jdXN0b21EYXRhLnZhc3RYbWxcclxuICAgICkge1xyXG4gICAgICAvLyB0aGlzLnBsYXllck1hbmFnZXIuc2V0TWVkaWFFbGVtZW50KHRoaXMudmlkZW8pO1xyXG4gICAgICB0aGlzLnZhc3RTZXJ2aWNlLmxvYWRBZHMoXHJcbiAgICAgICAgbG9hZFJlcXVlc3REYXRhLmN1c3RvbURhdGEudmFzdFVybCxcclxuICAgICAgICBsb2FkUmVxdWVzdERhdGEuY3VzdG9tRGF0YS52YXN0WG1sXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICAgIHRoaXMuZGVidWdUYWdzLkxPQURfUkVRVUVTVCxcclxuICAgICAgICBcIkxvYWRpbmcgYWQgZmluaXNoZWRcIlxyXG4gICAgICApO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH0gZWxzZSB0aGlzLmF0dGFjaE1lZGlhKCk7XHJcbiAgICAvLyB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgLy8gICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5lcnJvcih0aGlzLmRlYnVnVGFncy5MT0FEX1JFUVVFU1QpO1xyXG4gICAgLy8gICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5pbmZvKFxyXG4gICAgLy8gICAgIHRoaXMuZGVidWdUYWdzLkxPQURfUkVRVUVTVCxcclxuICAgIC8vICAgICBcIkNvbmZpZ1wiICsgSlNPTi5zdHJpbmdpZnkodGhpcy5jb25maWcpXHJcbiAgICAvLyAgICk7XHJcbiAgICAvLyAgIHRoaXMuYXR0YWNoTWVkaWEoKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICAgIC8vIElmIHRoZXJlIGlzIG5vIHNvdXJjZSBvciBhIG1hbGZvcm1lZCBJRCB0aGVuIHJldHVybiBhbiBlcnJvci5cclxuICAgIGlmICghc291cmNlIHx8IHNvdXJjZSA9PSBcIlwiIHx8ICFzb3VyY2UubWF0Y2goSURfUkVHRVgpKSB7XHJcbiAgICAgIGxldCBlcnJvciA9IG5ldyBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5FcnJvckRhdGEoXHJcbiAgICAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuRXJyb3JUeXBlLkxPQURfRkFJTEVEXHJcbiAgICAgICk7XHJcbiAgICAgIGVycm9yLnJlYXNvbiA9IGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLkVycm9yUmVhc29uLklOVkFMSURfUkVRVUVTVDtcclxuICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBzb3VyY2VJZCA9IHNvdXJjZS5tYXRjaChJRF9SRUdFWClbMV07XHJcblxyXG4gICAgLy8gQWRkIGJyZWFrcyB0byB0aGUgbWVkaWEgaW5mb3JtYXRpb24gYW5kIHNldCB0aGUgY29udGVudFVybFxyXG4gICAgcmV0dXJuIGFkZEJyZWFrcyhsb2FkUmVxdWVzdERhdGEubWVkaWEpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAvLyBJZiB0aGUgc291cmNlIGlzIGEgdXJsIHRoYXQgcG9pbnRzIHRvIGFuIGFzc2V0IGRvbid0IGZldGNoIGZyb20gYmFja2VuZFxyXG4gICAgICAgIGlmIChzb3VyY2VJZC5pbmNsdWRlcyhcIi5cIikpIHtcclxuICAgICAgICAgIGNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgICAgICAgTE9HX1JFQ0VJVkVSX1RBRyxcclxuICAgICAgICAgICAgXCJJbnRlcmNlcHRvciByZWNlaXZlZCBmdWxsIFVSTFwiXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgbG9hZFJlcXVlc3REYXRhLm1lZGlhLmNvbnRlbnRVcmwgPSBzb3VyY2U7XHJcbiAgICAgICAgICByZXR1cm4gbG9hZFJlcXVlc3REYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmV0Y2ggdGhlIGNvbnRlbnRVcmwgaWYgcHJvdmlkZWQgYW4gSUQgb3IgZW50aXR5IFVSTFxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgY2FzdERlYnVnTG9nZ2VyLmRlYnVnKExPR19SRUNFSVZFUl9UQUcsIFwiSW50ZXJjZXB0b3IgcmVjZWl2ZWQgSURcIik7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaE1lZGlhQnlJZChzb3VyY2VJZCkudGhlbigoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSBuZXcgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuR2VuZXJpY01lZGlhTWV0YWRhdGEoKTtcclxuICAgICAgICAgICAgbWV0YWRhdGEudGl0bGUgPSBpdGVtLnRpdGxlO1xyXG4gICAgICAgICAgICBtZXRhZGF0YS5zdWJ0aXRsZSA9IGl0ZW0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgIGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5jb250ZW50SWQgPSBpdGVtLnN0cmVhbS5kYXNoO1xyXG4gICAgICAgICAgICBsb2FkUmVxdWVzdERhdGEubWVkaWEuY29udGVudFR5cGUgPSBcImFwcGxpY2F0aW9uL2Rhc2greG1sXCI7XHJcbiAgICAgICAgICAgIGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5tZXRhZGF0YSA9IG1ldGFkYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gbG9hZFJlcXVlc3REYXRhO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGxldCBlcnJvciA9IG5ldyBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5FcnJvckRhdGEoXHJcbiAgICAgICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5FcnJvclR5cGUuTE9BRF9GQUlMRURcclxuICAgICAgICApO1xyXG4gICAgICAgIGVycm9yLnJlYXNvbiA9IGNhc3QuZnJhbWV3b3JrLm1lc3NhZ2VzLkVycm9yUmVhc29uLklOVkFMSURfUkVRVUVTVDtcclxuICAgICAgICBjYXN0RGVidWdMb2dnZXIuZXJyb3IoTE9HX1JFQ0VJVkVSX1RBRywgZXJyb3JNZXNzYWdlKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICBhZGRCcmVha3MobWVkaWFJbmZvcm1hdGlvbikge1xyXG4gICAgY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBMT0dfUkVDRUlWRVJfVEFHLFxyXG4gICAgICBcImFkZEJyZWFrczogXCIgKyBKU09OLnN0cmluZ2lmeShtZWRpYUluZm9ybWF0aW9uKVxyXG4gICAgKTtcclxuICAgIHJldHVybiBmZXRjaE1lZGlhQnlJZChcImZiYl9hZFwiKS50aGVuKChjbGlwMSkgPT4ge1xyXG4gICAgICBtZWRpYUluZm9ybWF0aW9uLmJyZWFrQ2xpcHMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6IFwiZmJiX2FkXCIsXHJcbiAgICAgICAgICB0aXRsZTogY2xpcDEudGl0bGUsXHJcbiAgICAgICAgICBjb250ZW50VXJsOiBjbGlwMS5zdHJlYW0uZGFzaCxcclxuICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL2Rhc2greG1sXCIsXHJcbiAgICAgICAgICB3aGVuU2tpcHBhYmxlOiA1LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBtZWRpYUluZm9ybWF0aW9uLmJyZWFrcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCJwcmUtcm9sbFwiLFxyXG4gICAgICAgICAgYnJlYWtDbGlwSWRzOiBbXCJmYmJfYWRcIl0sXHJcbiAgICAgICAgICBwb3NpdGlvbjogMCxcclxuICAgICAgICB9LFxyXG4gICAgICBdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGZldGNoTWVkaWFCeUlkKGlkKSB7XHJcbiAgICBjYXN0RGVidWdMb2dnZXIuZGVidWcoTE9HX1JFQ0VJVkVSX1RBRywgXCJmZXRjaGluZyBpZDogXCIgKyBpZCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChhY2NlcHQsIHJlamVjdCkgPT4ge1xyXG4gICAgICBmZXRjaChDT05URU5UX1VSTClcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgICAudGhlbigob2JqKSA9PiB7XHJcbiAgICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmpbaWRdKSB7XHJcbiAgICAgICAgICAgICAgYWNjZXB0KG9ialtpZF0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJlamVjdChgJHtpZH0gbm90IGZvdW5kIGluIHJlcG9zaXRvcnlgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVqZWN0KFwiQ29udGVudCByZXBvc2l0b3J5IG5vdCBmb3VuZC5cIik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlY2VpdmVyO1xyXG4iLCJpbXBvcnQgU2Vla0JhciBmcm9tIFwiLi9zZWVrYmFyXCI7XHJcbmltcG9ydCBUaW1lciBmcm9tIFwiLi90aW1lclwiO1xyXG5jbGFzcyBSZWNlaXZlckNvbnRyb2xzIHtcclxuICBjb25zdHJ1Y3RvcihpZCkge1xyXG4gICAgdGhpcy5zZWVrYmFyID0gbmV3IFNlZWtCYXIoXCIuc2Vla2Jhci1wcm9ncmVzc1wiKTtcclxuICAgIHRoaXMudGltZXIgPSBuZXcgVGltZXIoXCIudGltZXJcIik7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z2dlciA9IG51bGw7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlkKTtcclxuICAgIHRoaXMuc2hvdyA9IHRydWU7XHJcbiAgICB0aGlzLmxvYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubG9hZGVyXCIpO1xyXG4gICAgdGhpcy5wbGF5SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudnAtaWNvbi1wbGF5XCIpO1xyXG4gICAgdGhpcy5wYXVzZUljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZwLWljb24tcGF1c2VcIik7XHJcbiAgfVxyXG4gIHNldENhc3REZWJ1Z2dlcihjYXN0RGVidWdnZXIpIHtcclxuICAgIHRoaXMuY2FzdERlYnVnZ2VyID0gY2FzdERlYnVnZ2VyO1xyXG4gICAgdGhpcy5zZWVrYmFyLnNldENhc3REZWJ1Z2dlcih0aGlzLmNhc3REZWJ1Z2dlcik7XHJcbiAgfVxyXG4gIHBhdXNlKCkge1xyXG4gICAgdGhpcy5wYXVzZUljb24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgdGhpcy5wbGF5SWNvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMucGxheUljb24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfSwgMjAwMCk7XHJcbiAgfVxyXG4gIHBsYXkoKSB7XHJcbiAgICB0aGlzLnBsYXlJY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHRoaXMucGF1c2VJY29uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5wYXVzZUljb24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfSwgMjAwMCk7XHJcbiAgfVxyXG4gIHVwZGF0ZShzdGF0ZSkge1xyXG4gICAgdGhpcy5zZWVrYmFyLnNldFByb2dyZXNzKHN0YXRlLmN1cnJlbnRUaW1lLCBzdGF0ZS5kdXJhdGlvbik7XHJcbiAgICB0aGlzLnRpbWVyLnVwZGF0ZShzdGF0ZS5jdXJyZW50VGltZSwgc3RhdGUuZHVyYXRpb24pO1xyXG4gIH1cclxuICBoaWRlQ29udHJvbHModGltZSkge1xyXG4gICAgdGhpcy5zaG93ID0gZmFsc2U7XHJcbiAgICB0aGlzLnNob3dIaWRlKHRpbWUgfHwgNTAwMCk7XHJcbiAgfVxyXG4gIHNob3dDb250cm9scygpIHtcclxuICAgIHRoaXMuc2hvdyA9IHRydWU7XHJcbiAgICB0aGlzLnNob3dIaWRlKDEwKTtcclxuICB9XHJcbiAgc2hvd0hpZGUodGltaW5nKSB7XHJcbiAgICAvLyB0aGlzLmNhc3RkZWJ1Z2dlci5kZWJ1ZyhcInNob3dIaWRlXCIsIGAke3RpbWluZ30gJHt0aGlzLnNob3d9YCk7XHJcbiAgICBpZiAodGhpcy5zaG93KSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICB9LCB0aW1pbmcpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVjZWl2ZXJDb250cm9scztcclxuIiwiaW1wb3J0IFV0aWxzIGZyb20gXCIuLi9oZWxwZXJzL1V0aWxzXCI7XHJcblxyXG5jbGFzcyBUaW1lciB7XHJcbiAgY29uc3RydWN0b3IoaWQpIHtcclxuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaWQpO1xyXG4gICAgdGhpcy5lbGVtZW50LnRleHRDb250ZW50ID0gXCIwMDowMCAvIDAwOjAwXCI7XHJcbiAgfVxyXG4gIHVwZGF0ZShjdXJyZW50VGltZSwgZHVyYXRpb24pIHtcclxuICAgIHRoaXMuZWxlbWVudC50ZXh0Q29udGVudCA9IGAke1V0aWxzLmZvcm1hdFRpbWUoXHJcbiAgICAgIGN1cnJlbnRUaW1lXHJcbiAgICApfSAvJHtVdGlscy5mb3JtYXRUaW1lKGR1cmF0aW9uKX1gO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGltZXI7XHJcbiJdLCJuYW1lcyI6WyJ0aW1lIiwiaG91cnMiLCJNYXRoIiwiZmxvb3IiLCJtaW51dGVzIiwic2Vjb25kcyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJWYXN0U2VydmljZSIsImNvbnN0cnVjdG9yIiwicmVjZWl2ZXIiLCJ0aGlzIiwiYWRDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZHNEaXNwbGF5Q29udGFpbmVyIiwiYWRzTG9hZGVyIiwiYWRzRGlzcGxheUluaXRpYWxpemVkIiwiY3VycmVudEFkcyIsImluaXRpYWxpemVkIiwiYXV0b3BsYXlBbGxvd2VkIiwiYXV0b3BsYXlSZXF1aXJlc011dGVkIiwiaGFzRXJyb3JzIiwiaW5pdCIsImdvb2dsZSIsImltYSIsInNldHRpbmdzIiwic2V0VnBhaWRNb2RlIiwiSW1hU2RrU2V0dGluZ3MiLCJWcGFpZE1vZGUiLCJFTkFCTEVEIiwiQWREaXNwbGF5Q29udGFpbmVyIiwidmlkZW8iLCJBZHNMb2FkZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiQWRzTWFuYWdlckxvYWRlZEV2ZW50IiwiVHlwZSIsIkFEU19NQU5BR0VSX0xPQURFRCIsIm9uQWRzTWFuYWdlckxvYWRlZCIsImJpbmQiLCJBZEVycm9yRXZlbnQiLCJBRF9FUlJPUiIsIm9uQWRFcnJvciIsIm9uQWxsQWRzQ29tcGxldGVkIiwiZSIsImNhc3REZWJ1Z0xvZ2dlciIsImRlYnVnIiwiREVCVUdfVkFTVF9TRVJWSUNFIiwib25BZENvbXBsZXRlZCIsImFkc01hbmFnZXIiLCJkZXN0cm95Iiwib25FbmQiLCJvbkNvbnRlbnRQYXVzZVJlcXVlc3RlZCIsIm9uQ29udGVudFJlc3VtZVJlcXVlc3RlZCIsIm9uQWRMb2FkZWQiLCJsb2FkQWRzIiwidmFzdFVybCIsInZhc3RYbWwiLCJjb250ZW50IiwidHlwZSIsImN1cnJlbnRBZEluZGV4IiwibG9hZCIsImFkc1JlcXVlc3QiLCJBZHNSZXF1ZXN0IiwiYWRUYWdVcmwiLCJhZHNSZXNwb25zZSIsImxpbmVhckFkU2xvdFdpZHRoIiwiY2xpZW50V2lkdGgiLCJsaW5lYXJBZFNsb3RIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJub25MaW5lYXJBZFNsb3RXaWR0aCIsIm5vbkxpbmVhckFkU2xvdEhlaWdodCIsInNldEFkV2lsbEF1dG9QbGF5Iiwic2V0QWRXaWxsUGxheU11dGVkIiwidmFzdExvYWRUaW1lb3V0IiwicmVxdWVzdEFkcyIsIm9uVGltZVVwZGF0ZSIsIm9uQWRTa2lwIiwib25BZFN0YXJ0ZWQiLCJhZHNNYW5hZ2VyTG9hZGVkRXZlbnQiLCJhZHNSZW5kZXJpbmdTZXR0aW5ncyIsIkFkc1JlbmRlcmluZ1NldHRpbmdzIiwiZ2V0QWRzTWFuYWdlciIsIkFkRXZlbnQiLCJDT05URU5UX1BBVVNFX1JFUVVFU1RFRCIsIkNPTlRFTlRfUkVTVU1FX1JFUVVFU1RFRCIsIkFMTF9BRFNfQ09NUExFVEVEIiwiTE9BREVEIiwiU1RBUlRFRCIsIkNPTVBMRVRFIiwiU0tJUFBFRCIsIkFEX1BST0dSRVNTIiwiQURfQlVGRkVSSU5HIiwibG9hZGluZyIsIlJFU1VNRUQiLCJldmVudCIsInBhdXNlZCIsInBsYXllciIsInZpZGVvQ29udHJvbHMiLCJwbGF5UGF1c2VCdXR0b24iLCJ1cGRhdGUiLCJzaG93T3ZlcmxheUhvdmVyIiwiY3NzQ2xhc3NlcyIsImljb25zIiwicGxheSIsImdldEN1cnJlbnRBZCIsInBsYXliYWNrU3RhcnRlZCIsIlV0aWxzIiwiZmlyZSIsIkV2ZW50cyIsImFkRXZlbnRzIiwiQURfUExBWSIsImN1cnJlbnRUaW1lIiwicmVzdW1lIiwiYWZ0ZXJQYXVzZSIsImFkUGxheUlkIiwiZ2V0QWRJZCIsImJlZ2luIiwiU0tJUFBBQkxFX1NUQVRFX0NIQU5HRUQiLCJBRF9TS0lQUEFCTEUiLCJwbGF5QWRzIiwiaW5pdGlhbGl6ZSIsIndpZHRoIiwiaGVpZ2h0IiwiaXNBZFBsYXlpbmciLCJWaWV3TW9kZSIsIkZVTExTQ1JFRU4iLCJzdGFydCIsInJlY2VpdmVyQ29udHJvbHMiLCJsb2FkZXIiLCJzdHlsZSIsImRpc3BsYXkiLCJhZEVycm9yIiwiY29uc29sZSIsImxvZyIsInBhdXNlIiwidnBSZWNlaXZlciIsImlkIiwiY29uZmlnIiwiY29udGV4dCIsInBsYXllck1hbmFnZXIiLCJhcHBJZCIsInBsYXliYWNrQ29uZmlnIiwiY29udHJvbHMiLCJobHMiLCJ2aWRlb09iamVjdCIsInZpZGVvQ29udGFpbmVyIiwicGFyZW50RWxlbWVudCIsInBsYXliYWNrUmF0ZSIsImF1dG9wbGF5Iiwic2Vla2JhciIsImVsZW1lbnQiLCJjYXN0ZGVidWdnZXIiLCJzaG93Iiwic2V0Q2FzdERlYnVnZ2VyIiwic2V0UHJvZ3Jlc3MiLCJkdXJhdGlvbiIsInNob3dIaWRlIiwidGltaW5nIiwic2V0VGltZW91dCIsInRpbWVyIiwidGV4dENvbnRlbnQiLCJjYXN0RGVidWdnZXIiLCJwbGF5SWNvbiIsInBhdXNlSWNvbiIsInN0YXRlIiwiaGlkZUNvbnRyb2xzIiwic2hvd0NvbnRyb2xzIiwibWVkaWFNYW5hZ2VyIiwiY2FzdFJlY2VpdmVyTWFuYWdlciIsInZpZGVvU3RhcnRlZCIsInZhc3RTZXJ2aWNlIiwiZGVidWdUYWdzIiwiTE9BRF9SRVFVRVNUIiwiQVRUQUNIX01FRElBIiwiT05QTEFZIiwiU1RBUlQiLCJvblBsYXkiLCJnZXRBdHRyaWJ1dGUiLCJ0aGVuIiwiY2F0Y2giLCJvblBhdXNlIiwiYWRkUGxheWVyRXZlbnRzIiwicmVwbGF5IiwiYXR0YWNoTWVkaWEiLCJ1cGRhdGVQbGF5ZXJTdGF0ZSIsIkhMU3N1cHBvcnRlZCIsIkhscyIsImlzU3VwcG9ydGVkIiwiSlNPTiIsInN0cmluZ2lmeSIsImZpbGUiLCJlbmRzV2l0aCIsInNyYyIsIm9uIiwiTUVESUFfQVRUQUNIRUQiLCJzdGFydExldmVsIiwibG9hZFNvdXJjZSIsIk1BTklGRVNUX1BBUlNFRCIsImRhdGEiLCJFUlJPUiIsImRldGFpbHMiLCJlcnJvciIsImZha2Vpbml0IiwibWVzc2FnZSIsImJpbmRNZXRob2RzIiwiY2FzdCIsImZyYW1ld29yayIsIkNhc3RSZWNlaXZlckNvbnRleHQiLCJnZXRJbnN0YW5jZSIsInNldExvZ2dlckxldmVsIiwiTG9nZ2VyTGV2ZWwiLCJERUJVRyIsImdldFBsYXllck1hbmFnZXIiLCJzZXRNZWRpYUVsZW1lbnQiLCJDYXN0RGVidWdMb2dnZXIiLCJzZXRFbmFibGVkIiwiYmluZEludGVyY2VwdG9ycyIsIm9uU2VlayIsInJlcXVlc3REYXRhIiwiZHJhd0J1dHRvbnMiLCJhc3NpZ25CdXR0b24iLCJ1aSIsIkNvbnRyb2xzU2xvdCIsIlNMT1RfU0VDT05EQVJZXzEiLCJDb250cm9sc0J1dHRvbiIsIlFVRVVFX1BSRVYiLCJTTE9UX1BSSU1BUllfMSIsIkNBUFRJT05TIiwiU0xPVF9QUklNQVJZXzIiLCJTRUVLX0ZPUldBUkRfMTUiLCJTTE9UX1NFQ09OREFSWV8yIiwiUVVFVUVfTkVYVCIsInNldE1lc3NhZ2VJbnRlcmNlcHRvciIsIm1lc3NhZ2VzIiwiTWVzc2FnZVR5cGUiLCJMT0FEIiwib25Mb2FkUmVxdWVzdCIsIlBMQVkiLCJQQVVTRSIsIlNFRUsiLCJsb2FkUmVxdWVzdERhdGEiLCJtZWRpYSIsImNvbnRlbnRJZCIsIm1ldGFkYXRhIiwiY3VzdG9tRGF0YSIsImFkZEJyZWFrcyIsIm1lZGlhSW5mb3JtYXRpb24iLCJMT0dfUkVDRUlWRVJfVEFHIiwiZmV0Y2hNZWRpYUJ5SWQiLCJjbGlwMSIsImJyZWFrQ2xpcHMiLCJ0aXRsZSIsImNvbnRlbnRVcmwiLCJzdHJlYW0iLCJkYXNoIiwiY29udGVudFR5cGUiLCJ3aGVuU2tpcHBhYmxlIiwiYnJlYWtzIiwiYnJlYWtDbGlwSWRzIiwicG9zaXRpb24iLCJQcm9taXNlIiwiYWNjZXB0IiwicmVqZWN0IiwiZmV0Y2giLCJDT05URU5UX1VSTCIsInJlc3BvbnNlIiwianNvbiIsIm9iaiIsIndpbmRvdyJdLCJzb3VyY2VSb290IjoiIn0=