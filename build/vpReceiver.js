(()=>{var e={782:e=>{e.exports={adTimeSliderColor:"yellow",timeSliderColor:"#194694"}},468:e=>{e.exports=class{constructor(e){this.receiver=e,this.enable=this.enable.bind(this),this.disable=this.disable.bind(this)}enable(){console.log(this.receiver.config.adTimeSliderColor),this.receiver.receiverControls.seekbar.setColor(this.receiver.config.adTimeSliderColor)}disable(){this.receiver.receiverControls.seekbar.setColor(this.receiver.config.timeSliderColor)}}}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=s(782),t=s.n(e);const i={debug:!1,maxBufferSize:20971520,maxLoadingDelay:2,nudgeMaxRetry:2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:2e3,emeEnabled:!0,widevineLicenseUrl:"https://widevine-dash.ezdrm.com/widevine-php/widevine-foreignkey.php?pX=90FC04"},a=e=>{if(!e)return"00:00";let t=Math.floor(e/3600),s=Math.floor((e-3600*t)/60),i=Math.floor(e%60);return t?t.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0"):s.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")},r=class{constructor(e,t){this.seekbar=new class{constructor(e){this.element=document.querySelector(e),this.castdebugger=null,this.show=!1,this.speed=30,this.interval=null,this.cancelAnimation=!1,this.initialLeftPosition=this.element.style.left}setCastDebugger(e){this.castdebugger=e}setProgress(e,t){this.element.style.width=e/t*100+"%"}showHide(e){this.castdebugger.debug("showHide",`${e} ${this.show}`),this.show?this.element.parentElement.style.display="block":setTimeout((()=>{this.element.parentElement.style.display="none"}),e)}setColor(e){this.element.style.backgroundColor=e}animateSeekbar(){this.element.style.position="absolute";let e=this.element.parentElement.clientWidth;const t=()=>{try{let s=this.element.getBoundingClientRect().left,i=(this.element.parentElement.getBoundingClientRect().right,this.element.parentElement.getBoundingClientRect().left),a=this.element.parentElement.getBoundingClientRect().right;if(this.element.clientWidth<=e/4&&s<=i?this.element.style.width=`${this.element.clientWidth+this.speed}px`:s+this.element.clientWidth<a?this.element.style.left=`${s+this.speed}px`:s<a?(this.element.style.left=`${s+this.speed}px`,this.element.style.width=this.element.clientWidth-this.speed+"px"):(this.element.style.left=`${i}px`,this.element.style.width="0px"),this.cancelAnimation)return;window.requestAnimationFrame(t)}catch(e){console.log(e),console.log(e.toString())}};window.requestAnimationFrame(t)}reset(){this.cancelAnimation=!0,this.element.style.width="0%",this.element.style.left=this.initialLeftPosition,this.element.style.position="relative"}}(".seekbar-progress"),this.timer=new class{constructor(e){this.element=document.querySelector(e),this.element.textContent="00:00 / 00:00"}update(e,t){this.element.textContent=`${a(e)} /${a(t)}`}}(".timer"),this.castDebugger=null,this.element=document.querySelector(e),this.overlay=this.element.parentElement,this.info=this.overlay.children[0],this.show=!0,this.loader=document.querySelector(".loader"),this.playIcon=document.querySelector(".vp-icon-play"),this.pauseIcon=document.querySelector(".vp-icon-pause"),this.videoInfo=document.querySelector(".video-info"),this.splashScreen=document.querySelector(".splash-screen"),this.thumbnail=document.querySelector("#thumbnail"),this.receiver=t}setCastDebugger(e){this.castDebugger=e,this.seekbar.setCastDebugger(this.castDebugger)}pause(){this.pauseIcon.style.display="none",this.playIcon.style.display="block",setTimeout((()=>{this.playIcon.style.display="none"}),2e3)}play(){this.playIcon.style.display="none",this.pauseIcon.style.display="block",setTimeout((()=>{this.pauseIcon.style.display="none"}),2e3)}update(e){this.seekbar.setProgress(e.currentTime,e.duration),this.timer.update(e.currentTime,e.duration)}hideControls(e){this.show=!1,this.showHide(e||5e3)}showControls(){this.show=!0,this.showHide(10)}resetOverlay(e){const t=()=>{this.seekbar.reset(),this.info.style.display="none"};return e?t():setTimeout(t,3e3)}showHide(e){this.show?this.element.style.display="flex":setTimeout((()=>{this.element.style.display="none"}),e)}initOverlay(e){this.splashScreen.style.display="none",this.overlay.style.display="block";try{e.images.length>0&&e&&(this.thumbnail.src=e.images[0].url,this.videoInfo.children[0].textContent=e.title,this.videoInfo.children[1].textContent=e.description),this.seekbar.animateSeekbar()}catch(e){}}};var o=s(468),n=s.n(o);class d{static DEBUG_VAST_SERVICE="DEBUG_VAST_SERVICE";constructor(e){this.receiver=e,this.adContainer=document.querySelector(".adContainer"),this.adsDisplayContainer=null,this.adsLoader=null,this.adsDisplayInitialized=!1,this.currentAds=null,this.initialized=!1,this.autoplayAllowed=!1,this.autoplayRequiresMuted=!1,this.hasErrors=!1,this.adUI=null,this.adDuration=0}init(){this.initialized=!0,google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adsDisplayContainer=new google.ima.AdDisplayContainer(this.adContainer,this.receiver.video),this.adsLoader=new google.ima.AdsLoader(this.adsDisplayContainer),this.adsLoader.getSettings().setPlayerType("cast/client-side"),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1),this.adUI=new(n())(this.receiver)}onAllAdsCompleted(e){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"ad completed")}onAdCompleted(e){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"ad completed"),this.adUI.disable(),this.adsManager&&this.adsManager.destroy(),!this.hasErrors&&this.receiver.isAdPlaying&&this.receiver.onEnd()}onContentPauseRequested(e){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"Content Pause Request")}onContentResumeRequested(){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"Content Resume Request")}onAdLoaded(e){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"Ad loaded")}loadAds(e,t){this.currentAds={},this.initialized||this.init(),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"load "+e),e?(this.currentAds.content=e,this.currentAds.type="url"):t&&(this.currentAds.content=t,this.currentAds.type="xml"),this.currentAds.currentAdIndex=0,this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE),"url"===this.currentAds.type?this.load(this.currentAds.content):this.load(null,this.currentAds.content)}load(e,t){if(this.initialized||this.init(),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"Initialized"+this.vastUrl),this.adsRequest=new google.ima.AdsRequest,e)this.adsRequest.adTagUrl=e;else{if(!t)return;this.adsRequest.adsResponse=t}this.adsRequest.linearAdSlotWidth=this.receiver.video.clientWidth,this.adsRequest.linearAdSlotHeight=this.receiver.video.clientHeight,this.adsRequest.nonLinearAdSlotWidth=this.receiver.video.clientWidth,this.adsRequest.nonLinearAdSlotHeight=this.receiver.video.clientHeight/3,this.adsRequest.setAdWillAutoPlay(this.autoplayAllowed),this.adsRequest.setAdWillPlayMuted(this.autoplayRequiresMuted),this.adsRequest.vastLoadTimeout=8e3,this.adsLoader.requestAds(this.adsRequest)}onTimeUpdate(e){const t=e.getAdData();this.adsManager.getCurrentAd()?.getAdId()?.toString(),this.receiver.receiverControls.update({currentTime:t.currentTime,duration:t.duration}),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," ON TIME UPDATE")}onAdSkip(e){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"ON AD Ski")}onAdStarted(e){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"ON AD STARTED"),this.receiver.isAdPlaying=!0,this.adUI.enable()}onAdsManagerLoaded(e){this.adsManager&&this.adsManager.destroy(),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," before getadsmanager");const t=new google.ima.AdsRenderingSettings;this.adsManager=e.getAdsManager(this.receiver.video,t),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after getadsmanager"),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after onaderror"),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after onContentPauseRequested"),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after onAllAdsCompleted"),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after onAdLoaded"),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after onAdStarted"),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after onAdCompleted"),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdCompleted.bind(this)),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after onContentPauseRequested"),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdSkip.bind(this)),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after onAdSkip"),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,this.onTimeUpdate.bind(this)),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," after onTimeUpdate"),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BUFFERING,(()=>{this.loading=!0})),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(()=>{Utils.fire(this.adContainer,Events.adEvents.AD_SKIPPABLE,{currentTime:this.player.video.currentTime,adPlayId:this.adsManager.getCurrentAd()?.getAdId()})})),this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," just before playing ad"),this.playAds()}playAds(){this.adsDisplayInitialized||(this.adsDisplayContainer.initialize(),this.adsDisplayInitialized=!0);const e=this.receiver.video.clientWidth,t=this.receiver.video.clientHeight;try{this.receiver.isAdPlaying=!0,this.adsManager.init(e,t,google.ima.ViewMode.FULLSCREEN),this.adsManager.start(),this.receiver.receiverControls.loader.style.display="none"}catch(e){this.receiver.castDebugLogger.debug(this.VastService.DEBUG_VAST_SERVICE,"AdsManager could not be started"+e.getMessage())}}onAdError(e){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE," ad error"+e),this.hasErrors=!0,this.receiver.onEnd().bind(this.receiver)}resume(){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"RESUMING AD Event"),this.adsManager&&this.adsManager.resume()}pause(){this.receiver.castDebugLogger.debug(d.DEBUG_VAST_SERVICE,"PAUSE AD Event"),this.adsManager&&this.adsManager.pause()}}const h=d;console.log("isDevelopment",!1);const l=!1;function g(e,s){let a=new class{constructor(e,s){this.context=null,this.playerManager=null,this.castDebugLogger=null,this.appId=s.appId,this.video=document.querySelector(e),this.playbackConfig=null,this.controls=null,this.hls=null,this.videoObject={},this.videoContainer=this.video.parentElement,this.playbackRate=1,this.autoplay=!1,this.receiverControls=new r(".controls",this),this.mediaManager=null,this.castReceiverManager=null,this.videoStarted=!1,this.vastService=new h(this),this.config={},this.adBreaks=[],this.debugTags={LOAD_REQUEST:"LOAD_REQUEST",ATTACH_MEDIA:"ATTACH_MEDIA",ONPLAY:"ON_PLAY",START:"START",INIT:"INIT",EVENTS:"EVENTS",ONEND:"ONEND",BROADCAST:"BROADCAST",ONTIMEUPDATEE:"ONTIMEUPDATE",INITSTATE:"INITSTATE"},this.config={...t(),...s},this.isAdPlaying=!1,this.NAMESPACE="urn:x-cast:tech.gjirafa.vp-service",this.receiverControls=new r(".controls",this)}start(){this.receiverControls.resetOverlay(),this.castDebugLogger.debug(this.debugTags.START,"Starting video..."),this.broadcast(this.debugTags.START+"Starting video..."),this.onPlay()}onPlay(e){this.castDebugLogger.debug("on play",this.video.getAttribute("src")),this.broadcast("on play"+this.video.getAttribute("src")),this.castDebugLogger.debug("isadplaying",this.isAdPlaying),this.isAdPlaying?this.vastService.resume():this.video.play().then((()=>(this.videoStarted?this.receiverControls.play():(this.receiverControls.showControls(),this.videoStarted=!0),this.receiverControls.show=!1,this.receiverControls.showHide(2e3),e))).catch((e=>{this.onPause(),this.castDebugLogger.debug(this.debugTags.ONPLAY," Couldn't play video.Tring one more time "+e),this.broadcast(" Couldn't play video.Tring one more time "+e.toString())}))}onPause(e){return this.isAdPlaying?this.vastService.pause():this.video.pause(),this.receiverControls.pause(),this.receiverControls.showControls(),e}addPlayerEvents(){this.video.addEventListener("timeupdate",this.onTimeUpdate),this.video.addEventListener("ended",this.onEnd.bind(this))}broadcast(e,t){this.castDebugLogger.debug(this.debugTags.BROADCAST,l),t&&(this.castDebugLogger.debug(this.debugTags.BROADCAST,e),this.context&&this.context.sendCustomMessage(this.NAMESPACE,void 0,e))}onEnd(){this.castDebugLogger.debug("on End",this.config.replay);try{this.isAdPlaying?(this.broadcast({message:"Ad finished",code:2,time:this.currentTime},!0),this.hls&&this.hls.destroy(),this.isAdPlaying=!1):this.broadcast({message:"Video finished",code:3},!0)}catch(e){this.castDebugLogger.error(this.debugTags.ONEND," Error"+e.toString())}return null}onTimeUpdate(){if(!this.isAdPlaying){try{if(this.adBreaks.map((e=>e.breakTimingValue)).includes(Math.floor(this.video.currentTime))&&!this.isAdPlaying)return this.broadcast(this.adBreaks),this.onPause(),this.currentTime=Math.floor(this.video.currentTime),this.isAdPlaying=!0,this.vastService.loadAds(this.adBreaks[0].adTagUrl[0]),this.hls&&this.hls.destroy(),void this.adBreaks.shift()}catch(e){this.castDebugLogger.error(this.debugTags.ONTIMEUPDATE,e.toString())}this.receiverControls.update(this.updatePlayerState())}}updatePlayerState(){return{currentTime:this.video.currentTime,duration:this.videoObject.duration||this.video.duration}}attachMedia(){if(vpReceiver.HLSsupported=Hls.isSupported(),this.castDebugLogger.debug("inside attach media",vpReceiver.HLSsupported),this.video.playbackRate=1,this.castDebugLogger.debug("video file",JSON.stringify(this.video,["id","className","tagName"])),this.broadcast({message:"video file"+JSON.stringify(this.video,["id","className","tagName"])}),this.videoObject.file.endsWith("mp4"))this.castDebugLogger.debug("inside mp4",this.videoObject.file),this.video.src=this.videoObject.file,this.start();else if(vpReceiver.HLSsupported){this.castDebugLogger.debug("inside hlssupported",this.videoObject.file);try{this.hls=new Hls(i),this.castDebugLogger.debug("hls initialized",this.videoObject.file),this.broadcast({message:"hls initialized "+this.videoObject.file}),console.log("attachMedia "+this.currentTime),this.hls.on(Hls.Events.MEDIA_ATTACHED,(()=>{this.castDebugLogger.debug("amedia attached",this.videoObject.file),this.castDebugLogger.debug("loading source hlssupported",this.videoObject.file),this.currentTime>0&&(this.video.currentTime=this.currentTime),this.hls.loadSource(this.videoObject.file)})),this.hls.on(Hls.Events.MANIFEST_PARSED,((e,t)=>{this.castDebugLogger.debug("manifest parsed",this.videoObject.file),this.currentTime>0&&(this.video.currentTime=this.currentTime),this.start()})),this.hls.on(Hls.Events.ERROR,((e,t)=>{this.castDebugLogger.debug("HLS  ERROR",t.details)})),this.hls.attachMedia(this.video)}catch(e){}}this.castDebugLogger.debug("finished attach media")}fakeinit(){let e=this;this.castDebugLogger={debug:function(t,s){"object"==typeof s&&2==s.code&&(e.video.currentTime=s.time,setTimeout((()=>{e.attachMedia()}),700)),console.log(t,s)},error:function(e,t){console.log(e,t)}},this.receiverControls.setCastDebugger(this.castDebugLogger),this.videoObject.file="https://vp.gjirafa.net/vps/prod/odgehtyo/encode/vjsmyjhs/hls/master_file.m3u8",this.videoObject.duration=119,this.receiverControls.seekbar.animateSeekbar(),this.receiverControls.initOverlay({title:"Some title",images:[{url:"https://liki.gjirafa.com/api/media/gjvideo/yqz0gq/retina.jpg"}]}),this.adBreaks=[{breakType:"midroll",adTagUrl:["https://vp-dev.gjirafa.net/vps/content/vast/preroll-2.xml"],breakTimingType:"time",breakTimingValue:15},{breakType:"midroll",adTagUrl:["https://vp-dev.gjirafa.net/vps/content/vast/preroll-2.xml"],breakTimingType:"time",breakTimingValue:30}],setTimeout((()=>{this.attachMedia()}),5e3),this.bindMethods(),this.addPlayerEvents()}init(){this.context=cast.framework.CastReceiverContext.getInstance(),this.context.setLoggerLevel(cast.framework.LoggerLevel.DEBUG),this.castDebugLogger=cast.debug.CastDebugLogger.getInstance(),this.castDebugLogger.setEnabled(l),this.castDebugLogger.debug(this.debugTags.INIT,"castdebugger initialized"),this.playerManager=this.context.getPlayerManager(),this.playerManager.setMediaElement(this.video),this.playerManager.setSupportedMediaCommands(cast.framework.messages.Command.SEEK|cast.framework.messages.Command.PAUSE|cast.framework.messages.Command.PLAY),cast.framework.ui.Controls.getInstance();const e=new cast.framework.ui.BrowseItem;e.title="Title 1",e.subtitle="Subtitle 1",e.duration=300,e.imageType=cast.framework.ui.BrowseImageType.MUSIC_TRACK,e.image=new cast.framework.messages.Image("1.jpg"),e.entity="example://gizmos/1";const t=new cast.framework.ui.BrowseItem;t.title="Title 2",t.subtitle="Subtitle 2",t.duration=100,t.imageType=cast.framework.ui.BrowseImageType.MUSIC_TRACK,t.image=new cast.framework.messages.Image("2.jpg"),t.entity="example://gizmos/2";const s=[e,t],i=new cast.framework.ui.BrowseContent;i.title="Up Next",i.items=s,this.receiverControls.setCastDebugger(this.castDebugLogger);const a=new cast.framework.CastReceiverOptions;a.customNamespaces={},a.customNamespaces[this.NAMESPACE]=cast.framework.system.MessageType.JSON,this.context.start(a),this.bindMethods(),this.bindInterceptors(),this.addPlayerEvents()}onSeek(e){this.broadcast(e.toString()),this.video.currentTime=e.currentTime,this.receiverControls.showControls(),this.receiverControls.hideControls(6e3),this.receiverControls.update(this.updatePlayerState())}drawButtons(){this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_SECONDARY_1,cast.framework.ui.ControlsButton.QUEUE_PREV),this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_PRIMARY_1,cast.framework.ui.ControlsButton.CAPTIONS),this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_PRIMARY_2,cast.framework.ui.ControlsButton.SEEK_FORWARD_15),this.controls.assignButton(cast.framework.ui.ControlsSlot.SLOT_SECONDARY_2,cast.framework.ui.ControlsButton.QUEUE_NEXT)}bindInterceptors(){this.context.addEventListener(cast.framework.system.EventType.SENDER_DISCONNECTED,(e=>{window.close()})),this.context.addCustomMessageListener(this.NAMESPACE,(e=>{this.castDebugLogger.debug(this.debugTags.EVENTS,"addCustomMessageListener"+e.data),2==JSON.parse(e.data).code&&this.attachMedia()})),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.LOAD,this.onLoadRequest.bind(this)),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.PLAY,this.onPlay.bind(this)),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.PAUSE,this.onPause.bind(this)),this.playerManager.setMessageInterceptor(cast.framework.messages.MessageType.SEEK,this.onSeek.bind(this))}bindMethods(){this.bindInterceptors=this.bindInterceptors.bind(this),this.onLoadRequest=this.onLoadRequest.bind(this),this.attachMedia=this.attachMedia.bind(this),this.start=this.start.bind(this),this.addPlayerEvents=this.addPlayerEvents.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.updatePlayerState=this.updatePlayerState.bind(this),this.onEnd=this.onEnd.bind(this),this.initState=this.initState.bind(this)}initState(){this.castDebugLogger.debug(this.debugTags.INITSTATE,"initState"),this.hls=null,this.currentTime=0,this.video.currentTime=0,this.receiverControls.resetOverlay(!0)}onLoadRequest(e){this.hls&&(this.hls.destroy(),this.vastService.adUI.disable(),this.initState()),this.receiverControls.initOverlay(e.media.metadata),this.castDebugLogger.debug("VPreceiver",e.media.contentId),this.castDebugLogger.debug("VPreceiver1",Hls.isSupported()),this.videoObject.file=e.media.contentId,this.videoObject.duration=e.media.metadata.duration,this.currentTime=e.currentTime,this.playbackRate=e.playbackRate,this.autoplay=e.autoplay,e.requireAds&&(this.adBreaks=e.customData.adBreaks),this.config.replay=void 0===e.replay||e.replay;try{this.attachMedia(),this.receiverControls.update(this.updatePlayerState()),this.broadcast({message:"attaching media"})}catch(e){this.broadcast({message:e.toString(),stack:e.stack})}return null}addBreaks(e){return castDebugLogger.debug(LOG_RECEIVER_TAG,"addBreaks: "+JSON.stringify(e)),fetchMediaById("fbb_ad").then((t=>{e.breakClips=[{id:"fbb_ad",title:t.title,contentUrl:t.stream.dash,contentType:"application/dash+xml",whenSkippable:5}],e.breaks=[{id:"pre-roll",breakClipIds:["fbb_ad"],position:0}]}))}fetchMediaById(e){return castDebugLogger.debug(LOG_RECEIVER_TAG,"fetching id: "+e),new Promise(((t,s)=>{fetch(CONTENT_URL).then((e=>e.json())).then((i=>{i?i[e]?t(i[e]):s(`${e} not found in repository`):s("Content repository not found.")}))}))}}(e,s);return a.init(),g.receiver=a,a}g.HLSsupported=!1,window.vpReceiver=g})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUUxQkUsZUFBZSxVQUFVM0csTUFBTTRHLElBQ3BDSCxFQUFpQkksV0FBYSxDQUM1QixDQUNFNVQsR0FBSSxTQUNKaUUsTUFBTzBQLEVBQU0xUCxNQUNiNFAsV0FBWUYsRUFBTUcsT0FBT0MsS0FDekJDLFlBQWEsdUJBQ2JDLGNBQWUsSUFJbkJULEVBQWlCVSxPQUFTLENBQ3hCLENBQ0VsVSxHQUFJLFdBQ0ptVSxhQUFjLENBQUMsVUFDZjNTLFNBQVUsT0FLbEJrUyxlQUFlMVQsR0FHYixPQUZBdUcsZ0JBQWdCM0gsTUFBTTZVLGlCQUFrQixnQkFBa0J6VCxHQUVuRCxJQUFJb1UsU0FBUSxDQUFDQyxFQUFRQyxLQUMxQkMsTUFBTUMsYUFDSHpILE1BQU0wSCxHQUFhQSxFQUFTQyxTQUM1QjNILE1BQU14TyxJQUNEQSxFQUNFQSxFQUFJeUIsR0FDTnFVLEVBQU85VixFQUFJeUIsSUFFWHNVLEVBQVEsR0FBRXRVLDZCQUdac1UsRUFBTyx5Q0RsZVd0VSxFQUFJL0MsR0FHaEMsT0FGQVAsRUFBU3FJLE9BQ1Q4RixFQUFXbk8sU0FBV0EsRUFDZkEsRUFOVG1PLEVBQVdvRCxjQUFlLEVBUzFCaE0sT0FBTzRJLFdBQWFBLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy9jb25maWcvZGVmYXVsdENvbmZpZy5qcyIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy9tb2RlbHMvYWRVSS5qcyIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdnAtcmVjZWl2ZXIvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy9jb25maWcvaGxzQ29uZmlnLmpzIiwid2VicGFjazovL3ZwLXJlY2VpdmVyLy4vc3JjL2pzL2hlbHBlcnMvVXRpbHMuanMiLCJ3ZWJwYWNrOi8vdnAtcmVjZWl2ZXIvLi9zcmMvanMvbW9kZWxzL3JlY2VpdmVyLWNvbnRyb2xzLmpzIiwid2VicGFjazovL3ZwLXJlY2VpdmVyLy4vc3JjL2pzL21vZGVscy9zZWVrYmFyLmpzIiwid2VicGFjazovL3ZwLXJlY2VpdmVyLy4vc3JjL2pzL21vZGVscy90aW1lci5qcyIsIndlYnBhY2s6Ly92cC1yZWNlaXZlci8uL3NyYy9qcy9tb2RlbHMvdmFzdFNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vdnAtcmVjZWl2ZXIvLi9zcmMvanMvY29uZmlnL2Vudmlyb25tZW50LmpzIiwid2VicGFjazovL3ZwLXJlY2VpdmVyLy4vc3JjL2pzL3ZwUmVjZWl2ZXIuanMiLCJ3ZWJwYWNrOi8vdnAtcmVjZWl2ZXIvLi9zcmMvanMvbW9kZWxzL3JlY2VpdmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRlZmF1bENvbmZpZyA9IHtcclxuICBhZFRpbWVTbGlkZXJDb2xvcjogXCJ5ZWxsb3dcIixcclxuICB0aW1lU2xpZGVyQ29sb3I6IFwiIzE5NDY5NFwiLFxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWxDb25maWc7XHJcbiIsImNsYXNzIEFkVUkge1xyXG4gIGNvbnN0cnVjdG9yKHJlY2VpdmVyKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyID0gcmVjZWl2ZXI7XHJcbiAgICB0aGlzLmVuYWJsZSA9IHRoaXMuZW5hYmxlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmRpc2FibGUgPSB0aGlzLmRpc2FibGUuYmluZCh0aGlzKTtcclxuICB9XHJcbiAgZW5hYmxlKCkge1xyXG4gICAgY29uc29sZS5sb2codGhpcy5yZWNlaXZlci5jb25maWcuYWRUaW1lU2xpZGVyQ29sb3IpO1xyXG4gICAgdGhpcy5yZWNlaXZlci5yZWNlaXZlckNvbnRyb2xzLnNlZWtiYXIuc2V0Q29sb3IoXHJcbiAgICAgIHRoaXMucmVjZWl2ZXIuY29uZmlnLmFkVGltZVNsaWRlckNvbG9yXHJcbiAgICApO1xyXG4gIH1cclxuICBkaXNhYmxlKCkge1xyXG4gICAgdGhpcy5yZWNlaXZlci5yZWNlaXZlckNvbnRyb2xzLnNlZWtiYXIuc2V0Q29sb3IoXHJcbiAgICAgIHRoaXMucmVjZWl2ZXIuY29uZmlnLnRpbWVTbGlkZXJDb2xvclxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQWRVSTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImNvbnN0IGNvbmZpZyA9IHtcclxuICBkZWJ1ZzogZmFsc2UsXHJcbiAgbWF4QnVmZmVyU2l6ZTogMjA5NzE1MjAsXHJcbiAgbWF4TG9hZGluZ0RlbGF5OiAyLFxyXG4gIG51ZGdlTWF4UmV0cnk6IDIsXHJcbiAgbGl2ZVN5bmNEdXJhdGlvbkNvdW50OiAzLFxyXG4gIGxpdmVNYXhMYXRlbmN5RHVyYXRpb25Db3VudDogSW5maW5pdHksXHJcbiAgbWFuaWZlc3RMb2FkaW5nTWF4UmV0cnk6IDEsXHJcbiAgbWFuaWZlc3RMb2FkaW5nUmV0cnlEZWxheTogMTAwMCxcclxuICBtYW5pZmVzdExvYWRpbmdNYXhSZXRyeVRpbWVvdXQ6IDIwMDAsXHJcbiAgZW1lRW5hYmxlZDogdHJ1ZSxcclxuICAvLyBzdGFydExldmVsOiAzLFxyXG4gIC8vIGF1dG9MZXZlbENhcHBpbmc6IDMsXHJcbiAgd2lkZXZpbmVMaWNlbnNlVXJsOlxyXG4gICAgXCJodHRwczovL3dpZGV2aW5lLWRhc2guZXpkcm0uY29tL3dpZGV2aW5lLXBocC93aWRldmluZS1mb3JlaWdua2V5LnBocD9wWD05MEZDMDRcIixcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbmZpZztcclxuIiwiY29uc3QgZm9ybWF0VGltZSA9ICh0aW1lKSA9PiB7XHJcbiAgaWYgKCF0aW1lKSByZXR1cm4gXCIwMDowMFwiO1xyXG5cclxuICBsZXQgaG91cnMgPSBNYXRoLmZsb29yKHRpbWUgLyAzNjAwKTtcclxuICBsZXQgbWludXRlcyA9IE1hdGguZmxvb3IoKHRpbWUgLSBob3VycyAqIDM2MDApIC8gNjApO1xyXG4gIGxldCBzZWNvbmRzID0gTWF0aC5mbG9vcih0aW1lICUgNjApO1xyXG5cclxuICAvLyBmb3JtYXQgdGhlIG1pbnV0ZXMgYW5kIHNlY29uZHMgc3RyaW5nIHRvIGxvb2sgY29uc2lzdGVudCBhY3Jvc3MgYWxsIHZhbHVlc1xyXG4gIGlmICghaG91cnMpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIG1pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIikgK1xyXG4gICAgICBcIjpcIiArXHJcbiAgICAgIHNlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIilcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgaG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIikgK1xyXG4gICAgXCI6XCIgK1xyXG4gICAgbWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsIFwiMFwiKSArXHJcbiAgICBcIjpcIiArXHJcbiAgICBzZWNvbmRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpXHJcbiAgKTtcclxufTtcclxuLy8gRmlyZSBjdXN0b20gZXZlbnRcclxuY29uc3QgZmlyZSA9IChcclxuICBlbCxcclxuICBldmVudE5hbWUsXHJcbiAgZGV0YWlsID0gbnVsbCxcclxuICBidWJibGVzID0gdHJ1ZSxcclxuICBjYW5jZWxhYmxlID0gdHJ1ZVxyXG4pID0+IHtcclxuICBsZXQgZXZ0ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwge1xyXG4gICAgZGV0YWlsLFxyXG4gICAgYnViYmxlcyxcclxuICAgIGNhbmNlbGFibGUsXHJcbiAgfSk7XHJcblxyXG4gIGVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBmb3JtYXRUaW1lLFxyXG4gIGZpcmUsXHJcbn07XHJcbiIsImltcG9ydCBTZWVrQmFyIGZyb20gXCIuL3NlZWtiYXJcIjtcclxuaW1wb3J0IFRpbWVyIGZyb20gXCIuL3RpbWVyXCI7XHJcbmNsYXNzIFJlY2VpdmVyQ29udHJvbHMge1xyXG4gIGNvbnN0cnVjdG9yKGlkLCByZWNlaXZlcikge1xyXG4gICAgdGhpcy5zZWVrYmFyID0gbmV3IFNlZWtCYXIoXCIuc2Vla2Jhci1wcm9ncmVzc1wiKTtcclxuICAgIHRoaXMudGltZXIgPSBuZXcgVGltZXIoXCIudGltZXJcIik7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z2dlciA9IG51bGw7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlkKTtcclxuICAgIHRoaXMub3ZlcmxheSA9IHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50O1xyXG4gICAgdGhpcy5pbmZvID0gdGhpcy5vdmVybGF5LmNoaWxkcmVuWzBdO1xyXG4gICAgdGhpcy5zaG93ID0gdHJ1ZTtcclxuICAgIHRoaXMubG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2FkZXJcIik7XHJcbiAgICB0aGlzLnBsYXlJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52cC1pY29uLXBsYXlcIik7XHJcbiAgICB0aGlzLnBhdXNlSWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudnAtaWNvbi1wYXVzZVwiKTtcclxuICAgIHRoaXMudmlkZW9JbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52aWRlby1pbmZvXCIpO1xyXG4gICAgdGhpcy5zcGxhc2hTY3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNwbGFzaC1zY3JlZW5cIik7XHJcbiAgICB0aGlzLnRodW1ibmFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGh1bWJuYWlsXCIpO1xyXG4gICAgdGhpcy5yZWNlaXZlciA9IHJlY2VpdmVyO1xyXG4gIH1cclxuICBzZXRDYXN0RGVidWdnZXIoY2FzdERlYnVnZ2VyKSB7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z2dlciA9IGNhc3REZWJ1Z2dlcjtcclxuICAgIHRoaXMuc2Vla2Jhci5zZXRDYXN0RGVidWdnZXIodGhpcy5jYXN0RGVidWdnZXIpO1xyXG4gIH1cclxuICBwYXVzZSgpIHtcclxuICAgIHRoaXMucGF1c2VJY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHRoaXMucGxheUljb24uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICB0aGlzLnBsYXlJY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH0sIDIwMDApO1xyXG4gIH1cclxuICBwbGF5KCkge1xyXG4gICAgdGhpcy5wbGF5SWNvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB0aGlzLnBhdXNlSWNvbi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMucGF1c2VJY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH0sIDIwMDApO1xyXG4gIH1cclxuICB1cGRhdGUoc3RhdGUpIHtcclxuICAgIHRoaXMuc2Vla2Jhci5zZXRQcm9ncmVzcyhzdGF0ZS5jdXJyZW50VGltZSwgc3RhdGUuZHVyYXRpb24pO1xyXG4gICAgdGhpcy50aW1lci51cGRhdGUoc3RhdGUuY3VycmVudFRpbWUsIHN0YXRlLmR1cmF0aW9uKTtcclxuICB9XHJcbiAgaGlkZUNvbnRyb2xzKHRpbWUpIHtcclxuICAgIHRoaXMuc2hvdyA9IGZhbHNlO1xyXG4gICAgdGhpcy5zaG93SGlkZSh0aW1lIHx8IDUwMDApO1xyXG4gIH1cclxuICBzaG93Q29udHJvbHMoKSB7XHJcbiAgICB0aGlzLnNob3cgPSB0cnVlO1xyXG4gICAgdGhpcy5zaG93SGlkZSgxMCk7XHJcbiAgfVxyXG4gIHJlc2V0T3ZlcmxheSh0aW1lb3V0KSB7XHJcbiAgICBjb25zdCByZXNldCA9ICgpID0+IHtcclxuICAgICAgdGhpcy5zZWVrYmFyLnJlc2V0KCk7XHJcblxyXG4gICAgICB0aGlzLmluZm8uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfTtcclxuICAgIGlmICghdGltZW91dCkgcmV0dXJuIHNldFRpbWVvdXQocmVzZXQsIDMwMDApO1xyXG4gICAgcmV0dXJuIHJlc2V0KCk7XHJcbiAgfVxyXG4gIHNob3dIaWRlKHRpbWluZykge1xyXG4gICAgLy8gdGhpcy5jYXN0ZGVidWdnZXIuZGVidWcoXCJzaG93SGlkZVwiLCBgJHt0aW1pbmd9ICR7dGhpcy5zaG93fWApO1xyXG4gICAgaWYgKHRoaXMuc2hvdykge1xyXG4gICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgfSwgdGltaW5nKTtcclxuICAgIH1cclxuICB9XHJcbiAgaW5pdE92ZXJsYXkobWV0YWRhdGEpIHtcclxuICAgIHRoaXMuc3BsYXNoU2NyZWVuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHRoaXMub3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKG1ldGFkYXRhLmltYWdlcy5sZW5ndGggPiAwICYmIG1ldGFkYXRhKSB7XHJcbiAgICAgICAgdGhpcy50aHVtYm5haWwuc3JjID0gbWV0YWRhdGEuaW1hZ2VzWzBdLnVybDtcclxuICAgICAgICB0aGlzLnZpZGVvSW5mby5jaGlsZHJlblswXS50ZXh0Q29udGVudCA9IG1ldGFkYXRhLnRpdGxlO1xyXG4gICAgICAgIHRoaXMudmlkZW9JbmZvLmNoaWxkcmVuWzFdLnRleHRDb250ZW50ID0gbWV0YWRhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZWVrYmFyLmFuaW1hdGVTZWVrYmFyKCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge31cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlY2VpdmVyQ29udHJvbHM7XHJcbiIsImNsYXNzIFNlZWtCYXIge1xyXG4gIGNvbnN0cnVjdG9yKGlkKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlkKTtcclxuICAgIHRoaXMuY2FzdGRlYnVnZ2VyID0gbnVsbDtcclxuICAgIHRoaXMuc2hvdyA9IGZhbHNlO1xyXG4gICAgdGhpcy5zcGVlZCA9IDMwO1xyXG4gICAgdGhpcy5pbnRlcnZhbCA9IG51bGw7XHJcbiAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5pbml0aWFsTGVmdFBvc2l0aW9uID0gdGhpcy5lbGVtZW50LnN0eWxlLmxlZnQ7XHJcbiAgfVxyXG4gIHNldENhc3REZWJ1Z2dlcihjYXN0ZGVidWdnZXIpIHtcclxuICAgIHRoaXMuY2FzdGRlYnVnZ2VyID0gY2FzdGRlYnVnZ2VyO1xyXG4gIH1cclxuICBzZXRQcm9ncmVzcyh0aW1lLCBkdXJhdGlvbikge1xyXG4gICAgLy8gdGhpcy5jYXN0ZGVidWdnZXIuZGVidWcoXCJlbGVcIiwgSlNPTi5zdHJpbmdpZnkodGhpcy5lbGVtZW50KSk7XHJcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGggPSAodGltZSAvIGR1cmF0aW9uKSAqIDEwMCArIFwiJVwiO1xyXG4gICAgLy8gdGhpcy5jYXN0ZGVidWdnZXIuZGVidWcoXCJ3aWR0aFwiLCB0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGgpO1xyXG4gIH1cclxuXHJcbiAgc2hvd0hpZGUodGltaW5nKSB7XHJcbiAgICB0aGlzLmNhc3RkZWJ1Z2dlci5kZWJ1ZyhcInNob3dIaWRlXCIsIGAke3RpbWluZ30gJHt0aGlzLnNob3d9YCk7XHJcbiAgICBpZiAodGhpcy5zaG93KSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIH0sIHRpbWluZyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldENvbG9yKGNvbG9yKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7XHJcbiAgfVxyXG4gIGFuaW1hdGVTZWVrYmFyKCkge1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG5cclxuICAgIGxldCB0b3RhbHdpZHRoID0gdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICBjb25zdCBpbm5lckZ1bmN0aW9uID0gKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGxldCBsZWZ0UG9zaXRpb24gPSB0aGlzLmVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdDtcclxuICAgICAgICBsZXQgcmlnaHRQb3NpdGlvbiA9XHJcbiAgICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodDtcclxuICAgICAgICBsZXQgbGVmdFBhcmVudFBvc2l0aW9uID1cclxuICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICAgICAgbGV0IHJpZ2h0UGFyZW50UG9zaXRpb24gPVxyXG4gICAgICAgICAgdGhpcy5lbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQ7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGllbnRXaWR0aCA8PSB0b3RhbHdpZHRoIC8gNCAmJlxyXG4gICAgICAgICAgbGVmdFBvc2l0aW9uIDw9IGxlZnRQYXJlbnRQb3NpdGlvblxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gYCR7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGllbnRXaWR0aCArIHRoaXMuc3BlZWRcclxuICAgICAgICAgIH1weGA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmIChsZWZ0UG9zaXRpb24gKyB0aGlzLmVsZW1lbnQuY2xpZW50V2lkdGggPCByaWdodFBhcmVudFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdFBvc2l0aW9uICsgdGhpcy5zcGVlZH1weGA7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobGVmdFBvc2l0aW9uIDwgcmlnaHRQYXJlbnRQb3NpdGlvbikge1xyXG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdFBvc2l0aW9uICsgdGhpcy5zcGVlZH1weGA7XHJcbiAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gYCR7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xpZW50V2lkdGggLSB0aGlzLnNwZWVkXHJcbiAgICAgICAgICAgICAgfXB4YDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUubGVmdCA9IGAke2xlZnRQYXJlbnRQb3NpdGlvbn1weGA7XHJcbiAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gXCIwcHhcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jYW5jZWxBbmltYXRpb24pIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShpbm5lckZ1bmN0aW9uKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IudG9TdHJpbmcoKSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGlubmVyRnVuY3Rpb24pO1xyXG4gIH1cclxuICByZXNldCgpIHtcclxuICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IFwiMCVcIjtcclxuICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gdGhpcy5pbml0aWFsTGVmdFBvc2l0aW9uO1xyXG4gICAgdGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2Vla0JhcjtcclxuIiwiaW1wb3J0IFV0aWxzIGZyb20gXCIuLi9oZWxwZXJzL1V0aWxzXCI7XHJcblxyXG5jbGFzcyBUaW1lciB7XHJcbiAgY29uc3RydWN0b3IoaWQpIHtcclxuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaWQpO1xyXG4gICAgdGhpcy5lbGVtZW50LnRleHRDb250ZW50ID0gXCIwMDowMCAvIDAwOjAwXCI7XHJcbiAgfVxyXG4gIHVwZGF0ZShjdXJyZW50VGltZSwgZHVyYXRpb24pIHtcclxuICAgIHRoaXMuZWxlbWVudC50ZXh0Q29udGVudCA9IGAke1V0aWxzLmZvcm1hdFRpbWUoXHJcbiAgICAgIGN1cnJlbnRUaW1lXHJcbiAgICApfSAvJHtVdGlscy5mb3JtYXRUaW1lKGR1cmF0aW9uKX1gO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGltZXI7XHJcbiIsImltcG9ydCBBZFVJIGZyb20gXCIuL2FkVUlcIjtcclxuY2xhc3MgVmFzdFNlcnZpY2Uge1xyXG4gIHN0YXRpYyBERUJVR19WQVNUX1NFUlZJQ0UgPSBcIkRFQlVHX1ZBU1RfU0VSVklDRVwiO1xyXG4gIGNvbnN0cnVjdG9yKHJlY2VpdmVyKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyID0gcmVjZWl2ZXI7XHJcbiAgICB0aGlzLmFkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZENvbnRhaW5lclwiKTtcclxuICAgIHRoaXMuYWRzRGlzcGxheUNvbnRhaW5lciA9IG51bGw7XHJcbiAgICB0aGlzLmFkc0xvYWRlciA9IG51bGw7XHJcbiAgICB0aGlzLmFkc0Rpc3BsYXlJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5jdXJyZW50QWRzID0gbnVsbDtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuYXV0b3BsYXlBbGxvd2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLmF1dG9wbGF5UmVxdWlyZXNNdXRlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5oYXNFcnJvcnMgPSBmYWxzZTtcclxuICAgIHRoaXMuYWRVSSA9IG51bGw7XHJcbiAgICB0aGlzLmFkRHVyYXRpb24gPSAwO1xyXG4gIH1cclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgZ29vZ2xlLmltYS5zZXR0aW5ncy5zZXRWcGFpZE1vZGUoXHJcbiAgICAgIGdvb2dsZS5pbWEuSW1hU2RrU2V0dGluZ3MuVnBhaWRNb2RlLkVOQUJMRURcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZHNEaXNwbGF5Q29udGFpbmVyID0gbmV3IGdvb2dsZS5pbWEuQWREaXNwbGF5Q29udGFpbmVyKFxyXG4gICAgICB0aGlzLmFkQ29udGFpbmVyLFxyXG4gICAgICB0aGlzLnJlY2VpdmVyLnZpZGVvXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNMb2FkZXIgPSBuZXcgZ29vZ2xlLmltYS5BZHNMb2FkZXIodGhpcy5hZHNEaXNwbGF5Q29udGFpbmVyKTtcclxuICAgIHRoaXMuYWRzTG9hZGVyLmdldFNldHRpbmdzKCkuc2V0UGxheWVyVHlwZShcImNhc3QvY2xpZW50LXNpZGVcIik7XHJcbiAgICB0aGlzLmFkc0xvYWRlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkc01hbmFnZXJMb2FkZWRFdmVudC5UeXBlLkFEU19NQU5BR0VSX0xPQURFRCxcclxuICAgICAgdGhpcy5vbkFkc01hbmFnZXJMb2FkZWQuYmluZCh0aGlzKSxcclxuICAgICAgZmFsc2VcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZHNMb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgZ29vZ2xlLmltYS5BZEVycm9yRXZlbnQuVHlwZS5BRF9FUlJPUixcclxuICAgICAgdGhpcy5vbkFkRXJyb3IsXHJcbiAgICAgIGZhbHNlXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZFVJID0gbmV3IEFkVUkodGhpcy5yZWNlaXZlcik7XHJcbiAgfVxyXG5cclxuICBvbkFsbEFkc0NvbXBsZXRlZChlKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcImFkIGNvbXBsZXRlZFwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvbkFkQ29tcGxldGVkKGUpIHtcclxuICAgIHRoaXMucmVjZWl2ZXIuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UsXHJcbiAgICAgIFwiYWQgY29tcGxldGVkXCJcclxuICAgICk7XHJcbiAgICB0aGlzLmFkVUkuZGlzYWJsZSgpO1xyXG4gICAgaWYgKHRoaXMuYWRzTWFuYWdlcikgdGhpcy5hZHNNYW5hZ2VyLmRlc3Ryb3koKTtcclxuICAgIGlmICghdGhpcy5oYXNFcnJvcnMgJiYgdGhpcy5yZWNlaXZlci5pc0FkUGxheWluZykgdGhpcy5yZWNlaXZlci5vbkVuZCgpO1xyXG4gICAgLy8gdGhpcy5hZHNNYW5hZ2VyLmRlc3Ryb3koKTtcclxuICAgIC8vIHRoaXMucmVjZWl2ZXIucGxheWVyTWFuYWdlci5zYGV0TWVkaWFFbGVtZW50KHRoaXMudmlkZW8pO1xyXG4gIH1cclxuICBvbkNvbnRlbnRQYXVzZVJlcXVlc3RlZChlKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIkNvbnRlbnQgUGF1c2UgUmVxdWVzdFwiXHJcbiAgICApO1xyXG4gIH1cclxuICBvbkNvbnRlbnRSZXN1bWVSZXF1ZXN0ZWQoKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIkNvbnRlbnQgUmVzdW1lIFJlcXVlc3RcIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb25BZExvYWRlZChlKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIkFkIGxvYWRlZFwiXHJcbiAgICApO1xyXG4gIH1cclxuICBsb2FkQWRzKHZhc3RVcmwsIHZhc3RYbWwpIHtcclxuICAgIHRoaXMuY3VycmVudEFkcyA9IHt9O1xyXG4gICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XHJcbiAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCJsb2FkIFwiICsgdmFzdFVybFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAodmFzdFVybCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRBZHMuY29udGVudCA9IHZhc3RVcmw7XHJcbiAgICAgIHRoaXMuY3VycmVudEFkcy50eXBlID0gXCJ1cmxcIjtcclxuICAgIH0gZWxzZSBpZiAodmFzdFhtbCkge1xyXG4gICAgICB0aGlzLmN1cnJlbnRBZHMuY29udGVudCA9IHZhc3RYbWw7XHJcbiAgICAgIHRoaXMuY3VycmVudEFkcy50eXBlID0gXCJ4bWxcIjtcclxuICAgIH1cclxuICAgIHRoaXMuY3VycmVudEFkcy5jdXJyZW50QWRJbmRleCA9IDA7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UpO1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEFkcy50eXBlID09PSBcInVybFwiKSB0aGlzLmxvYWQodGhpcy5jdXJyZW50QWRzLmNvbnRlbnQpO1xyXG4gICAgZWxzZSB0aGlzLmxvYWQobnVsbCwgdGhpcy5jdXJyZW50QWRzLmNvbnRlbnQpO1xyXG4gIH1cclxuICBsb2FkKHZhc3RVcmwsIHZhc3RYbWwpIHtcclxuICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkgdGhpcy5pbml0KCk7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIkluaXRpYWxpemVkXCIgKyB0aGlzLnZhc3RVcmxcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5hZHNSZXF1ZXN0ID0gbmV3IGdvb2dsZS5pbWEuQWRzUmVxdWVzdCgpO1xyXG4gICAgaWYgKHZhc3RVcmwpIHtcclxuICAgICAgdGhpcy5hZHNSZXF1ZXN0LmFkVGFnVXJsID0gdmFzdFVybDtcclxuICAgIH0gZWxzZSBpZiAodmFzdFhtbCkge1xyXG4gICAgICB0aGlzLmFkc1JlcXVlc3QuYWRzUmVzcG9uc2UgPSB2YXN0WG1sO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYWRzUmVxdWVzdC5saW5lYXJBZFNsb3RXaWR0aCA9IHRoaXMucmVjZWl2ZXIudmlkZW8uY2xpZW50V2lkdGg7XHJcbiAgICB0aGlzLmFkc1JlcXVlc3QubGluZWFyQWRTbG90SGVpZ2h0ID0gdGhpcy5yZWNlaXZlci52aWRlby5jbGllbnRIZWlnaHQ7XHJcbiAgICB0aGlzLmFkc1JlcXVlc3Qubm9uTGluZWFyQWRTbG90V2lkdGggPSB0aGlzLnJlY2VpdmVyLnZpZGVvLmNsaWVudFdpZHRoO1xyXG4gICAgdGhpcy5hZHNSZXF1ZXN0Lm5vbkxpbmVhckFkU2xvdEhlaWdodCA9XHJcbiAgICAgIHRoaXMucmVjZWl2ZXIudmlkZW8uY2xpZW50SGVpZ2h0IC8gMztcclxuXHJcbiAgICB0aGlzLmFkc1JlcXVlc3Quc2V0QWRXaWxsQXV0b1BsYXkodGhpcy5hdXRvcGxheUFsbG93ZWQpO1xyXG4gICAgdGhpcy5hZHNSZXF1ZXN0LnNldEFkV2lsbFBsYXlNdXRlZCh0aGlzLmF1dG9wbGF5UmVxdWlyZXNNdXRlZCk7XHJcblxyXG4gICAgdGhpcy5hZHNSZXF1ZXN0LnZhc3RMb2FkVGltZW91dCA9IDgwMDA7XHJcbiAgICB0aGlzLmFkc0xvYWRlci5yZXF1ZXN0QWRzKHRoaXMuYWRzUmVxdWVzdCk7XHJcbiAgfVxyXG4gIG9uVGltZVVwZGF0ZShldmVudCkge1xyXG4gICAgY29uc3QgYWREYXRhID0gZXZlbnQuZ2V0QWREYXRhKCk7XHJcbiAgICBjb25zdCBjdXJyZW50QWQgPSB0aGlzLmFkc01hbmFnZXIuZ2V0Q3VycmVudEFkKCk7XHJcbiAgICBsZXQgYWRJZCA9IGN1cnJlbnRBZD8uZ2V0QWRJZCgpPy50b1N0cmluZygpO1xyXG4gICAgdGhpcy5yZWNlaXZlci5yZWNlaXZlckNvbnRyb2xzLnVwZGF0ZSh7XHJcbiAgICAgIGN1cnJlbnRUaW1lOiBhZERhdGEuY3VycmVudFRpbWUsXHJcbiAgICAgIGR1cmF0aW9uOiBhZERhdGEuZHVyYXRpb24sXHJcbiAgICAgIC8vIGFkOiBhZEluZGV4SW5mbyxcclxuICAgIH0pO1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCIgT04gVElNRSBVUERBVEVcIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb25BZFNraXAoZSkge1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCJPTiBBRCBTa2lcIlxyXG4gICAgKTtcclxuICB9XHJcbiAgb25BZFN0YXJ0ZWQoZSkge1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCJPTiBBRCBTVEFSVEVEXCJcclxuICAgICk7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmlzQWRQbGF5aW5nID0gdHJ1ZTtcclxuICAgIHRoaXMuYWRVSS5lbmFibGUoKTtcclxuICB9XHJcbiAgb25BZHNNYW5hZ2VyTG9hZGVkKGFkc01hbmFnZXJMb2FkZWRFdmVudCkge1xyXG4gICAgaWYgKHRoaXMuYWRzTWFuYWdlcikge1xyXG4gICAgICB0aGlzLmFkc01hbmFnZXIuZGVzdHJveSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCIgYmVmb3JlIGdldGFkc21hbmFnZXJcIlxyXG4gICAgKTtcclxuICAgIGNvbnN0IGFkc1JlbmRlcmluZ1NldHRpbmdzID0gbmV3IGdvb2dsZS5pbWEuQWRzUmVuZGVyaW5nU2V0dGluZ3MoKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlciA9IGFkc01hbmFnZXJMb2FkZWRFdmVudC5nZXRBZHNNYW5hZ2VyKFxyXG4gICAgICB0aGlzLnJlY2VpdmVyLnZpZGVvLFxyXG4gICAgICBhZHNSZW5kZXJpbmdTZXR0aW5nc1xyXG4gICAgKTtcclxuICAgIHRoaXMucmVjZWl2ZXIuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UsXHJcbiAgICAgIFwiIGFmdGVyIGdldGFkc21hbmFnZXJcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkRXJyb3JFdmVudC5UeXBlLkFEX0VSUk9SLFxyXG4gICAgICB0aGlzLm9uQWRFcnJvci5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCIgYWZ0ZXIgb25hZGVycm9yXCJcclxuICAgICk7XHJcbiAgICB0aGlzLmFkc01hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQ09OVEVOVF9QQVVTRV9SRVFVRVNURUQsXHJcbiAgICAgIHRoaXMub25Db250ZW50UGF1c2VSZXF1ZXN0ZWQuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICAgIHRoaXMucmVjZWl2ZXIuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UsXHJcbiAgICAgIFwiIGFmdGVyIG9uQ29udGVudFBhdXNlUmVxdWVzdGVkXCJcclxuICAgICk7XHJcbiAgICB0aGlzLmFkc01hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQ09OVEVOVF9SRVNVTUVfUkVRVUVTVEVELFxyXG4gICAgICB0aGlzLm9uQ29udGVudFJlc3VtZVJlcXVlc3RlZC5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCIgYWZ0ZXIgb25BbGxBZHNDb21wbGV0ZWRcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5BTExfQURTX0NPTVBMRVRFRCxcclxuICAgICAgdGhpcy5vbkFsbEFkc0NvbXBsZXRlZC5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5yZWNlaXZlci5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgXCIgYWZ0ZXIgb25BZExvYWRlZFwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLkxPQURFRCxcclxuICAgICAgdGhpcy5vbkFkTG9hZGVkLmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIiBhZnRlciBvbkFkU3RhcnRlZFwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLlNUQVJURUQsXHJcbiAgICAgIHRoaXMub25BZFN0YXJ0ZWQuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICAgIHRoaXMucmVjZWl2ZXIuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UsXHJcbiAgICAgIFwiIGFmdGVyIG9uQWRDb21wbGV0ZWRcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5DT01QTEVURSxcclxuICAgICAgdGhpcy5vbkFkQ29tcGxldGVkLmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIiBhZnRlciBvbkNvbnRlbnRQYXVzZVJlcXVlc3RlZFwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLlNLSVBQRUQsXHJcbiAgICAgIHRoaXMub25BZFNraXAuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICAgIHRoaXMucmVjZWl2ZXIuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UsXHJcbiAgICAgIFwiIGFmdGVyIG9uQWRTa2lwXCJcclxuICAgICk7XHJcbiAgICB0aGlzLmFkc01hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgZ29vZ2xlLmltYS5BZEV2ZW50LlR5cGUuQURfUFJPR1JFU1MsXHJcbiAgICAgIHRoaXMub25UaW1lVXBkYXRlLmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIiBhZnRlciBvblRpbWVVcGRhdGVcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuYWRzTWFuYWdlci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICBnb29nbGUuaW1hLkFkRXZlbnQuVHlwZS5BRF9CVUZGRVJJTkcsXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgIGdvb2dsZS5pbWEuQWRFdmVudC5UeXBlLlNLSVBQQUJMRV9TVEFURV9DSEFOR0VELFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgVXRpbHMuZmlyZSh0aGlzLmFkQ29udGFpbmVyLCBFdmVudHMuYWRFdmVudHMuQURfU0tJUFBBQkxFLCB7XHJcbiAgICAgICAgICBjdXJyZW50VGltZTogdGhpcy5wbGF5ZXIudmlkZW8uY3VycmVudFRpbWUsXHJcbiAgICAgICAgICBhZFBsYXlJZDogdGhpcy5hZHNNYW5hZ2VyLmdldEN1cnJlbnRBZCgpPy5nZXRBZElkKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIiBqdXN0IGJlZm9yZSBwbGF5aW5nIGFkXCJcclxuICAgICk7XHJcbiAgICB0aGlzLnBsYXlBZHMoKTtcclxuICB9XHJcbiAgcGxheUFkcygpIHtcclxuICAgIGlmICghdGhpcy5hZHNEaXNwbGF5SW5pdGlhbGl6ZWQpIHtcclxuICAgICAgdGhpcy5hZHNEaXNwbGF5Q29udGFpbmVyLmluaXRpYWxpemUoKTtcclxuICAgICAgdGhpcy5hZHNEaXNwbGF5SW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgd2lkdGggPSB0aGlzLnJlY2VpdmVyLnZpZGVvLmNsaWVudFdpZHRoO1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5yZWNlaXZlci52aWRlby5jbGllbnRIZWlnaHQ7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLnJlY2VpdmVyLmlzQWRQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5hZHNNYW5hZ2VyLmluaXQod2lkdGgsIGhlaWdodCwgZ29vZ2xlLmltYS5WaWV3TW9kZS5GVUxMU0NSRUVOKTtcclxuICAgICAgdGhpcy5hZHNNYW5hZ2VyLnN0YXJ0KCk7XHJcbiAgICAgIHRoaXMucmVjZWl2ZXIucmVjZWl2ZXJDb250cm9scy5sb2FkZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfSBjYXRjaCAoYWRFcnJvcikge1xyXG4gICAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgICB0aGlzLlZhc3RTZXJ2aWNlLkRFQlVHX1ZBU1RfU0VSVklDRSxcclxuICAgICAgICBcIkFkc01hbmFnZXIgY291bGQgbm90IGJlIHN0YXJ0ZWRcIiArIGFkRXJyb3IuZ2V0TWVzc2FnZSgpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG9uQWRFcnJvcihlKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIiBhZCBlcnJvclwiICsgZVxyXG4gICAgKTtcclxuICAgIHRoaXMuaGFzRXJyb3JzID0gdHJ1ZTtcclxuICAgIHRoaXMucmVjZWl2ZXIub25FbmQoKS5iaW5kKHRoaXMucmVjZWl2ZXIpO1xyXG4gIH1cclxuICByZXN1bWUoKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgVmFzdFNlcnZpY2UuREVCVUdfVkFTVF9TRVJWSUNFLFxyXG4gICAgICBcIlJFU1VNSU5HIEFEIEV2ZW50XCJcclxuICAgICk7XHJcbiAgICBpZiAoIXRoaXMuYWRzTWFuYWdlcikgcmV0dXJuO1xyXG4gICAgdGhpcy5hZHNNYW5hZ2VyLnJlc3VtZSgpO1xyXG4gIH1cclxuICBwYXVzZSgpIHtcclxuICAgIHRoaXMucmVjZWl2ZXIuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICBWYXN0U2VydmljZS5ERUJVR19WQVNUX1NFUlZJQ0UsXHJcbiAgICAgIFwiUEFVU0UgQUQgRXZlbnRcIlxyXG4gICAgKTtcclxuICAgIGlmICghdGhpcy5hZHNNYW5hZ2VyKSByZXR1cm47XHJcbiAgICB0aGlzLmFkc01hbmFnZXIucGF1c2UoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFZhc3RTZXJ2aWNlO1xyXG4iLCJjb25zdCBpc0RldmVsb3BtZW50ID0gcHJvY2Vzcy5lbnYuSVNERVZFTE9QTUVOVCA9PT0gXCJ0cnVlXCI7XHJcbmNvbnNvbGUubG9nKFwiaXNEZXZlbG9wbWVudFwiLCBpc0RldmVsb3BtZW50KTtcclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGlzRGV2ZWxvcG1lbnQsXHJcbn07XHJcbiIsImltcG9ydCBSZWNlaXZlciBmcm9tIFwiLi9tb2RlbHMvcmVjZWl2ZXJcIjtcclxuXHJcbi8vYSBib29sZWFuIHRlbGxpbmcgd2hldGhlciBITFMgaXMgc3VwcG9ydGVkIGluIHRoZSBicm93c2VyXHJcbnZwUmVjZWl2ZXIuSExTc3VwcG9ydGVkID0gZmFsc2U7XHJcblxyXG5mdW5jdGlvbiB2cFJlY2VpdmVyKGlkLCBjb25maWcpIHtcclxuICBsZXQgcmVjZWl2ZXIgPSBuZXcgUmVjZWl2ZXIoaWQsIGNvbmZpZyk7XHJcbiAgcmVjZWl2ZXIuaW5pdCgpO1xyXG4gIHZwUmVjZWl2ZXIucmVjZWl2ZXIgPSByZWNlaXZlcjtcclxuICByZXR1cm4gcmVjZWl2ZXI7XHJcbn1cclxuXHJcbndpbmRvdy52cFJlY2VpdmVyID0gdnBSZWNlaXZlcjtcclxuIiwiaW1wb3J0IGRlZmF1bENvbmZpZyBmcm9tIFwiLi4vY29uZmlnL2RlZmF1bHRDb25maWdcIjtcclxuaW1wb3J0IGhsc2NvbmZpZyBmcm9tIFwiLi4vY29uZmlnL2hsc0NvbmZpZ1wiO1xyXG5pbXBvcnQgUmVjZWl2ZXJDb250cm9scyBmcm9tIFwiLi9yZWNlaXZlci1jb250cm9sc1wiO1xyXG5pbXBvcnQgVmFzdFNlcnZpY2UgZnJvbSBcIi4vdmFzdFNlcnZpY2VcIjtcclxuaW1wb3J0IEVudmlyb25tZW50IGZyb20gXCIuLi9jb25maWcvZW52aXJvbm1lbnRcIjtcclxuY2xhc3MgUmVjZWl2ZXIge1xyXG4gIGNvbnN0cnVjdG9yKGlkLCBjb25maWcpIHtcclxuICAgIHRoaXMuY29udGV4dCA9IG51bGw7XHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIgPSBudWxsO1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIgPSBudWxsO1xyXG4gICAgdGhpcy5hcHBJZCA9IGNvbmZpZy5hcHBJZDtcclxuICAgIHRoaXMudmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlkKTtcclxuICAgIHRoaXMucGxheWJhY2tDb25maWcgPSBudWxsO1xyXG4gICAgdGhpcy5jb250cm9scyA9IG51bGw7XHJcbiAgICB0aGlzLmhscyA9IG51bGw7XHJcbiAgICB0aGlzLnZpZGVvT2JqZWN0ID0ge307XHJcbiAgICB0aGlzLnZpZGVvQ29udGFpbmVyID0gdGhpcy52aWRlby5wYXJlbnRFbGVtZW50O1xyXG4gICAgdGhpcy5wbGF5YmFja1JhdGUgPSAxO1xyXG4gICAgdGhpcy5hdXRvcGxheSA9IGZhbHNlO1xyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzID0gbmV3IFJlY2VpdmVyQ29udHJvbHMoXCIuY29udHJvbHNcIiwgdGhpcyk7XHJcbiAgICB0aGlzLm1lZGlhTWFuYWdlciA9IG51bGw7XHJcbiAgICB0aGlzLmNhc3RSZWNlaXZlck1hbmFnZXIgPSBudWxsO1xyXG4gICAgdGhpcy52aWRlb1N0YXJ0ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMudmFzdFNlcnZpY2UgPSBuZXcgVmFzdFNlcnZpY2UodGhpcyk7XHJcbiAgICB0aGlzLmNvbmZpZyA9IHt9O1xyXG4gICAgdGhpcy5hZEJyZWFrcyA9IFtdO1xyXG4gICAgdGhpcy5kZWJ1Z1RhZ3MgPSB7XHJcbiAgICAgIExPQURfUkVRVUVTVDogXCJMT0FEX1JFUVVFU1RcIixcclxuICAgICAgQVRUQUNIX01FRElBOiBcIkFUVEFDSF9NRURJQVwiLFxyXG4gICAgICBPTlBMQVk6IFwiT05fUExBWVwiLFxyXG4gICAgICBTVEFSVDogXCJTVEFSVFwiLFxyXG4gICAgICBJTklUOiBcIklOSVRcIixcclxuICAgICAgRVZFTlRTOiBcIkVWRU5UU1wiLFxyXG4gICAgICBPTkVORDogXCJPTkVORFwiLFxyXG4gICAgICBCUk9BRENBU1Q6IFwiQlJPQURDQVNUXCIsXHJcbiAgICAgIE9OVElNRVVQREFURUU6IFwiT05USU1FVVBEQVRFXCIsXHJcbiAgICAgIElOSVRTVEFURTogXCJJTklUU1RBVEVcIixcclxuICAgIH07XHJcbiAgICB0aGlzLmNvbmZpZyA9IHsgLi4uZGVmYXVsQ29uZmlnLCAuLi5jb25maWcgfTtcclxuICAgIHRoaXMuaXNBZFBsYXlpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuTkFNRVNQQUNFID0gXCJ1cm46eC1jYXN0OnRlY2guZ2ppcmFmYS52cC1zZXJ2aWNlXCI7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMgPSBuZXcgUmVjZWl2ZXJDb250cm9scyhcIi5jb250cm9sc1wiLCB0aGlzKTtcclxuICB9XHJcbiAgc3RhcnQoKSB7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMucmVzZXRPdmVybGF5KCk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1Zyh0aGlzLmRlYnVnVGFncy5TVEFSVCwgXCJTdGFydGluZyB2aWRlby4uLlwiKTtcclxuICAgIHRoaXMuYnJvYWRjYXN0KHRoaXMuZGVidWdUYWdzLlNUQVJUICsgXCJTdGFydGluZyB2aWRlby4uLlwiKTtcclxuICAgIHRoaXMub25QbGF5KCk7XHJcbiAgfVxyXG5cclxuICBvblBsYXkoZGF0YSkge1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJvbiBwbGF5XCIsIHRoaXMudmlkZW8uZ2V0QXR0cmlidXRlKFwic3JjXCIpKTtcclxuICAgIHRoaXMuYnJvYWRjYXN0KFwib24gcGxheVwiICsgdGhpcy52aWRlby5nZXRBdHRyaWJ1dGUoXCJzcmNcIikpO1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJpc2FkcGxheWluZ1wiLCB0aGlzLmlzQWRQbGF5aW5nKTtcclxuICAgIGlmICghdGhpcy5pc0FkUGxheWluZykge1xyXG4gICAgICB0aGlzLnZpZGVvXHJcbiAgICAgICAgLnBsYXkoKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIGlmICghdGhpcy52aWRlb1N0YXJ0ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnNob3dDb250cm9scygpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvU3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMucGxheSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnNob3cgPSBmYWxzZTtcclxuICAgICAgICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy5zaG93SGlkZSgyMDAwKTtcclxuICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLm9uUGF1c2UoKTtcclxuICAgICAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICAgICAgICB0aGlzLmRlYnVnVGFncy5PTlBMQVksXHJcbiAgICAgICAgICAgIFwiIENvdWxkbid0IHBsYXkgdmlkZW8uVHJpbmcgb25lIG1vcmUgdGltZSBcIiArIGVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICB0aGlzLmJyb2FkY2FzdChcclxuICAgICAgICAgICAgXCIgQ291bGRuJ3QgcGxheSB2aWRlby5UcmluZyBvbmUgbW9yZSB0aW1lIFwiICsgZS50b1N0cmluZygpXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHRoaXMudmFzdFNlcnZpY2UucmVzdW1lKCk7XHJcbiAgfVxyXG4gIG9uUGF1c2UoZGF0YSkge1xyXG4gICAgaWYgKCF0aGlzLmlzQWRQbGF5aW5nKSB0aGlzLnZpZGVvLnBhdXNlKCk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy52YXN0U2VydmljZS5wYXVzZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnBhdXNlKCk7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMuc2hvd0NvbnRyb2xzKCk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcbiAgYWRkUGxheWVyRXZlbnRzKCkge1xyXG4gICAgdGhpcy52aWRlby5hZGRFdmVudExpc3RlbmVyKFwidGltZXVwZGF0ZVwiLCB0aGlzLm9uVGltZVVwZGF0ZSk7XHJcbiAgICB0aGlzLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCB0aGlzLm9uRW5kLmJpbmQodGhpcykpO1xyXG4gIH1cclxuICBicm9hZGNhc3QobWVzc2FnZSwgcmVxdWlyZWQpIHtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICB0aGlzLmRlYnVnVGFncy5CUk9BRENBU1QsXHJcbiAgICAgIEVudmlyb25tZW50LmlzRGV2ZWxvcG1lbnRcclxuICAgICk7XHJcbiAgICBpZiAoIXJlcXVpcmVkICYmICFFbnZpcm9ubWVudC5pc0RldmVsb3BtZW50KSByZXR1cm47XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1Zyh0aGlzLmRlYnVnVGFncy5CUk9BRENBU1QsIG1lc3NhZ2UpO1xyXG4gICAgaWYgKHRoaXMuY29udGV4dClcclxuICAgICAgdGhpcy5jb250ZXh0LnNlbmRDdXN0b21NZXNzYWdlKHRoaXMuTkFNRVNQQUNFLCB1bmRlZmluZWQsIG1lc3NhZ2UpO1xyXG4gIH1cclxuICBvbkVuZCgpIHtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwib24gRW5kXCIsIHRoaXMuY29uZmlnLnJlcGxheSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodGhpcy5pc0FkUGxheWluZykge1xyXG4gICAgICAgIHRoaXMuYnJvYWRjYXN0KFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBcIkFkIGZpbmlzaGVkXCIsXHJcbiAgICAgICAgICAgIGNvZGU6IDIsXHJcbiAgICAgICAgICAgIHRpbWU6IHRoaXMuY3VycmVudFRpbWUsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgdHJ1ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKHRoaXMuaGxzKSB7XHJcbiAgICAgICAgICB0aGlzLmhscy5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNBZFBsYXlpbmcgPSBmYWxzZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmJyb2FkY2FzdChcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJWaWRlbyBmaW5pc2hlZFwiLFxyXG4gICAgICAgICAgICBjb2RlOiAzLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHRydWVcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5lcnJvcihcclxuICAgICAgICB0aGlzLmRlYnVnVGFncy5PTkVORCxcclxuICAgICAgICBcIiBFcnJvclwiICsgZXJyb3IudG9TdHJpbmcoKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIG9uVGltZVVwZGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLmlzQWRQbGF5aW5nKSByZXR1cm47XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgdGhpcy5hZEJyZWFrc1xyXG4gICAgICAgICAgLm1hcCgoYWQpID0+IGFkLmJyZWFrVGltaW5nVmFsdWUpXHJcbiAgICAgICAgICAuaW5jbHVkZXMoTWF0aC5mbG9vcih0aGlzLnZpZGVvLmN1cnJlbnRUaW1lKSkgJiZcclxuICAgICAgICAhdGhpcy5pc0FkUGxheWluZ1xyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLmJyb2FkY2FzdCh0aGlzLmFkQnJlYWtzKTtcclxuICAgICAgICB0aGlzLm9uUGF1c2UoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID0gTWF0aC5mbG9vcih0aGlzLnZpZGVvLmN1cnJlbnRUaW1lKTtcclxuICAgICAgICB0aGlzLmlzQWRQbGF5aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnZhc3RTZXJ2aWNlLmxvYWRBZHModGhpcy5hZEJyZWFrc1swXS5hZFRhZ1VybFswXSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaGxzKSB7XHJcbiAgICAgICAgICB0aGlzLmhscy5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYWRCcmVha3Muc2hpZnQoKTtcclxuICAgICAgICAvLyB0aGlzLmhscy5kZXN0cm95KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5lcnJvcih0aGlzLmRlYnVnVGFncy5PTlRJTUVVUERBVEUsIGVycm9yLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy51cGRhdGUodGhpcy51cGRhdGVQbGF5ZXJTdGF0ZSgpKTtcclxuICB9XHJcbiAgdXBkYXRlUGxheWVyU3RhdGUoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjdXJyZW50VGltZTogdGhpcy52aWRlby5jdXJyZW50VGltZSxcclxuICAgICAgZHVyYXRpb246IHRoaXMudmlkZW9PYmplY3QuZHVyYXRpb24gfHwgdGhpcy52aWRlby5kdXJhdGlvbixcclxuICAgIH07XHJcbiAgfVxyXG4gIGF0dGFjaE1lZGlhKCkge1xyXG4gICAgdnBSZWNlaXZlci5ITFNzdXBwb3J0ZWQgPSBIbHMuaXNTdXBwb3J0ZWQoKTtcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiaW5zaWRlIGF0dGFjaCBtZWRpYVwiLCB2cFJlY2VpdmVyLkhMU3N1cHBvcnRlZCk7XHJcblxyXG4gICAgdGhpcy52aWRlby5wbGF5YmFja1JhdGUgPSAxO1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIFwidmlkZW8gZmlsZVwiLFxyXG4gICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnZpZGVvLCBbXCJpZFwiLCBcImNsYXNzTmFtZVwiLCBcInRhZ05hbWVcIl0pXHJcbiAgICApO1xyXG4gICAgdGhpcy5icm9hZGNhc3Qoe1xyXG4gICAgICBtZXNzYWdlOlxyXG4gICAgICAgIFwidmlkZW8gZmlsZVwiICtcclxuICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLnZpZGVvLCBbXCJpZFwiLCBcImNsYXNzTmFtZVwiLCBcInRhZ05hbWVcIl0pLFxyXG4gICAgfSk7XHJcbiAgICBpZiAodGhpcy52aWRlb09iamVjdC5maWxlLmVuZHNXaXRoKFwibXA0XCIpKSB7XHJcbiAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiaW5zaWRlIG1wNFwiLCB0aGlzLnZpZGVvT2JqZWN0LmZpbGUpO1xyXG4gICAgICB0aGlzLnZpZGVvLnNyYyA9IHRoaXMudmlkZW9PYmplY3QuZmlsZTtcclxuICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgfSBlbHNlIGlmICh2cFJlY2VpdmVyLkhMU3N1cHBvcnRlZCkge1xyXG4gICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcImluc2lkZSBobHNzdXBwb3J0ZWRcIiwgdGhpcy52aWRlb09iamVjdC5maWxlKTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICB0aGlzLmhscyA9IG5ldyBIbHMoaGxzY29uZmlnKTtcclxuICAgICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcImhscyBpbml0aWFsaXplZFwiLCB0aGlzLnZpZGVvT2JqZWN0LmZpbGUpO1xyXG4gICAgICAgIHRoaXMuYnJvYWRjYXN0KHtcclxuICAgICAgICAgIG1lc3NhZ2U6IFwiaGxzIGluaXRpYWxpemVkIFwiICsgdGhpcy52aWRlb09iamVjdC5maWxlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiYXR0YWNoTWVkaWEgXCIgKyB0aGlzLmN1cnJlbnRUaW1lKTtcclxuXHJcbiAgICAgICAgdGhpcy5obHMub24oSGxzLkV2ZW50cy5NRURJQV9BVFRBQ0hFRCwgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJhbWVkaWEgYXR0YWNoZWRcIiwgdGhpcy52aWRlb09iamVjdC5maWxlKTtcclxuICAgICAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFxyXG4gICAgICAgICAgICBcImxvYWRpbmcgc291cmNlIGhsc3N1cHBvcnRlZFwiLFxyXG4gICAgICAgICAgICB0aGlzLnZpZGVvT2JqZWN0LmZpbGVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBpZiAodGhpcy5jdXJyZW50VGltZSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy52aWRlby5jdXJyZW50VGltZSA9IHRoaXMuY3VycmVudFRpbWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmhscy5sb2FkU291cmNlKHRoaXMudmlkZW9PYmplY3QuZmlsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5obHMub24oSGxzLkV2ZW50cy5NQU5JRkVTVF9QQVJTRUQsIChldmVudCwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcoXCJtYW5pZmVzdCBwYXJzZWRcIiwgdGhpcy52aWRlb09iamVjdC5maWxlKTtcclxuICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID0gdGhpcy5jdXJyZW50VGltZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuc3RhcnQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmhscy5vbihIbHMuRXZlbnRzLkVSUk9SLCAoZXZlbnQsIGRhdGEpID0+IHtcclxuICAgICAgICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiSExTICBFUlJPUlwiLCBkYXRhLmRldGFpbHMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaGxzLmF0dGFjaE1lZGlhKHRoaXMudmlkZW8pO1xyXG4gICAgICB9IGNhdGNoIChlcnJvcikge31cclxuICAgIH1cclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyLmRlYnVnKFwiZmluaXNoZWQgYXR0YWNoIG1lZGlhXCIpO1xyXG4gIH1cclxuICBmYWtlaW5pdCgpIHtcclxuICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgIHRoaXMuY2FzdERlYnVnTG9nZ2VyID0ge1xyXG4gICAgICBkZWJ1ZzogZnVuY3Rpb24gKHR5cGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgIGlmIChtZXNzYWdlLmNvZGUgPT0gMikge1xyXG4gICAgICAgICAgICBzZWxmLnZpZGVvLmN1cnJlbnRUaW1lID0gbWVzc2FnZS50aW1lO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAvLyBpZiAoc2VsZi5obHMpIHtcclxuICAgICAgICAgICAgICAvLyAgIHNlbGYuaGxzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAvLyAgIHNlbGYudmFzdFNlcnZpY2UuYWRVSS5kaXNhYmxlKCk7XHJcbiAgICAgICAgICAgICAgLy8gICBzZWxmLmluaXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgICAgc2VsZi5hdHRhY2hNZWRpYSgpO1xyXG4gICAgICAgICAgICB9LCA3MDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyh0eXBlLCBtZXNzYWdlKTtcclxuICAgICAgfSxcclxuICAgICAgZXJyb3I6IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2codHlwZSwgbWVzc2FnZSk7XHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnNldENhc3REZWJ1Z2dlcih0aGlzLmNhc3REZWJ1Z0xvZ2dlcik7XHJcbiAgICB0aGlzLnZpZGVvT2JqZWN0LmZpbGUgPVxyXG4gICAgICBcImh0dHBzOi8vdnAuZ2ppcmFmYS5uZXQvdnBzL3Byb2Qvb2RnZWh0eW8vZW5jb2RlL3Zqc215amhzL2hscy9tYXN0ZXJfZmlsZS5tM3U4XCI7XHJcbiAgICB0aGlzLnZpZGVvT2JqZWN0LmR1cmF0aW9uID0gMTE5O1xyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnNlZWtiYXIuYW5pbWF0ZVNlZWtiYXIoKTtcclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy5pbml0T3ZlcmxheSh7XHJcbiAgICAgIHRpdGxlOiBcIlNvbWUgdGl0bGVcIixcclxuICAgICAgaW1hZ2VzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgdXJsOiBcImh0dHBzOi8vbGlraS5namlyYWZhLmNvbS9hcGkvbWVkaWEvZ2p2aWRlby95cXowZ3EvcmV0aW5hLmpwZ1wiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICB9KTtcclxuICAgICh0aGlzLmFkQnJlYWtzID0gW1xyXG4gICAgICB7XHJcbiAgICAgICAgYnJlYWtUeXBlOiBcIm1pZHJvbGxcIixcclxuICAgICAgICBhZFRhZ1VybDogW1wiaHR0cHM6Ly92cC1kZXYuZ2ppcmFmYS5uZXQvdnBzL2NvbnRlbnQvdmFzdC9wcmVyb2xsLTIueG1sXCJdLFxyXG4gICAgICAgIGJyZWFrVGltaW5nVHlwZTogXCJ0aW1lXCIsXHJcbiAgICAgICAgYnJlYWtUaW1pbmdWYWx1ZTogMTUsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBicmVha1R5cGU6IFwibWlkcm9sbFwiLFxyXG4gICAgICAgIGFkVGFnVXJsOiBbXCJodHRwczovL3ZwLWRldi5namlyYWZhLm5ldC92cHMvY29udGVudC92YXN0L3ByZXJvbGwtMi54bWxcIl0sXHJcbiAgICAgICAgYnJlYWtUaW1pbmdUeXBlOiBcInRpbWVcIixcclxuICAgICAgICBicmVha1RpbWluZ1ZhbHVlOiAzMCxcclxuICAgICAgfSxcclxuICAgIF0pLFxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmF0dGFjaE1lZGlhKCk7XHJcbiAgICAgIH0sIDUwMDApO1xyXG5cclxuICAgIHRoaXMuYmluZE1ldGhvZHMoKTtcclxuICAgIHRoaXMuYWRkUGxheWVyRXZlbnRzKCk7XHJcbiAgfVxyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLmNvbnRleHQgPSBjYXN0LmZyYW1ld29yay5DYXN0UmVjZWl2ZXJDb250ZXh0LmdldEluc3RhbmNlKCk7XHJcblxyXG4gICAgdGhpcy5jb250ZXh0LnNldExvZ2dlckxldmVsKGNhc3QuZnJhbWV3b3JrLkxvZ2dlckxldmVsLkRFQlVHKTtcclxuXHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlciA9IGNhc3QuZGVidWcuQ2FzdERlYnVnTG9nZ2VyLmdldEluc3RhbmNlKCk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5zZXRFbmFibGVkKEVudmlyb25tZW50LmlzRGV2ZWxvcG1lbnQpO1xyXG4gICAgdGhpcy5jYXN0RGVidWdMb2dnZXIuZGVidWcodGhpcy5kZWJ1Z1RhZ3MuSU5JVCwgXCJjYXN0ZGVidWdnZXIgaW5pdGlhbGl6ZWRcIik7XHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIgPSB0aGlzLmNvbnRleHQuZ2V0UGxheWVyTWFuYWdlcigpO1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyLnNldE1lZGlhRWxlbWVudCh0aGlzLnZpZGVvKTtcclxuXHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIuc2V0U3VwcG9ydGVkTWVkaWFDb21tYW5kcyhcclxuICAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuQ29tbWFuZC5TRUVLIHxcclxuICAgICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5Db21tYW5kLlBBVVNFIHxcclxuICAgICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5Db21tYW5kLlBMQVlcclxuICAgICk7XHJcblxyXG4gICAgLy8gYnJvd3NlIGNvbnRlbnQgYXJlYVxyXG4gICAgY29uc3QgY29udHJvbHMgPSBjYXN0LmZyYW1ld29yay51aS5Db250cm9scy5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgIGNvbnN0IGl0ZW0xID0gbmV3IGNhc3QuZnJhbWV3b3JrLnVpLkJyb3dzZUl0ZW0oKTtcclxuICAgIGl0ZW0xLnRpdGxlID0gXCJUaXRsZSAxXCI7XHJcbiAgICBpdGVtMS5zdWJ0aXRsZSA9IFwiU3VidGl0bGUgMVwiO1xyXG4gICAgaXRlbTEuZHVyYXRpb24gPSAzMDA7XHJcbiAgICBpdGVtMS5pbWFnZVR5cGUgPSBjYXN0LmZyYW1ld29yay51aS5Ccm93c2VJbWFnZVR5cGUuTVVTSUNfVFJBQ0s7XHJcbiAgICBpdGVtMS5pbWFnZSA9IG5ldyBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5JbWFnZShcIjEuanBnXCIpO1xyXG4gICAgaXRlbTEuZW50aXR5ID0gXCJleGFtcGxlOi8vZ2l6bW9zLzFcIjtcclxuXHJcbiAgICBjb25zdCBpdGVtMiA9IG5ldyBjYXN0LmZyYW1ld29yay51aS5Ccm93c2VJdGVtKCk7XHJcbiAgICBpdGVtMi50aXRsZSA9IFwiVGl0bGUgMlwiO1xyXG4gICAgaXRlbTIuc3VidGl0bGUgPSBcIlN1YnRpdGxlIDJcIjtcclxuICAgIGl0ZW0yLmR1cmF0aW9uID0gMTAwO1xyXG4gICAgaXRlbTIuaW1hZ2VUeXBlID0gY2FzdC5mcmFtZXdvcmsudWkuQnJvd3NlSW1hZ2VUeXBlLk1VU0lDX1RSQUNLO1xyXG4gICAgaXRlbTIuaW1hZ2UgPSBuZXcgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuSW1hZ2UoXCIyLmpwZ1wiKTtcclxuICAgIGl0ZW0yLmVudGl0eSA9IFwiZXhhbXBsZTovL2dpem1vcy8yXCI7XHJcblxyXG4gICAgY29uc3QgaXRlbXMgPSBbaXRlbTEsIGl0ZW0yXTtcclxuXHJcbiAgICBjb25zdCBicm93c2VDb250ZW50ID0gbmV3IGNhc3QuZnJhbWV3b3JrLnVpLkJyb3dzZUNvbnRlbnQoKTtcclxuICAgIGJyb3dzZUNvbnRlbnQudGl0bGUgPSBcIlVwIE5leHRcIjtcclxuICAgIGJyb3dzZUNvbnRlbnQuaXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy5zZXRDYXN0RGVidWdnZXIodGhpcy5jYXN0RGVidWdMb2dnZXIpO1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IG5ldyBjYXN0LmZyYW1ld29yay5DYXN0UmVjZWl2ZXJPcHRpb25zKCk7XHJcbiAgICAvLyBNYXAgb2YgbmFtZXNwYWNlIG5hbWVzIHRvIHRoZWlyIHR5cGVzLlxyXG4gICAgb3B0aW9ucy5jdXN0b21OYW1lc3BhY2VzID0ge307XHJcbiAgICBvcHRpb25zLmN1c3RvbU5hbWVzcGFjZXNbdGhpcy5OQU1FU1BBQ0VdID1cclxuICAgICAgY2FzdC5mcmFtZXdvcmsuc3lzdGVtLk1lc3NhZ2VUeXBlLkpTT047XHJcbiAgICB0aGlzLmNvbnRleHQuc3RhcnQob3B0aW9ucyk7XHJcbiAgICB0aGlzLmJpbmRNZXRob2RzKCk7XHJcbiAgICB0aGlzLmJpbmRJbnRlcmNlcHRvcnMoKTtcclxuICAgIHRoaXMuYWRkUGxheWVyRXZlbnRzKCk7XHJcbiAgfVxyXG4gIG9uU2VlayhyZXF1ZXN0RGF0YSkge1xyXG4gICAgdGhpcy5icm9hZGNhc3QocmVxdWVzdERhdGEudG9TdHJpbmcoKSk7XHJcbiAgICB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID0gcmVxdWVzdERhdGEuY3VycmVudFRpbWU7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMuc2hvd0NvbnRyb2xzKCk7XHJcbiAgICB0aGlzLnJlY2VpdmVyQ29udHJvbHMuaGlkZUNvbnRyb2xzKDYwMDApO1xyXG5cclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy51cGRhdGUodGhpcy51cGRhdGVQbGF5ZXJTdGF0ZSgpKTtcclxuICB9XHJcbiAgZHJhd0J1dHRvbnMoKSB7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmFzc2lnbkJ1dHRvbihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsudWkuQ29udHJvbHNTbG90LlNMT1RfU0VDT05EQVJZXzEsXHJcbiAgICAgIGNhc3QuZnJhbWV3b3JrLnVpLkNvbnRyb2xzQnV0dG9uLlFVRVVFX1BSRVZcclxuICAgICk7XHJcbiAgICB0aGlzLmNvbnRyb2xzLmFzc2lnbkJ1dHRvbihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsudWkuQ29udHJvbHNTbG90LlNMT1RfUFJJTUFSWV8xLFxyXG4gICAgICBjYXN0LmZyYW1ld29yay51aS5Db250cm9sc0J1dHRvbi5DQVBUSU9OU1xyXG4gICAgKTtcclxuICAgIHRoaXMuY29udHJvbHMuYXNzaWduQnV0dG9uKFxyXG4gICAgICBjYXN0LmZyYW1ld29yay51aS5Db250cm9sc1Nsb3QuU0xPVF9QUklNQVJZXzIsXHJcbiAgICAgIGNhc3QuZnJhbWV3b3JrLnVpLkNvbnRyb2xzQnV0dG9uLlNFRUtfRk9SV0FSRF8xNVxyXG4gICAgKTtcclxuICAgIHRoaXMuY29udHJvbHMuYXNzaWduQnV0dG9uKFxyXG4gICAgICBjYXN0LmZyYW1ld29yay51aS5Db250cm9sc1Nsb3QuU0xPVF9TRUNPTkRBUllfMixcclxuICAgICAgY2FzdC5mcmFtZXdvcmsudWkuQ29udHJvbHNCdXR0b24uUVVFVUVfTkVYVFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGJpbmRJbnRlcmNlcHRvcnMoKSB7XHJcbiAgICB0aGlzLmNvbnRleHQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsuc3lzdGVtLkV2ZW50VHlwZS5TRU5ERVJfRElTQ09OTkVDVEVELFxyXG4gICAgICAoZXZlbnQpID0+IHtcclxuICAgICAgICB3aW5kb3cuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHRoaXMuY29udGV4dC5hZGRDdXN0b21NZXNzYWdlTGlzdGVuZXIodGhpcy5OQU1FU1BBQ0UsIChldmVudCkgPT4ge1xyXG4gICAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcclxuICAgICAgICB0aGlzLmRlYnVnVGFncy5FVkVOVFMsXHJcbiAgICAgICAgXCJhZGRDdXN0b21NZXNzYWdlTGlzdGVuZXJcIiArIGV2ZW50LmRhdGFcclxuICAgICAgKTtcclxuICAgICAgbGV0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xyXG4gICAgICBpZiAobWVzc2FnZS5jb2RlID09IDIpIHtcclxuICAgICAgICB0aGlzLmF0dGFjaE1lZGlhKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyLnNldE1lc3NhZ2VJbnRlcmNlcHRvcihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuTWVzc2FnZVR5cGUuTE9BRCxcclxuICAgICAgdGhpcy5vbkxvYWRSZXF1ZXN0LmJpbmQodGhpcylcclxuICAgICk7XHJcbiAgICB0aGlzLnBsYXllck1hbmFnZXIuc2V0TWVzc2FnZUludGVyY2VwdG9yKFxyXG4gICAgICBjYXN0LmZyYW1ld29yay5tZXNzYWdlcy5NZXNzYWdlVHlwZS5QTEFZLFxyXG4gICAgICB0aGlzLm9uUGxheS5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyLnNldE1lc3NhZ2VJbnRlcmNlcHRvcihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuTWVzc2FnZVR5cGUuUEFVU0UsXHJcbiAgICAgIHRoaXMub25QYXVzZS5iaW5kKHRoaXMpXHJcbiAgICApO1xyXG4gICAgdGhpcy5wbGF5ZXJNYW5hZ2VyLnNldE1lc3NhZ2VJbnRlcmNlcHRvcihcclxuICAgICAgY2FzdC5mcmFtZXdvcmsubWVzc2FnZXMuTWVzc2FnZVR5cGUuU0VFSyxcclxuICAgICAgdGhpcy5vblNlZWsuYmluZCh0aGlzKVxyXG4gICAgKTtcclxuICB9XHJcbiAgYmluZE1ldGhvZHMoKSB7XHJcbiAgICB0aGlzLmJpbmRJbnRlcmNlcHRvcnMgPSB0aGlzLmJpbmRJbnRlcmNlcHRvcnMuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25Mb2FkUmVxdWVzdCA9IHRoaXMub25Mb2FkUmVxdWVzdC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5hdHRhY2hNZWRpYSA9IHRoaXMuYXR0YWNoTWVkaWEuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc3RhcnQgPSB0aGlzLnN0YXJ0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmFkZFBsYXllckV2ZW50cyA9IHRoaXMuYWRkUGxheWVyRXZlbnRzLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uVGltZVVwZGF0ZSA9IHRoaXMub25UaW1lVXBkYXRlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uUGxheSA9IHRoaXMub25QbGF5LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uUGF1c2UgPSB0aGlzLm9uUGF1c2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMudXBkYXRlUGxheWVyU3RhdGUgPSB0aGlzLnVwZGF0ZVBsYXllclN0YXRlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uRW5kID0gdGhpcy5vbkVuZC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5pbml0U3RhdGUgPSB0aGlzLmluaXRTdGF0ZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICBpbml0U3RhdGUoKSB7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1Zyh0aGlzLmRlYnVnVGFncy5JTklUU1RBVEUsIFwiaW5pdFN0YXRlXCIpO1xyXG4gICAgdGhpcy5obHMgPSBudWxsO1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IDA7XHJcbiAgICB0aGlzLnZpZGVvLmN1cnJlbnRUaW1lID0gMDtcclxuICAgIHRoaXMucmVjZWl2ZXJDb250cm9scy5yZXNldE92ZXJsYXkodHJ1ZSk7XHJcbiAgfVxyXG4gIG9uTG9hZFJlcXVlc3QobG9hZFJlcXVlc3REYXRhKSB7XHJcbiAgICBpZiAodGhpcy5obHMpIHtcclxuICAgICAgdGhpcy5obHMuZGVzdHJveSgpO1xyXG4gICAgICB0aGlzLnZhc3RTZXJ2aWNlLmFkVUkuZGlzYWJsZSgpO1xyXG4gICAgICB0aGlzLmluaXRTdGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLmluaXRPdmVybGF5KGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5tZXRhZGF0YSk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIlZQcmVjZWl2ZXJcIiwgbG9hZFJlcXVlc3REYXRhLm1lZGlhLmNvbnRlbnRJZCk7XHJcbiAgICB0aGlzLmNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhcIlZQcmVjZWl2ZXIxXCIsIEhscy5pc1N1cHBvcnRlZCgpKTtcclxuICAgIHRoaXMudmlkZW9PYmplY3QuZmlsZSA9IGxvYWRSZXF1ZXN0RGF0YS5tZWRpYS5jb250ZW50SWQ7XHJcbiAgICB0aGlzLnZpZGVvT2JqZWN0LmR1cmF0aW9uID0gbG9hZFJlcXVlc3REYXRhLm1lZGlhLm1ldGFkYXRhLmR1cmF0aW9uO1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IGxvYWRSZXF1ZXN0RGF0YS5jdXJyZW50VGltZTtcclxuICAgIHRoaXMucGxheWJhY2tSYXRlID0gbG9hZFJlcXVlc3REYXRhLnBsYXliYWNrUmF0ZTtcclxuICAgIHRoaXMuYXV0b3BsYXkgPSBsb2FkUmVxdWVzdERhdGEuYXV0b3BsYXk7XHJcbiAgICBpZiAobG9hZFJlcXVlc3REYXRhLnJlcXVpcmVBZHMpXHJcbiAgICAgIHRoaXMuYWRCcmVha3MgPSBsb2FkUmVxdWVzdERhdGEuY3VzdG9tRGF0YS5hZEJyZWFrcztcclxuICAgIC8vIHRyeSB7XHJcbiAgICB0aGlzLmNvbmZpZy5yZXBsYXkgPVxyXG4gICAgICB0eXBlb2YgbG9hZFJlcXVlc3REYXRhLnJlcGxheSAhPT0gXCJ1bmRlZmluZWRcIlxyXG4gICAgICAgID8gbG9hZFJlcXVlc3REYXRhLnJlcGxheVxyXG4gICAgICAgIDogdHJ1ZTtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuYXR0YWNoTWVkaWEoKTtcclxuICAgICAgdGhpcy5yZWNlaXZlckNvbnRyb2xzLnVwZGF0ZSh0aGlzLnVwZGF0ZVBsYXllclN0YXRlKCkpO1xyXG4gICAgICB0aGlzLmJyb2FkY2FzdCh7XHJcbiAgICAgICAgbWVzc2FnZTogXCJhdHRhY2hpbmcgbWVkaWFcIixcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmJyb2FkY2FzdCh7XHJcbiAgICAgICAgbWVzc2FnZTogZXJyb3IudG9TdHJpbmcoKSxcclxuICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2ssXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIGFkZEJyZWFrcyhtZWRpYUluZm9ybWF0aW9uKSB7XHJcbiAgICBjYXN0RGVidWdMb2dnZXIuZGVidWcoXHJcbiAgICAgIExPR19SRUNFSVZFUl9UQUcsXHJcbiAgICAgIFwiYWRkQnJlYWtzOiBcIiArIEpTT04uc3RyaW5naWZ5KG1lZGlhSW5mb3JtYXRpb24pXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGZldGNoTWVkaWFCeUlkKFwiZmJiX2FkXCIpLnRoZW4oKGNsaXAxKSA9PiB7XHJcbiAgICAgIG1lZGlhSW5mb3JtYXRpb24uYnJlYWtDbGlwcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogXCJmYmJfYWRcIixcclxuICAgICAgICAgIHRpdGxlOiBjbGlwMS50aXRsZSxcclxuICAgICAgICAgIGNvbnRlbnRVcmw6IGNsaXAxLnN0cmVhbS5kYXNoLFxyXG4gICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vZGFzaCt4bWxcIixcclxuICAgICAgICAgIHdoZW5Ta2lwcGFibGU6IDUsXHJcbiAgICAgICAgfSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIG1lZGlhSW5mb3JtYXRpb24uYnJlYWtzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGlkOiBcInByZS1yb2xsXCIsXHJcbiAgICAgICAgICBicmVha0NsaXBJZHM6IFtcImZiYl9hZFwiXSxcclxuICAgICAgICAgIHBvc2l0aW9uOiAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF07XHJcbiAgICB9KTtcclxuICB9XHJcbiAgZmV0Y2hNZWRpYUJ5SWQoaWQpIHtcclxuICAgIGNhc3REZWJ1Z0xvZ2dlci5kZWJ1ZyhMT0dfUkVDRUlWRVJfVEFHLCBcImZldGNoaW5nIGlkOiBcIiArIGlkKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGFjY2VwdCwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGZldGNoKENPTlRFTlRfVVJMKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAgIC50aGVuKChvYmopID0+IHtcclxuICAgICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgaWYgKG9ialtpZF0pIHtcclxuICAgICAgICAgICAgICBhY2NlcHQob2JqW2lkXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmVqZWN0KGAke2lkfSBub3QgZm91bmQgaW4gcmVwb3NpdG9yeWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZWplY3QoXCJDb250ZW50IHJlcG9zaXRvcnkgbm90IGZvdW5kLlwiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmVjZWl2ZXI7XHJcbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiYWRUaW1lU2xpZGVyQ29sb3IiLCJ0aW1lU2xpZGVyQ29sb3IiLCJjb25zdHJ1Y3RvciIsInJlY2VpdmVyIiwidGhpcyIsImVuYWJsZSIsImJpbmQiLCJkaXNhYmxlIiwiY29uc29sZSIsImxvZyIsImNvbmZpZyIsInJlY2VpdmVyQ29udHJvbHMiLCJzZWVrYmFyIiwic2V0Q29sb3IiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwibiIsImdldHRlciIsIl9fZXNNb2R1bGUiLCJkIiwiYSIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlYnVnIiwibWF4QnVmZmVyU2l6ZSIsIm1heExvYWRpbmdEZWxheSIsIm51ZGdlTWF4UmV0cnkiLCJsaXZlU3luY0R1cmF0aW9uQ291bnQiLCJsaXZlTWF4TGF0ZW5jeUR1cmF0aW9uQ291bnQiLCJJbmZpbml0eSIsIm1hbmlmZXN0TG9hZGluZ01heFJldHJ5IiwibWFuaWZlc3RMb2FkaW5nUmV0cnlEZWxheSIsIm1hbmlmZXN0TG9hZGluZ01heFJldHJ5VGltZW91dCIsImVtZUVuYWJsZWQiLCJ3aWRldmluZUxpY2Vuc2VVcmwiLCJ0aW1lIiwiaG91cnMiLCJNYXRoIiwiZmxvb3IiLCJtaW51dGVzIiwic2Vjb25kcyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJpZCIsImVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjYXN0ZGVidWdnZXIiLCJzaG93Iiwic3BlZWQiLCJpbnRlcnZhbCIsImNhbmNlbEFuaW1hdGlvbiIsImluaXRpYWxMZWZ0UG9zaXRpb24iLCJzdHlsZSIsImxlZnQiLCJzZXRDYXN0RGVidWdnZXIiLCJzZXRQcm9ncmVzcyIsImR1cmF0aW9uIiwid2lkdGgiLCJzaG93SGlkZSIsInRpbWluZyIsInBhcmVudEVsZW1lbnQiLCJkaXNwbGF5Iiwic2V0VGltZW91dCIsImNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiYW5pbWF0ZVNlZWtiYXIiLCJwb3NpdGlvbiIsInRvdGFsd2lkdGgiLCJjbGllbnRXaWR0aCIsImlubmVyRnVuY3Rpb24iLCJsZWZ0UG9zaXRpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0UGFyZW50UG9zaXRpb24iLCJyaWdodCIsInJpZ2h0UGFyZW50UG9zaXRpb24iLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJlcnJvciIsInJlc2V0IiwidGltZXIiLCJ0ZXh0Q29udGVudCIsInVwZGF0ZSIsImN1cnJlbnRUaW1lIiwiVXRpbHMiLCJjYXN0RGVidWdnZXIiLCJvdmVybGF5IiwiaW5mbyIsImNoaWxkcmVuIiwibG9hZGVyIiwicGxheUljb24iLCJwYXVzZUljb24iLCJ2aWRlb0luZm8iLCJzcGxhc2hTY3JlZW4iLCJ0aHVtYm5haWwiLCJwYXVzZSIsInBsYXkiLCJzdGF0ZSIsImhpZGVDb250cm9scyIsInNob3dDb250cm9scyIsInJlc2V0T3ZlcmxheSIsInRpbWVvdXQiLCJpbml0T3ZlcmxheSIsIm1ldGFkYXRhIiwiaW1hZ2VzIiwibGVuZ3RoIiwic3JjIiwidXJsIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIlZhc3RTZXJ2aWNlIiwiYWRDb250YWluZXIiLCJhZHNEaXNwbGF5Q29udGFpbmVyIiwiYWRzTG9hZGVyIiwiYWRzRGlzcGxheUluaXRpYWxpemVkIiwiY3VycmVudEFkcyIsImluaXRpYWxpemVkIiwiYXV0b3BsYXlBbGxvd2VkIiwiYXV0b3BsYXlSZXF1aXJlc011dGVkIiwiaGFzRXJyb3JzIiwiYWRVSSIsImFkRHVyYXRpb24iLCJpbml0IiwiZ29vZ2xlIiwiaW1hIiwic2V0dGluZ3MiLCJzZXRWcGFpZE1vZGUiLCJJbWFTZGtTZXR0aW5ncyIsIlZwYWlkTW9kZSIsIkVOQUJMRUQiLCJBZERpc3BsYXlDb250YWluZXIiLCJ2aWRlbyIsIkFkc0xvYWRlciIsImdldFNldHRpbmdzIiwic2V0UGxheWVyVHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJBZHNNYW5hZ2VyTG9hZGVkRXZlbnQiLCJUeXBlIiwiQURTX01BTkFHRVJfTE9BREVEIiwib25BZHNNYW5hZ2VyTG9hZGVkIiwiQWRFcnJvckV2ZW50IiwiQURfRVJST1IiLCJvbkFkRXJyb3IiLCJBZFVJIiwib25BbGxBZHNDb21wbGV0ZWQiLCJlIiwiY2FzdERlYnVnTG9nZ2VyIiwiREVCVUdfVkFTVF9TRVJWSUNFIiwib25BZENvbXBsZXRlZCIsImFkc01hbmFnZXIiLCJkZXN0cm95IiwiaXNBZFBsYXlpbmciLCJvbkVuZCIsIm9uQ29udGVudFBhdXNlUmVxdWVzdGVkIiwib25Db250ZW50UmVzdW1lUmVxdWVzdGVkIiwib25BZExvYWRlZCIsImxvYWRBZHMiLCJ2YXN0VXJsIiwidmFzdFhtbCIsImNvbnRlbnQiLCJ0eXBlIiwiY3VycmVudEFkSW5kZXgiLCJsb2FkIiwiYWRzUmVxdWVzdCIsIkFkc1JlcXVlc3QiLCJhZFRhZ1VybCIsImFkc1Jlc3BvbnNlIiwibGluZWFyQWRTbG90V2lkdGgiLCJsaW5lYXJBZFNsb3RIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJub25MaW5lYXJBZFNsb3RXaWR0aCIsIm5vbkxpbmVhckFkU2xvdEhlaWdodCIsInNldEFkV2lsbEF1dG9QbGF5Iiwic2V0QWRXaWxsUGxheU11dGVkIiwidmFzdExvYWRUaW1lb3V0IiwicmVxdWVzdEFkcyIsIm9uVGltZVVwZGF0ZSIsImV2ZW50IiwiYWREYXRhIiwiZ2V0QWREYXRhIiwiZ2V0Q3VycmVudEFkIiwiZ2V0QWRJZCIsIm9uQWRTa2lwIiwib25BZFN0YXJ0ZWQiLCJhZHNNYW5hZ2VyTG9hZGVkRXZlbnQiLCJhZHNSZW5kZXJpbmdTZXR0aW5ncyIsIkFkc1JlbmRlcmluZ1NldHRpbmdzIiwiZ2V0QWRzTWFuYWdlciIsIkFkRXZlbnQiLCJDT05URU5UX1BBVVNFX1JFUVVFU1RFRCIsIkNPTlRFTlRfUkVTVU1FX1JFUVVFU1RFRCIsIkFMTF9BRFNfQ09NUExFVEVEIiwiTE9BREVEIiwiU1RBUlRFRCIsIkNPTVBMRVRFIiwiU0tJUFBFRCIsIkFEX1BST0dSRVNTIiwiQURfQlVGRkVSSU5HIiwibG9hZGluZyIsIlNLSVBQQUJMRV9TVEFURV9DSEFOR0VEIiwiZmlyZSIsIkV2ZW50cyIsImFkRXZlbnRzIiwiQURfU0tJUFBBQkxFIiwicGxheWVyIiwiYWRQbGF5SWQiLCJwbGF5QWRzIiwiaW5pdGlhbGl6ZSIsImhlaWdodCIsIlZpZXdNb2RlIiwiRlVMTFNDUkVFTiIsInN0YXJ0IiwiYWRFcnJvciIsImdldE1lc3NhZ2UiLCJyZXN1bWUiLCJwcm9jZXNzIiwidnBSZWNlaXZlciIsImNvbnRleHQiLCJwbGF5ZXJNYW5hZ2VyIiwiYXBwSWQiLCJwbGF5YmFja0NvbmZpZyIsImNvbnRyb2xzIiwiaGxzIiwidmlkZW9PYmplY3QiLCJ2aWRlb0NvbnRhaW5lciIsInBsYXliYWNrUmF0ZSIsImF1dG9wbGF5IiwiUmVjZWl2ZXJDb250cm9scyIsIm1lZGlhTWFuYWdlciIsImNhc3RSZWNlaXZlck1hbmFnZXIiLCJ2aWRlb1N0YXJ0ZWQiLCJ2YXN0U2VydmljZSIsImFkQnJlYWtzIiwiZGVidWdUYWdzIiwiTE9BRF9SRVFVRVNUIiwiQVRUQUNIX01FRElBIiwiT05QTEFZIiwiU1RBUlQiLCJJTklUIiwiRVZFTlRTIiwiT05FTkQiLCJCUk9BRENBU1QiLCJPTlRJTUVVUERBVEVFIiwiSU5JVFNUQVRFIiwiZGVmYXVsQ29uZmlnIiwiTkFNRVNQQUNFIiwiYnJvYWRjYXN0Iiwib25QbGF5IiwiZGF0YSIsImdldEF0dHJpYnV0ZSIsInRoZW4iLCJjYXRjaCIsIm9uUGF1c2UiLCJhZGRQbGF5ZXJFdmVudHMiLCJtZXNzYWdlIiwicmVxdWlyZWQiLCJFbnZpcm9ubWVudCIsInNlbmRDdXN0b21NZXNzYWdlIiwicmVwbGF5IiwiY29kZSIsIm1hcCIsImFkIiwiYnJlYWtUaW1pbmdWYWx1ZSIsImluY2x1ZGVzIiwic2hpZnQiLCJPTlRJTUVVUERBVEUiLCJ1cGRhdGVQbGF5ZXJTdGF0ZSIsImF0dGFjaE1lZGlhIiwiSExTc3VwcG9ydGVkIiwiSGxzIiwiaXNTdXBwb3J0ZWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlsZSIsImVuZHNXaXRoIiwiaGxzY29uZmlnIiwib24iLCJNRURJQV9BVFRBQ0hFRCIsImxvYWRTb3VyY2UiLCJNQU5JRkVTVF9QQVJTRUQiLCJFUlJPUiIsImRldGFpbHMiLCJmYWtlaW5pdCIsInNlbGYiLCJicmVha1R5cGUiLCJicmVha1RpbWluZ1R5cGUiLCJiaW5kTWV0aG9kcyIsImNhc3QiLCJmcmFtZXdvcmsiLCJDYXN0UmVjZWl2ZXJDb250ZXh0IiwiZ2V0SW5zdGFuY2UiLCJzZXRMb2dnZXJMZXZlbCIsIkxvZ2dlckxldmVsIiwiREVCVUciLCJDYXN0RGVidWdMb2dnZXIiLCJzZXRFbmFibGVkIiwiZ2V0UGxheWVyTWFuYWdlciIsInNldE1lZGlhRWxlbWVudCIsInNldFN1cHBvcnRlZE1lZGlhQ29tbWFuZHMiLCJtZXNzYWdlcyIsIkNvbW1hbmQiLCJTRUVLIiwiUEFVU0UiLCJQTEFZIiwidWkiLCJDb250cm9scyIsIml0ZW0xIiwiQnJvd3NlSXRlbSIsInN1YnRpdGxlIiwiaW1hZ2VUeXBlIiwiQnJvd3NlSW1hZ2VUeXBlIiwiTVVTSUNfVFJBQ0siLCJpbWFnZSIsIkltYWdlIiwiZW50aXR5IiwiaXRlbTIiLCJpdGVtcyIsImJyb3dzZUNvbnRlbnQiLCJCcm93c2VDb250ZW50Iiwib3B0aW9ucyIsIkNhc3RSZWNlaXZlck9wdGlvbnMiLCJjdXN0b21OYW1lc3BhY2VzIiwic3lzdGVtIiwiTWVzc2FnZVR5cGUiLCJiaW5kSW50ZXJjZXB0b3JzIiwib25TZWVrIiwicmVxdWVzdERhdGEiLCJkcmF3QnV0dG9ucyIsImFzc2lnbkJ1dHRvbiIsIkNvbnRyb2xzU2xvdCIsIlNMT1RfU0VDT05EQVJZXzEiLCJDb250cm9sc0J1dHRvbiIsIlFVRVVFX1BSRVYiLCJTTE9UX1BSSU1BUllfMSIsIkNBUFRJT05TIiwiU0xPVF9QUklNQVJZXzIiLCJTRUVLX0ZPUldBUkRfMTUiLCJTTE9UX1NFQ09OREFSWV8yIiwiUVVFVUVfTkVYVCIsIkV2ZW50VHlwZSIsIlNFTkRFUl9ESVNDT05ORUNURUQiLCJjbG9zZSIsImFkZEN1c3RvbU1lc3NhZ2VMaXN0ZW5lciIsInBhcnNlIiwic2V0TWVzc2FnZUludGVyY2VwdG9yIiwiTE9BRCIsIm9uTG9hZFJlcXVlc3QiLCJpbml0U3RhdGUiLCJsb2FkUmVxdWVzdERhdGEiLCJtZWRpYSIsImNvbnRlbnRJZCIsInJlcXVpcmVBZHMiLCJjdXN0b21EYXRhIiwic3RhY2siLCJhZGRCcmVha3MiLCJtZWRpYUluZm9ybWF0aW9uIiwiTE9HX1JFQ0VJVkVSX1RBRyIsImZldGNoTWVkaWFCeUlkIiwiY2xpcDEiLCJicmVha0NsaXBzIiwiY29udGVudFVybCIsInN0cmVhbSIsImRhc2giLCJjb250ZW50VHlwZSIsIndoZW5Ta2lwcGFibGUiLCJicmVha3MiLCJicmVha0NsaXBJZHMiLCJQcm9taXNlIiwiYWNjZXB0IiwicmVqZWN0IiwiZmV0Y2giLCJDT05URU5UX1VSTCIsInJlc3BvbnNlIiwianNvbiJdLCJzb3VyY2VSb290IjoiIn0=